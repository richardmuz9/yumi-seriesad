{"version":3,"file":"WritingHelperScreen-BRTwtSlV.js","sources":["../../src/writing-helper/WritingHelperScreen.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { \n  IoArrowBack, \n  IoMenu, \n  IoClose, \n  IoSwapHorizontal,\n  IoSettings,\n  IoCloudUpload,\n  IoImage,\n  IoColorPalette\n} from 'react-icons/io5';\nimport AIAssistant from '../components/AIAssistant';\n\n// Creative Control System\nimport { CreativeControlPanel } from '../shared/components/CreativeControlPanel';\nimport { IterativeFeedbackPanel } from '../shared/components/IterativeFeedbackPanel';\nimport { CreativeControlSettings, CreativeSession, CreativeVersion, CreativeFeedback } from '../shared/types/creativeModes';\nimport { smartPromptEngine, createCreativeSession, updateUserHistory } from '../shared/services/smartPromptEngine';\nimport { getAvailablePersonalities } from '../shared/services/yumiPersonalityService';\n\ninterface WritingHelperScreenProps {\n  content: string;\n  onContentChange: (content: string) => void;\n  onBack: () => void;\n}\n\ntype SidebarPosition = 'left' | 'right';\n\nconst WritingHelperScreen: React.FC<WritingHelperScreenProps> = ({\n  content,\n  onContentChange,\n  onBack\n}) => {\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n  const [sidebarPosition, setSidebarPosition] = useState<SidebarPosition>('left');\n  const [activeTool, setActiveTool] = useState<string | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [showAI, setShowAI] = useState(false);\n  const [showCustomization, setShowCustomization] = useState(false);\n  const [backgroundSettings, setBackgroundSettings] = useState({\n    type: 'solid' as 'solid' | 'gradient' | 'image',\n    color: '#1a1a2e',\n    gradient: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)',\n    image: '',\n    opacity: 0.9\n  });\n  const [uploadedFiles, setUploadedFiles] = useState<File[]>([]);\n  const sidebarRef = useRef<HTMLDivElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Creative Control System state\n  const [creativeSession, setCreativeSession] = useState<CreativeSession>(\n    createCreativeSession('writing', {\n      level: 'balanced',\n      yumiPersonality: 'teacher',\n      allowSuggestions: true,\n      memoryNudges: true,\n      iterativeMode: true\n    })\n  );\n  const [showIterativeFeedback, setShowIterativeFeedback] = useState(false);\n  const [currentVersions, setCurrentVersions] = useState<CreativeVersion[]>([]);\n  const [availablePersonalities] = useState<string[]>(getAvailablePersonalities());\n\n  // Sidebar dragging\n  const handleMouseDown = (e: React.MouseEvent) => {\n    if (sidebarRef.current) {\n      setIsDragging(true);\n      const rect = sidebarRef.current.getBoundingClientRect();\n      setDragOffset({\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      });\n    }\n  };\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    if (isDragging && sidebarRef.current) {\n      const newX = e.clientX - dragOffset.x;\n      const screenWidth = window.innerWidth;\n      \n      // Switch sides based on position\n      if (newX < screenWidth / 2 && sidebarPosition === 'right') {\n        setSidebarPosition('left');\n      } else if (newX > screenWidth / 2 && sidebarPosition === 'left') {\n        setSidebarPosition('right');\n      }\n    }\n  };\n\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  const togglePosition = () => {\n    setSidebarPosition(prev => prev === 'left' ? 'right' : 'left');\n  };\n\n  const handleToolClick = (tool: string) => {\n    setActiveTool(activeTool === tool ? null : tool);\n  };\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    setUploadedFiles(prev => [...prev, ...files]);\n    \n    // Handle background image upload\n    if (files[0] && backgroundSettings.type === 'image') {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setBackgroundSettings(prev => ({\n          ...prev,\n          image: reader.result as string\n        }));\n      };\n      reader.readAsDataURL(files[0]);\n    }\n  };\n\n  // Creative Control System handlers\n  const handleCreativeSettingsChange = (settings: CreativeControlSettings) => {\n    const previousSettings = creativeSession.controlSettings;\n    \n    setCreativeSession(prev => ({\n      ...prev,\n      controlSettings: settings\n    }));\n    \n    // Update user history if personality changed\n    if (settings.yumiPersonality !== previousSettings.yumiPersonality) {\n      setCreativeSession(prev => updateUserHistory(prev, {\n        lastUsedPersonality: settings.yumiPersonality\n      }));\n    }\n  };\n\n  const handleVersionSelect = (versionId: string) => {\n    const version = currentVersions.find(v => v.id === versionId);\n    if (version && typeof version.content === 'string') {\n      onContentChange(version.content);\n    }\n  };\n\n  const handleRequestRefinement = (feedback: CreativeFeedback) => {\n    if (creativeSession.controlSettings.level === 'balanced' || creativeSession.controlSettings.allowSuggestions) {\n      // Generate enhanced prompt with personality influence\n      const enhancedPrompt = smartPromptEngine.generateBasePrompt(\n        `${content}\\n\\nRefinement request: ${feedback.question}`,\n        creativeSession.controlSettings\n      );\n      \n      // Apply refinement based on feedback type\n      if (feedback.type === 'mood') {\n        setShowAI(true); // Show AI assistant for mood adjustments\n      } else if (feedback.type === 'style') {\n        // Trigger style refinement\n        const selectedOption = feedback.options[0];\n        if (selectedOption) {\n          generateWritingVariation(selectedOption.label);\n        }\n      }\n\n      // Update session context\n      setCreativeSession(prev => ({\n        ...prev,\n        currentContext: { feedback, originalContent: content }\n      }));\n    }\n  };\n\n  const generateWritingVariation = (variation: string) => {\n    // This would integrate with the AI system to generate variations\n    const variations = {\n      'formal': content.replace(/\\b(awesome|cool|great)\\b/gi, 'excellent'),\n      'casual': content.replace(/\\b(excellent|outstanding)\\b/gi, 'awesome'),\n      'emotional': content + '\\n\\nThis deeply resonates with the human experience.',\n      'humorous': content + '\\n\\n(Just kidding! üòÑ)'\n    };\n    \n    const variationKey = variation.toLowerCase();\n    if (variationKey in variations) {\n      onContentChange(variations[variationKey as keyof typeof variations]);\n    }\n  };\n\n  const generateWritingVersions = () => {\n    if (creativeSession.controlSettings.iterativeMode && content.trim()) {\n      const versions: CreativeVersion[] = [\n        {\n          id: `version_${Date.now()}_main`,\n          type: 'main',\n          content: content,\n          metadata: {\n            aiConfidence: 0.8,\n            refinementsSuggested: ['Improve clarity', 'Add examples', 'Enhance flow'],\n            personalityInfluence: [creativeSession.controlSettings.yumiPersonality]\n          }\n        }\n      ];\n\n      // Generate personality-influenced alternative\n      if (creativeSession.controlSettings.allowSuggestions) {\n        const personalityPrompt = smartPromptEngine.generateBasePrompt(\n          `Rewrite this with ${creativeSession.controlSettings.yumiPersonality} personality: ${content}`,\n          { ...creativeSession.controlSettings, level: 'freestyle' }\n        );\n        \n        versions.push({\n          id: `version_${Date.now()}_alt`,\n          type: 'alternative',\n          content: content + '\\n\\n[AI-enhanced version would appear here]',\n          metadata: {\n            aiConfidence: 0.7,\n            refinementsSuggested: ['Different tone', 'Personality variation'],\n            personalityInfluence: [creativeSession.controlSettings.yumiPersonality]\n          }\n        });\n      }\n\n      setCurrentVersions(versions);\n      setShowIterativeFeedback(true);\n    }\n  };\n\n  const getBackgroundStyle = () => {\n    switch (backgroundSettings.type) {\n      case 'solid':\n        return { backgroundColor: backgroundSettings.color };\n      case 'gradient':\n        return { background: backgroundSettings.gradient };\n      case 'image':\n        return {\n          backgroundImage: backgroundSettings.image ? `url(${backgroundSettings.image})` : 'none',\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          backgroundRepeat: 'no-repeat'\n        };\n      default:\n        return {};\n    }\n  };\n\n  const writingTools = [\n    { id: 'social', icon: 'üì±', label: 'Post to Platforms', category: 'social' },\n    { id: 'trending', icon: 'üìà', label: 'Trending Search', category: 'social' },\n    { id: 'ai-continue', icon: 'ü§ñ', label: 'AI Continuation', category: 'ai' },\n    { id: 'instructions', icon: 'üìù', label: 'Instructions', category: 'ai' },\n    { id: 'generate-versions', icon: '‚ú®', label: 'Generate Versions', category: 'ai' },\n    { id: 'anime-collab', icon: 'üéÆ', label: 'Anime Collaboration', category: 'collaboration' },\n    { id: 'galgame-blog', icon: 'üíñ', label: 'Galgame Blog', category: 'collaboration' },\n    { id: 'novel-writing', icon: 'üìö', label: 'Novel Writing', category: 'collaboration' },\n    { id: 'test-writing', icon: '‚úÖ', label: 'Test Writing', category: 'tools' },\n    { id: 'upload', icon: 'üì§', label: 'Upload Files', category: 'tools' }\n  ];\n\n  const getCategoryColor = (category: string) => {\n    switch (category) {\n      case 'social': return '#ff6b9d';\n      case 'ai': return '#8b5cf6';\n      case 'collaboration': return '#10b981';\n      case 'tools': return '#f59e0b';\n      default: return '#6b7280';\n    }\n  };\n\n  const renderToolPanel = () => {\n    if (!activeTool) return null;\n\n    const tool = writingTools.find(t => t.id === activeTool);\n    if (!tool) return null;\n\n    return (\n      <div className=\"tool-panel\">\n        <h3>{tool.icon} {tool.label}</h3>\n        \n        {activeTool === 'upload' && (\n          <div className=\"upload-panel\">\n            <input\n              type=\"file\"\n              ref={fileInputRef}\n              multiple\n              accept=\"image/*,text/*,.pdf,.doc,.docx\"\n              onChange={handleFileUpload}\n              style={{ display: 'none' }}\n            />\n            <button \n              className=\"upload-btn\"\n              onClick={() => fileInputRef.current?.click()}\n            >\n              <IoCloudUpload size={20} />\n              Upload Files\n            </button>\n            {uploadedFiles.length > 0 && (\n              <div className=\"uploaded-files\">\n                <h4>Uploaded Files:</h4>\n                {uploadedFiles.map((file, index) => (\n                  <div key={index} className=\"file-item\">\n                    <span>{file.name}</span>\n                    <small>({(file.size / 1024).toFixed(1)} KB)</small>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeTool === 'social' && (\n          <div className=\"social-platforms\">\n            <button className=\"platform-btn twitter\" onClick={() => window.open('https://twitter.com/compose/tweet', '_blank')}>üê¶ Twitter</button>\n            <button className=\"platform-btn instagram\" onClick={() => window.open('https://www.instagram.com/', '_blank')}>üì∑ Instagram</button>\n            <button className=\"platform-btn facebook\" onClick={() => window.open('https://www.facebook.com/', '_blank')}>üë• Facebook</button>\n            <button className=\"platform-btn linkedin\" onClick={() => window.open('https://www.linkedin.com/feed/', '_blank')}>üíº LinkedIn</button>\n            <button className=\"platform-btn medium\" onClick={() => window.open('https://medium.com/new-story', '_blank')}>üìñ Medium</button>\n            <button className=\"platform-btn wordpress\" onClick={() => window.open('https://wordpress.com/post', '_blank')}>üìù WordPress</button>\n            <div className=\"copy-helper\">\n              <textarea \n                value={content} \n                readOnly \n                placeholder=\"Your content will appear here for easy copying\"\n                rows={4}\n              />\n              <button \n                onClick={() => navigator.clipboard.writeText(content)}\n                className=\"copy-btn\"\n              >\n                üìã Copy Content\n              </button>\n            </div>\n          </div>\n        )}\n\n        {activeTool === 'trending' && (\n          <div className=\"trending-search\">\n            <input type=\"text\" placeholder=\"Search trending topics...\" />\n            <div className=\"platform-filters\">\n              <label><input type=\"checkbox\" /> Twitter</label>\n              <label><input type=\"checkbox\" /> Instagram</label>\n              <label><input type=\"checkbox\" /> TikTok</label>\n              <label><input type=\"checkbox\" /> YouTube</label>\n            </div>\n          </div>\n        )}\n\n        {activeTool === 'ai-continue' && (\n          <div className=\"ai-continuation\">\n            <textarea placeholder=\"Select text to continue or leave empty for auto-continuation...\" />\n            <div className=\"ai-options\">\n              <label>\n                <input type=\"radio\" name=\"tone\" value=\"creative\" />\n                Creative\n              </label>\n              <label>\n                <input type=\"radio\" name=\"tone\" value=\"professional\" />\n                Professional\n              </label>\n              <label>\n                <input type=\"radio\" name=\"tone\" value=\"casual\" />\n                Casual\n              </label>\n            </div>\n            <button className=\"generate-btn\">‚ú® Continue Writing</button>\n          </div>\n        )}\n\n        {activeTool === 'instructions' && (\n          <div className=\"instructions-panel\">\n            <textarea placeholder=\"Enter specific instructions for AI writing assistance...\" />\n            <div className=\"instruction-types\">\n              <button>üìù Style Guide</button>\n              <button>üéØ Target Audience</button>\n              <button>üìè Length Control</button>\n              <button>üîç Keywords</button>\n            </div>\n          </div>\n        )}\n\n        {activeTool === 'generate-versions' && (\n          <div className=\"generate-versions-panel\">\n            <h4>‚ú® Creative Versions</h4>\n            <p>Generate multiple versions of your content with different styles and personalities!</p>\n            \n            <div className=\"version-controls\">\n              <div className=\"control-info\">\n                <strong>Current Mode:</strong> {creativeSession.controlSettings.level}\n                <br />\n                <strong>Personality Guide:</strong> {creativeSession.controlSettings.yumiPersonality}\n              </div>\n              \n              <button \n                className=\"generate-btn primary\"\n                onClick={generateWritingVersions}\n                disabled={!content.trim()}\n              >\n                ‚ú® Generate Versions\n              </button>\n              \n              <div className=\"quick-variations\">\n                <h5>Quick Style Variations:</h5>\n                <button onClick={() => generateWritingVariation('formal')}>üé© Formal</button>\n                <button onClick={() => generateWritingVariation('casual')}>üòä Casual</button>\n                <button onClick={() => generateWritingVariation('emotional')}>üí´ Emotional</button>\n                <button onClick={() => generateWritingVariation('humorous')}>üòÑ Humorous</button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTool === 'anime-collab' && (\n          <div className=\"anime-collaboration\">\n            <select>\n              <option>Choose Character...</option>\n              <option>Yumi (Cheerful)</option>\n              <option>Sakura (Mysterious)</option>\n              <option>Hana (Energetic)</option>\n            </select>\n            <div className=\"collab-options\">\n              <button>üí¨ Character Dialogue</button>\n              <button>üé≠ Role Play</button>\n              <button>üìñ Story Collaboration</button>\n            </div>\n          </div>\n        )}\n\n        {activeTool === 'galgame-blog' && (\n          <div className=\"galgame-blog\">\n            <div className=\"blog-templates\">\n              <button>üíñ Romance Review</button>\n              <button>üéÆ Game Analysis</button>\n              <button>üë• Character Guide</button>\n              <button>üìä Rating System</button>\n            </div>\n          </div>\n        )}\n\n        {activeTool === 'novel-writing' && (\n          <div className=\"novel-writing\">\n            <div className=\"novel-tools\">\n              <button>üìö Chapter Planning</button>\n              <button>üë• Character Development</button>\n              <button>üó∫Ô∏è World Building</button>\n              <button>üìù Plot Outline</button>\n            </div>\n          </div>\n        )}\n\n        {activeTool === 'test-writing' && (\n          <div className=\"test-writing\">\n            <div className=\"test-options\">\n              <button>üìù Grammar Check</button>\n              <button>üìä Readability Score</button>\n              <button>üéØ SEO Analysis</button>\n              <button>üí° Improvement Suggestions</button>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div \n      className=\"writing-helper-screen\"\n      style={{\n        ...getBackgroundStyle(),\n        opacity: backgroundSettings.opacity\n      }}\n      onMouseMove={handleMouseMove}\n      onMouseUp={handleMouseUp}\n    >\n      {/* Header */}\n      <div className=\"screen-header\">\n        <button className=\"back-btn\" onClick={onBack}>\n          <IoArrowBack size={24} />\n        </button>\n        <h1>‚úçÔ∏è Writing Helper</h1>\n        <button \n          className=\"customize-btn\"\n          onClick={() => setShowCustomization(!showCustomization)}\n        >\n          <IoSettings size={24} />\n        </button>\n      </div>\n\n      {/* Customization Panel */}\n      {showCustomization && (\n        <div className=\"customization-panel\">\n          <h3>üé® Customize Writing Helper</h3>\n          \n          <div className=\"customization-section\">\n            <h4>Background</h4>\n            <div className=\"bg-type-selector\">\n              <button \n                className={backgroundSettings.type === 'solid' ? 'active' : ''}\n                onClick={() => setBackgroundSettings(prev => ({ ...prev, type: 'solid' }))}\n              >\n                <IoColorPalette size={16} />\n                Solid\n              </button>\n              <button \n                className={backgroundSettings.type === 'gradient' ? 'active' : ''}\n                onClick={() => setBackgroundSettings(prev => ({ ...prev, type: 'gradient' }))}\n              >\n                üåà Gradient\n              </button>\n              <button\n                className={backgroundSettings.type === 'image' ? 'active' : ''}\n                onClick={() => setBackgroundSettings(prev => ({ ...prev, type: 'image' }))}\n              >\n                <IoImage size={16} />\n                Image\n              </button>\n            </div>\n\n            {backgroundSettings.type === 'solid' && (\n              <div className=\"color-picker\">\n                <input \n                  type=\"color\" \n                  value={backgroundSettings.color}\n                  onChange={(e) => setBackgroundSettings(prev => ({ ...prev, color: e.target.value }))}\n                />\n              </div>\n            )}\n\n            {backgroundSettings.type === 'gradient' && (\n              <div className=\"gradient-presets\">\n                <button onClick={() => setBackgroundSettings(prev => ({ ...prev, gradient: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)' }))}>\n                  Dark Blue\n                </button>\n                <button onClick={() => setBackgroundSettings(prev => ({ ...prev, gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }))}>\n                  Purple\n                </button>\n                <button onClick={() => setBackgroundSettings(prev => ({ ...prev, gradient: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)' }))}>\n                  Pink\n                </button>\n              </div>\n            )}\n\n            {backgroundSettings.type === 'image' && (\n              <div className=\"image-upload\">\n                <button\n                  onClick={() => fileInputRef.current?.click()}\n                  className=\"upload-btn\"\n                >\n                  <IoCloudUpload size={16} />\n                  Upload Background\n                </button>\n              </div>\n            )}\n\n            <div className=\"opacity-slider\">\n              <label>Opacity: {Math.round(backgroundSettings.opacity * 100)}%</label>\n              <input \n                type=\"range\"\n                min=\"0.1\"\n                max=\"1\"\n                step=\"0.1\"\n                value={backgroundSettings.opacity}\n                onChange={(e) => setBackgroundSettings(prev => ({ ...prev, opacity: parseFloat(e.target.value) }))}\n              />\n            </div>\n          </div>\n\n          <div className=\"customization-section\">\n            <h4>Sidebar Settings</h4>\n            <div className=\"sidebar-options\">\n              <button onClick={togglePosition}>\n                <IoSwapHorizontal size={16} />\n                Switch to {sidebarPosition === 'left' ? 'Right' : 'Left'}\n              </button>\n              <button onClick={() => setSidebarCollapsed(!sidebarCollapsed)}>\n                {sidebarCollapsed ? <IoMenu size={16} /> : <IoClose size={16} />}\n                {sidebarCollapsed ? 'Expand' : 'Collapse'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Main Content Editor */}\n      <div className={`content-area ${sidebarCollapsed ? 'sidebar-collapsed' : ''} sidebar-${sidebarPosition}`}>\n        <textarea\n          className=\"main-editor\"\n          value={content}\n          onChange={(e) => onContentChange(e.target.value)}\n          placeholder=\"Start writing your creative content...\"\n        />\n      </div>\n\n      {/* Draggable Sidebar */}\n      <div \n        ref={sidebarRef}\n        className={`writing-sidebar ${sidebarCollapsed ? 'collapsed' : ''} ${sidebarPosition}`}\n        style={{ cursor: isDragging ? 'grabbing' : 'grab' }}\n      >\n        {/* Sidebar Header */}\n        <div className=\"sidebar-header\" onMouseDown={handleMouseDown}>\n          <div className=\"sidebar-controls\">\n            <button \n              className=\"collapse-btn\"\n              onClick={() => setSidebarCollapsed(!sidebarCollapsed)}\n            >\n              {sidebarCollapsed ? <IoMenu size={20} /> : <IoClose size={20} />}\n            </button>\n            <button className=\"position-btn\" onClick={togglePosition}>\n              <IoSwapHorizontal size={20} />\n            </button>\n          </div>\n          {!sidebarCollapsed && <h3>Writing Tools</h3>}\n        </div>\n\n        {/* Tools */}\n        {!sidebarCollapsed && (\n          <div className=\"sidebar-content\">\n            <div className=\"tools-grid\">\n              {writingTools.map(tool => (\n                <button\n                  key={tool.id}\n                  className={`tool-btn ${activeTool === tool.id ? 'active' : ''}`}\n                  style={{ '--category-color': getCategoryColor(tool.category) } as React.CSSProperties}\n                  onClick={() => handleToolClick(tool.id)}\n                >\n                  <span className=\"tool-icon\">{tool.icon}</span>\n                  <span className=\"tool-label\">{tool.label}</span>\n                </button>\n              ))}\n            </div>\n\n            {/* Tool Panel */}\n            {renderToolPanel()}\n          </div>\n        )}\n\n        {/* Collapsed Icons */}\n        {sidebarCollapsed && (\n          <div className=\"collapsed-icons\">\n            {writingTools.map(tool => (\n              <button\n                key={tool.id}\n                className=\"collapsed-tool-btn\"\n                onClick={() => {\n                  setSidebarCollapsed(false);\n                  handleToolClick(tool.id);\n                }}\n                title={tool.label}\n              >\n                {tool.icon}\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* AI Assistant */}\n      <AIAssistant \n        isOpen={showAI}\n        onClose={() => setShowAI(false)}\n        mode=\"writing-helper\"\n        floatingMode={!showAI}\n      />\n\n      {/* Creative Control Panel */}\n      <CreativeControlPanel\n        currentSettings={creativeSession.controlSettings}\n        onSettingsChange={handleCreativeSettingsChange}\n        userHistory={creativeSession.userHistory}\n        availablePersonalities={availablePersonalities}\n        mode=\"writing\"\n      />\n\n      {/* Iterative Feedback Panel */}\n      {showIterativeFeedback && currentVersions.length > 0 && (\n        <IterativeFeedbackPanel\n          versions={currentVersions}\n          onVersionSelect={handleVersionSelect}\n          onRequestRefinement={handleRequestRefinement}\n          currentPersonality={creativeSession.controlSettings.yumiPersonality}\n          refinementSuggestions={[\n            'Improve clarity',\n            'Add examples',\n            'Enhance flow',\n            'Adjust tone',\n            'Simplify language',\n            'Add emotion'\n          ]}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default WritingHelperScreen; "],"names":["WritingHelperScreen","content","onContentChange","onBack","sidebarCollapsed","setSidebarCollapsed","useState","sidebarPosition","setSidebarPosition","activeTool","setActiveTool","isDragging","setIsDragging","dragOffset","setDragOffset","x","y","showAI","setShowAI","showCustomization","setShowCustomization","backgroundSettings","setBackgroundSettings","type","color","gradient","image","opacity","uploadedFiles","setUploadedFiles","sidebarRef","useRef","fileInputRef","creativeSession","setCreativeSession","createCreativeSession","level","yumiPersonality","allowSuggestions","memoryNudges","iterativeMode","showIterativeFeedback","setShowIterativeFeedback","currentVersions","setCurrentVersions","availablePersonalities","getAvailablePersonalities","handleMouseDown","e","current","rect","getBoundingClientRect","clientX","left","clientY","top","handleMouseMove","newX","screenWidth","window","innerWidth","handleMouseUp","togglePosition","prev","handleToolClick","tool","handleFileUpload","files","Array","from","target","reader","FileReader","onloadend","result","readAsDataURL","handleCreativeSettingsChange","settings","previousSettings","controlSettings","updateUserHistory","lastUsedPersonality","handleVersionSelect","versionId","version","find","v","id","handleRequestRefinement","feedback","smartPromptEngine","generateBasePrompt","question","selectedOption","options","generateWritingVariation","label","currentContext","originalContent","variation","variations","replace","variationKey","toLowerCase","generateWritingVersions","trim","versions","Date","now","metadata","aiConfidence","refinementsSuggested","personalityInfluence","push","getBackgroundStyle","backgroundColor","background","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","writingTools","icon","category","getCategoryColor","renderToolPanel","t","jsxs","jsx","display","click","IoCloudUpload","length","map","file","index","name","size","toFixed","open","navigator","clipboard","writeText","IoArrowBack","IoSettings","IoColorPalette","IoImage","value","Math","round","parseFloat","IoSwapHorizontal","IoMenu","IoClose","cursor","AIAssistant","CreativeControlPanel","userHistory","IterativeFeedbackPanel"],"mappings":"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"}