{"version":3,"file":"WritingHelperApp-d0q-8gVb.js","sources":["../../src/writing-helper/WritingScreen.tsx","../../src/writing-helper/components/EquationBuilder.tsx","../../src/writing-helper/components/ChartGenerator.tsx","../../src/writing-helper/ReportHelperScreen.tsx","../../src/writing-helper/WritingHelperApp.tsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { IoArrowBack, IoSettings, IoImage } from 'react-icons/io5';\nimport { ActiveScreen } from './WritingHelperApp';\nimport AIAssistant from '../components/AIAssistant';\n\ninterface BackgroundSettings {\n  type: 'solid' | 'gradient' | 'image';\n  color: string;\n  gradient: string;\n  image: string;\n  opacity: number;\n}\n\ninterface WritingScreenProps {\n  backgroundSettings: BackgroundSettings;\n  onBackgroundChange: (settings: BackgroundSettings) => void;\n  iconPositions: {\n    writing: { x: number; y: number };\n    report: { x: number; y: number };\n  };\n  onIconPositionChange: (section: 'writing' | 'report', position: { x: number; y: number }) => void;\n  onScreenChange: (screen: ActiveScreen) => void;\n  onBack?: () => void;\n}\n\nconst WritingScreen: React.FC<WritingScreenProps> = ({\n  backgroundSettings,\n  onBackgroundChange,\n  iconPositions,\n  onIconPositionChange,\n  onScreenChange,\n  onBack\n}) => {\n  const [showCustomization, setShowCustomization] = useState(false);\n  const [draggingIcon, setDraggingIcon] = useState<'writing' | 'report' | null>(null);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const screenRef = useRef<HTMLDivElement>(null);\n  const [showAI, setShowAI] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Background style generation\n  const getBackgroundStyle = () => {\n    switch (backgroundSettings.type) {\n      case 'solid':\n        return { backgroundColor: backgroundSettings.color };\n      case 'gradient':\n        return { background: backgroundSettings.gradient };\n      case 'image':\n        return {\n          backgroundImage: `url(${backgroundSettings.image})`,\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          backgroundRepeat: 'no-repeat'\n        };\n      default:\n        return { background: backgroundSettings.gradient };\n    }\n  };\n\n  // Icon dragging\n  const handleIconMouseDown = (e: React.MouseEvent, section: 'writing' | 'report') => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDraggingIcon(section);\n    const rect = (e.target as HTMLElement).getBoundingClientRect();\n    setDragOffset({\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    });\n  };\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    if (draggingIcon && screenRef.current) {\n      const screenRect = screenRef.current.getBoundingClientRect();\n      const newPosition = {\n        x: e.clientX - screenRect.left - dragOffset.x,\n        y: e.clientY - screenRect.top - dragOffset.y\n      };\n      \n      // Boundary checking\n      if (newPosition.x >= 0 && newPosition.x <= screenRect.width - 200 &&\n          newPosition.y >= 0 && newPosition.y <= screenRect.height - 100) {\n        onIconPositionChange(draggingIcon, newPosition);\n      }\n    }\n  };\n\n  const handleMouseUp = () => {\n    setDraggingIcon(null);\n  };\n\n  const handleIconClick = (section: 'writing' | 'report') => {\n    if (!draggingIcon) {\n      onScreenChange(section);\n    }\n  };\n\n  // Background customization handlers\n  const handleBackgroundTypeChange = (type: 'solid' | 'gradient' | 'image') => {\n    onBackgroundChange({ ...backgroundSettings, type });\n  };\n\n  const handleColorChange = (color: string) => {\n    onBackgroundChange({ ...backgroundSettings, color });\n  };\n\n  const handleGradientChange = (gradient: string) => {\n    onBackgroundChange({ ...backgroundSettings, gradient });\n  };\n\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        const imageUrl = event.target?.result as string;\n        onBackgroundChange({ ...backgroundSettings, image: imageUrl });\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <div \n      ref={screenRef}\n      className=\"writing-main-screen\"\n      style={{\n        ...getBackgroundStyle(),\n        opacity: backgroundSettings.opacity,\n        position: 'relative',\n        width: '100vw',\n        height: '100vh',\n        overflow: 'hidden'\n      }}\n      onMouseMove={handleMouseMove}\n      onMouseUp={handleMouseUp}\n    >\n      {/* Top Controls */}\n      <div className=\"screen-controls\">\n        {onBack && (\n          <button className=\"back-btn\" onClick={onBack}>\n            <IoArrowBack size={24} />\n          </button>\n        )}\n        \n        <button \n          className=\"customization-btn\"\n          onClick={() => setShowCustomization(!showCustomization)}\n        >\n          <IoSettings size={24} />\n        </button>\n      </div>\n\n      {/* Background Customization Panel */}\n      {showCustomization && (\n        <div className=\"customization-panel\">\n          <h3>ğŸ¨ Customize Background</h3>\n          \n          <div className=\"bg-type-selector\">\n            <button \n              className={backgroundSettings.type === 'solid' ? 'active' : ''}\n              onClick={() => handleBackgroundTypeChange('solid')}\n            >\n              Solid Color\n            </button>\n            <button \n              className={backgroundSettings.type === 'gradient' ? 'active' : ''}\n              onClick={() => handleBackgroundTypeChange('gradient')}\n            >\n              Gradient\n            </button>\n            <button\n              className={backgroundSettings.type === 'image' ? 'active' : ''}\n              onClick={() => handleBackgroundTypeChange('image')}\n            >\n              Image\n            </button>\n        </div>\n\n          {backgroundSettings.type === 'solid' && (\n            <div className=\"color-picker\">\n              <input \n                type=\"color\" \n                value={backgroundSettings.color}\n                onChange={(e) => handleColorChange(e.target.value)}\n              />\n            </div>\n          )}\n\n          {backgroundSettings.type === 'gradient' && (\n            <div className=\"gradient-presets\">\n              <button onClick={() => handleGradientChange('linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)')}>\n                Dark Blue\n              </button>\n              <button onClick={() => handleGradientChange('linear-gradient(135deg, #667eea 0%, #764ba2 100%)')}>\n                Purple\n              </button>\n              <button onClick={() => handleGradientChange('linear-gradient(135deg, #f093fb 0%, #f5576c 100%)')}>\n                Pink\n              </button>\n              <button onClick={() => handleGradientChange('linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)')}>\n                Cyan\n          </button>\n            </div>\n          )}\n\n          {backgroundSettings.type === 'image' && (\n            <div className=\"image-upload\">\n                <input\n                  type=\"file\"\n                  accept=\"image/*\"\n                onChange={handleImageUpload}\n                id=\"bg-image-upload\"\n                />\n              <label htmlFor=\"bg-image-upload\" className=\"upload-btn\">\n                <IoImage size={20} />\n                Upload Image\n              </label>\n            </div>\n          )}\n\n          <div className=\"opacity-slider\">\n            <label>Opacity: {Math.round(backgroundSettings.opacity * 100)}%</label>\n            <input \n              type=\"range\"\n              min=\"0.1\"\n              max=\"1\"\n              step=\"0.1\"\n              value={backgroundSettings.opacity}\n              onChange={(e) => onBackgroundChange({ \n                ...backgroundSettings, \n                opacity: parseFloat(e.target.value) \n              })}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Main Title */}\n      <div className=\"main-title\">\n        <h1>âœ¨ Creative Writing Workspace</h1>\n        <p>Choose your writing mode to begin</p>\n      </div>\n\n      {/* Draggable Helper Buttons */}\n      <div \n        className=\"helper-button writing-helper-btn\"\n        style={{\n          position: 'absolute',\n          left: iconPositions.writing.x,\n          top: iconPositions.writing.y,\n          cursor: draggingIcon === 'writing' ? 'grabbing' : 'grab'\n        }}\n        onMouseDown={(e) => handleIconMouseDown(e, 'writing')}\n        onClick={() => handleIconClick('writing')}\n      >\n        <div className=\"button-content\">\n          <div className=\"button-icon\">âœï¸</div>\n          <div className=\"button-text\">\n            <h3>Writing Helper</h3>\n            <p>Creative content, social posts, blogs</p>\n            <div className=\"button-features\">\n              <span>ğŸ“± Post to Platforms</span>\n              <span>ğŸ¤– AI Continuation</span>\n              <span>ğŸ“ˆ Trending Search</span>\n              <span>ğŸ® Anime Collaboration</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div \n        className=\"helper-button report-helper-btn\"\n        style={{\n          position: 'absolute',\n          left: iconPositions.report.x,\n          top: iconPositions.report.y,\n          cursor: draggingIcon === 'report' ? 'grabbing' : 'grab'\n        }}\n        onMouseDown={(e) => handleIconMouseDown(e, 'report')}\n        onClick={() => handleIconClick('report')}\n      >\n        <div className=\"button-content\">\n          <div className=\"button-icon\">ğŸ“Š</div>\n          <div className=\"button-text\">\n            <h3>Report Helper</h3>\n            <p>Scientific papers, research, LaTeX</p>\n            <div className=\"button-features\">\n              <span>ğŸ”¬ Scientific Search</span>\n              <span>ğŸ“„ LaTeX Editor</span>\n              <span>ğŸ›¡ï¸ Plagiarism Check</span>\n              <span>ğŸ“Š Chart Generation</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Instructions */}\n      <div className=\"instructions\">\n        <p>âœ¨ Customize your workspace and choose your creative path</p>\n        <div className=\"instruction-cards\">\n          <div className=\"instruction-card\">\n            <span className=\"instruction-icon\">ğŸ¨</span>\n            <span>Drag icons to reposition them</span>\n          </div>\n          <div className=\"instruction-card\">\n            <span className=\"instruction-icon\">âš™ï¸</span>\n            <span>Use settings to customize background</span>\n          </div>\n          <div className=\"instruction-card\">\n            <span className=\"instruction-icon\">âœï¸</span>\n            <span>Click icons to enter different modes</span>\n          </div>\n        </div>\n      </div>\n\n      {/* AI Assistant */}\n      <AIAssistant \n        isOpen={showAI}\n        onClose={() => setShowAI(false)}\n        mode=\"main\"\n        floatingMode={!showAI}\n      />\n    </div>\n  );\n};\n\nexport default WritingScreen; ","import React, { useState, useRef } from 'react';\n\ninterface EquationBuilderProps {\n  onEquationChange?: (latex: string) => void;\n  initialLatex?: string;\n}\n\nexport const EquationBuilder: React.FC<EquationBuilderProps> = ({ \n  onEquationChange, \n  initialLatex = '' \n}) => {\n  const [latex, setLatex] = useState<string>(initialLatex);\n  const [preview, setPreview] = useState<string>('');\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  const symbols = [\n    { symbol: '\\\\sum', display: 'âˆ‘', name: 'Sum' },\n    { symbol: '\\\\int', display: 'âˆ«', name: 'Integral' },\n    { symbol: '\\\\sqrt{}', display: 'âˆš', name: 'Square Root' },\n    { symbol: '\\\\frac{}{}', display: 'â„', name: 'Fraction' },\n    { symbol: '\\\\alpha', display: 'Î±', name: 'Alpha' },\n    { symbol: '\\\\beta', display: 'Î²', name: 'Beta' },\n    { symbol: '\\\\gamma', display: 'Î³', name: 'Gamma' },\n    { symbol: '\\\\delta', display: 'Î´', name: 'Delta' },\n    { symbol: '\\\\pi', display: 'Ï€', name: 'Pi' },\n    { symbol: '\\\\theta', display: 'Î¸', name: 'Theta' },\n    { symbol: '\\\\lambda', display: 'Î»', name: 'Lambda' },\n    { symbol: '\\\\mu', display: 'Î¼', name: 'Mu' },\n    { symbol: '\\\\infty', display: 'âˆ', name: 'Infinity' },\n    { symbol: '\\\\pm', display: 'Â±', name: 'Plus/Minus' },\n    { symbol: '\\\\leq', display: 'â‰¤', name: 'Less Equal' },\n    { symbol: '\\\\geq', display: 'â‰¥', name: 'Greater Equal' },\n    { symbol: '\\\\neq', display: 'â‰ ', name: 'Not Equal' },\n    { symbol: '\\\\approx', display: 'â‰ˆ', name: 'Approximately' },\n    { symbol: '^{}', display: 'xÂ²', name: 'Superscript' },\n    { symbol: '_{}', display: 'xâ‚', name: 'Subscript' },\n  ];\n\n  const templates = [\n    { name: 'Quadratic Formula', latex: 'x = \\\\frac{-b \\\\pm \\\\sqrt{b^2 - 4ac}}{2a}' },\n    { name: 'Pythagorean Theorem', latex: 'a^2 + b^2 = c^2' },\n    { name: 'Euler\\'s Identity', latex: 'e^{i\\\\pi} + 1 = 0' },\n    { name: 'Derivative', latex: '\\\\frac{d}{dx}f(x) = \\\\lim_{h \\\\to 0} \\\\frac{f(x+h) - f(x)}{h}' },\n    { name: 'Integral', latex: '\\\\int_a^b f(x) dx' },\n    { name: 'Matrix', latex: '\\\\begin{pmatrix} a & b \\\\\\\\ c & d \\\\end{pmatrix}' },\n    { name: 'Summation', latex: '\\\\sum_{i=1}^{n} x_i' },\n    { name: 'Binomial Coefficient', latex: '\\\\binom{n}{k} = \\\\frac{n!}{k!(n-k)!}' },\n  ];\n\n  const handleLatexChange = (value: string) => {\n    setLatex(value);\n    onEquationChange?.(value);\n    // Simple preview generation (in real app, you'd use MathJax or KaTeX)\n    setPreview(value);\n  };\n\n  const insertSymbol = (symbol: string) => {\n    if (textareaRef.current) {\n      const textarea = textareaRef.current;\n      const start = textarea.selectionStart;\n      const end = textarea.selectionEnd;\n      const newValue = latex.substring(0, start) + symbol + latex.substring(end);\n      \n      handleLatexChange(newValue);\n      \n      // Set cursor position after the inserted symbol\n      setTimeout(() => {\n        const cursorPos = symbol.includes('{}') ? start + symbol.indexOf('{}') : start + symbol.length;\n        textarea.setSelectionRange(cursorPos, cursorPos);\n        textarea.focus();\n      }, 0);\n    }\n  };\n\n  const loadTemplate = (templateLatex: string) => {\n    handleLatexChange(templateLatex);\n    if (textareaRef.current) {\n      textareaRef.current.focus();\n    }\n  };\n\n  const clearEquation = () => {\n    handleLatexChange('');\n    if (textareaRef.current) {\n      textareaRef.current.focus();\n    }\n  };\n\n  const copyToClipboard = async () => {\n    try {\n      await navigator.clipboard.writeText(latex);\n      alert('LaTeX code copied to clipboard!');\n    } catch (err) {\n      console.error('Failed to copy: ', err);\n    }\n  };\n\n  return (\n    <div className=\"equation-builder-panel\">\n      <div className=\"equation-toolbar\">\n        <div className=\"symbol-grid\">\n          {symbols.map((item, index) => (\n            <button\n              key={index}\n              className=\"symbol-btn\"\n              onClick={() => insertSymbol(item.symbol)}\n              title={item.name}\n            >\n              {item.display}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"equation-templates\">\n        <label>Templates:</label>\n        <div className=\"template-buttons\">\n          {templates.map((template, index) => (\n            <button\n              key={index}\n              className=\"template-btn\"\n              onClick={() => loadTemplate(template.latex)}\n              title={template.latex}\n            >\n              {template.name}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"equation-editor\">\n        <label>LaTeX Code:</label>\n        <textarea\n          ref={textareaRef}\n          value={latex}\n          onChange={(e) => handleLatexChange(e.target.value)}\n          placeholder=\"Enter LaTeX equation here... e.g., E = mc^2\"\n          rows={4}\n        />\n      </div>\n\n      <div className=\"equation-preview\">\n        <label>Preview:</label>\n        <div className=\"preview-container\">\n          {latex ? (\n            <div className=\"latex-preview\">\n              <code>{latex}</code>\n              <p className=\"preview-note\">\n                ğŸ’¡ In a real implementation, this would render as mathematical notation using MathJax or KaTeX\n              </p>\n            </div>\n          ) : (\n            <div className=\"preview-placeholder\">\n              Enter LaTeX code to see preview\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"equation-actions\">\n        <button onClick={clearEquation} className=\"clear-btn\">\n          ğŸ—‘ï¸ Clear\n        </button>\n        <button onClick={copyToClipboard} className=\"copy-btn\">\n          ğŸ“‹ Copy LaTeX\n        </button>\n      </div>\n    </div>\n  );\n}; ","import React, { useRef, useEffect, useState } from 'react';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  ChartType,\n  ChartData,\n} from 'chart.js';\nimport { Chart } from 'react-chartjs-2';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\ninterface ChartGeneratorProps {\n  onChartChange?: (chartData: ChartData, type: ChartType) => void;\n}\n\nexport const ChartGenerator: React.FC<ChartGeneratorProps> = ({ onChartChange }) => {\n  const [chartType, setChartType] = useState<ChartType>('line');\n  const [data, setData] = useState<string>('');\n  const [labels, setLabels] = useState<string>('');\n  const [title, setTitle] = useState<string>('');\n  const chartRef = useRef<ChartJS>(null);\n\n  const chartTypes: ChartType[] = ['line', 'bar', 'doughnut', 'pie', 'scatter'];\n\n  const parseData = (input: string): number[] => {\n    return input.split(',').map(num => parseFloat(num.trim())).filter(num => !isNaN(num));\n  };\n\n  const parseLabels = (input: string): string[] => {\n    return input.split(',').map(label => label.trim());\n  };\n\n  const generateChartData = (): ChartData => {\n    const parsedData = parseData(data);\n    const parsedLabels = parseLabels(labels);\n\n    const colors = [\n      'rgb(75, 192, 192)',\n      'rgb(255, 99, 132)',\n      'rgb(54, 162, 235)',\n      'rgb(255, 205, 86)',\n      'rgb(153, 102, 255)',\n    ];\n\n    return {\n      labels: parsedLabels,\n      datasets: [\n        {\n          label: title || 'Dataset',\n          data: parsedData,\n          borderColor: colors[0],\n          backgroundColor: chartType === 'pie' || chartType === 'doughnut' \n            ? colors.slice(0, parsedData.length)\n            : colors[0].replace('rgb', 'rgba').replace(')', ', 0.5)'),\n        },\n      ],\n    };\n  };\n\n  const handleExport = () => {\n    if (chartRef.current) {\n      const url = chartRef.current.toBase64Image();\n      const link = document.createElement('a');\n      link.download = `chart-${Date.now()}.png`;\n      link.href = url;\n      link.click();\n    }\n  };\n\n  const handleGenerateFromCSV = () => {\n    // Sample data for demonstration\n    const sampleData = \"10,20,30,40,50\";\n    const sampleLabels = \"Jan,Feb,Mar,Apr,May\";\n    setData(sampleData);\n    setLabels(sampleLabels);\n    setTitle(\"Sample Chart\");\n  };\n\n  useEffect(() => {\n    if (data && labels) {\n      const chartData = generateChartData();\n      onChartChange?.(chartData, chartType);\n    }\n  }, [data, labels, title, chartType]);\n\n  return (\n    <div className=\"chart-generator-panel\">\n      <div className=\"chart-controls\">\n        <div className=\"control-group\">\n          <label>Chart Type:</label>\n          <select \n            value={chartType}\n            onChange={(e) => setChartType(e.target.value as ChartType)}\n          >\n            {chartTypes.map(type => (\n              <option key={type} value={type}>\n                {type.charAt(0).toUpperCase() + type.slice(1)}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"control-group\">\n          <label>Title:</label>\n          <input\n            type=\"text\"\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            placeholder=\"Chart title\"\n          />\n        </div>\n\n        <div className=\"control-group\">\n          <label>Data (comma-separated):</label>\n          <input\n            type=\"text\"\n            value={data}\n            onChange={(e) => setData(e.target.value)}\n            placeholder=\"1, 2, 3, 4, 5\"\n          />\n        </div>\n\n        <div className=\"control-group\">\n          <label>Labels (comma-separated):</label>\n          <input\n            type=\"text\"\n            value={labels}\n            onChange={(e) => setLabels(e.target.value)}\n            placeholder=\"Jan, Feb, Mar, Apr, May\"\n          />\n        </div>\n\n        <div className=\"chart-actions\">\n          <button onClick={handleGenerateFromCSV} className=\"generate-btn\">\n            ğŸ“Š Generate Sample\n          </button>\n          <button onClick={handleExport} className=\"export-btn\">\n            ğŸ’¾ Export PNG\n          </button>\n        </div>\n      </div>\n\n      {data && labels && (\n        <div className=\"chart-preview\">\n          <Chart\n            ref={chartRef}\n            type={chartType}\n            data={generateChartData()}\n            options={{\n              responsive: true,\n              maintainAspectRatio: false,\n              plugins: {\n                title: {\n                  display: !!title,\n                  text: title,\n                  color: '#ffffff',\n                },\n                legend: {\n                  labels: {\n                    color: '#ffffff',\n                  },\n                },\n              },\n              scales: chartType !== 'pie' && chartType !== 'doughnut' ? {\n                x: {\n                  ticks: {\n                    color: '#ffffff',\n                  },\n                  grid: {\n                    color: 'rgba(255, 255, 255, 0.1)',\n                  },\n                },\n                y: {\n                  ticks: {\n                    color: '#ffffff',\n                  },\n                  grid: {\n                    color: 'rgba(255, 255, 255, 0.1)',\n                  },\n                },\n              } : undefined,\n            }}\n          />\n        </div>\n      )}\n    </div>\n  );\n}; ","import React, { useState, useRef, useEffect } from 'react';\nimport { \n  IoArrowBack, \n  IoMenu, \n  IoClose, \n  IoSwapHorizontal,\n  IoSettings,\n  IoCloudUpload,\n  IoImage,\n  IoColorPalette\n} from 'react-icons/io5';\nimport AIAssistant from '../components/AIAssistant';\nimport { EquationBuilder } from './components/EquationBuilder';\nimport { ChartGenerator } from './components/ChartGenerator';\n\n// Creative Control System\nimport { CreativeControlPanel } from '../shared/components/CreativeControlPanel';\nimport { IterativeFeedbackPanel } from '../shared/components/IterativeFeedbackPanel';\nimport { CreativeControlSettings, CreativeSession, CreativeVersion, CreativeFeedback } from '../shared/types/creativeModes';\nimport { smartPromptEngine, createCreativeSession, updateUserHistory } from '../shared/services/smartPromptEngine';\nimport { getAvailablePersonalities } from '../shared/services/yumiPersonalityService';\n\ninterface ReportHelperScreenProps {\n  content: string;\n  onContentChange: (content: string) => void;\n  onBack: () => void;\n}\n\ntype SidebarPosition = 'left' | 'right';\n\nconst ReportHelperScreen: React.FC<ReportHelperScreenProps> = ({\n  content,\n  onContentChange,\n  onBack\n}) => {\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n  const [sidebarPosition, setSidebarPosition] = useState<SidebarPosition>('left');\n  const [activeTool, setActiveTool] = useState<string | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [showAI, setShowAI] = useState(false);\n  const [showCustomization, setShowCustomization] = useState(false);\n  const [backgroundSettings, setBackgroundSettings] = useState({\n    type: 'solid' as 'solid' | 'gradient' | 'image',\n    color: '#1e293b',\n    gradient: 'linear-gradient(135deg, #1e293b 0%, #334155 100%)',\n    image: '',\n    opacity: 0.95\n  });\n  const [uploadedFiles, setUploadedFiles] = useState<File[]>([]);\n  const sidebarRef = useRef<HTMLDivElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Creative Control System state\n  const [creativeSession, setCreativeSession] = useState<CreativeSession>(\n    createCreativeSession('report', {\n      level: 'balanced',\n      yumiPersonality: 'teacher',\n      allowSuggestions: true,\n      memoryNudges: true,\n      iterativeMode: true\n    })\n  );\n  const [showIterativeFeedback, setShowIterativeFeedback] = useState(false);\n  const [currentVersions, setCurrentVersions] = useState<CreativeVersion[]>([]);\n  const [availablePersonalities] = useState<string[]>(getAvailablePersonalities());\n\n  // Sidebar dragging\n  const handleMouseDown = (e: React.MouseEvent) => {\n    if (sidebarRef.current) {\n      setIsDragging(true);\n      const rect = sidebarRef.current.getBoundingClientRect();\n      setDragOffset({\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      });\n    }\n  };\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    if (isDragging && sidebarRef.current) {\n      const newX = e.clientX - dragOffset.x;\n      const screenWidth = window.innerWidth;\n      \n      // Switch sides based on position\n      if (newX < screenWidth / 2 && sidebarPosition === 'right') {\n        setSidebarPosition('left');\n      } else if (newX > screenWidth / 2 && sidebarPosition === 'left') {\n        setSidebarPosition('right');\n      }\n    }\n  };\n\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  const togglePosition = () => {\n    setSidebarPosition(prev => prev === 'left' ? 'right' : 'left');\n  };\n\n  const handleToolClick = (tool: string) => {\n    setActiveTool(activeTool === tool ? null : tool);\n  };\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    setUploadedFiles(prev => [...prev, ...files]);\n    \n    // Handle background image upload\n    if (files[0] && backgroundSettings.type === 'image') {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setBackgroundSettings(prev => ({\n          ...prev,\n          image: reader.result as string\n        }));\n      };\n      reader.readAsDataURL(files[0]);\n    }\n  };\n\n  // Creative Control System handlers\n  const handleCreativeSettingsChange = (settings: CreativeControlSettings) => {\n    const previousSettings = creativeSession.controlSettings;\n    \n    setCreativeSession(prev => ({\n      ...prev,\n      controlSettings: settings\n    }));\n    \n    // Update user history if personality changed\n    if (settings.yumiPersonality !== previousSettings.yumiPersonality) {\n      setCreativeSession(prev => updateUserHistory(prev, {\n        lastUsedPersonality: settings.yumiPersonality\n      }));\n    }\n  };\n\n  const handleVersionSelect = (versionId: string) => {\n    const version = currentVersions.find(v => v.id === versionId);\n    if (version && typeof version.content === 'string') {\n      onContentChange(version.content);\n    }\n  };\n\n  const handleRequestRefinement = (feedback: CreativeFeedback) => {\n    if (creativeSession.controlSettings.level === 'balanced' || creativeSession.controlSettings.allowSuggestions) {\n      // Generate enhanced prompt with personality influence\n      const enhancedPrompt = smartPromptEngine.generateBasePrompt(\n        `${content}\\n\\nRefinement request: ${feedback.question}`,\n        creativeSession.controlSettings\n      );\n      \n      // Apply refinement based on feedback type\n      if (feedback.type === 'detail') {\n        setShowAI(true); // Show AI assistant for detailed analysis\n      }\n\n      // Update session context\n      setCreativeSession(prev => ({\n        ...prev,\n        currentContext: { feedback, originalContent: content }\n      }));\n    }\n  };\n\n  const generateReportVersions = () => {\n    if (creativeSession.controlSettings.iterativeMode && content.trim()) {\n      const versions: CreativeVersion[] = [\n        {\n          id: `version_${Date.now()}_main`,\n          type: 'main',\n          content: content,\n          metadata: {\n            aiConfidence: 0.9,\n            refinementsSuggested: ['Add citations', 'Include data analysis', 'Improve structure'],\n            personalityInfluence: [creativeSession.controlSettings.yumiPersonality]\n          }\n        }\n      ];\n\n      // Generate academic-style alternative\n      if (creativeSession.controlSettings.allowSuggestions) {\n        versions.push({\n          id: `version_${Date.now()}_academic`,\n          type: 'alternative',\n          content: content + '\\n\\n[Academic enhanced version with formal language and structured analysis would appear here]',\n          metadata: {\n            aiConfidence: 0.8,\n            refinementsSuggested: ['Academic formatting', 'Peer review ready'],\n            personalityInfluence: [creativeSession.controlSettings.yumiPersonality]\n          }\n        });\n      }\n\n      setCurrentVersions(versions);\n      setShowIterativeFeedback(true);\n    }\n  };\n\n  const getBackgroundStyle = () => {\n    switch (backgroundSettings.type) {\n      case 'solid':\n        return { backgroundColor: backgroundSettings.color };\n      case 'gradient':\n        return { background: backgroundSettings.gradient };\n      case 'image':\n        return {\n          backgroundImage: backgroundSettings.image ? `url(${backgroundSettings.image})` : 'none',\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          backgroundRepeat: 'no-repeat'\n        };\n      default:\n        return {};\n    }\n  };\n\n  const reportTools = [\n    { id: 'scientific-search', icon: 'ğŸ”¬', label: 'Scientific Search', category: 'research' },\n    { id: 'nature-physics', icon: 'ğŸŒ¿', label: 'Nature/Physics DB', category: 'research' },\n    { id: 'latex-editor', icon: 'ğŸ“„', label: 'LaTeX Editor', category: 'editing' },\n    { id: 'equation-builder', icon: 'âˆ‘', label: 'Equation Builder', category: 'editing' },\n    { id: 'generate-versions', icon: 'âœ¨', label: 'Generate Versions', category: 'editing' },\n    { id: 'plagiarism-check', icon: 'ğŸ›¡ï¸', label: 'Plagiarism Check', category: 'analysis' },\n    { id: 'citation-manager', icon: 'ğŸ“š', label: 'Citation Manager', category: 'analysis' },\n    { id: 'chart-generator', icon: 'ğŸ“Š', label: 'Chart Generator', category: 'export' },\n    { id: 'pdf-export', icon: 'ğŸ“‹', label: 'PDF Export', category: 'export' },\n    { id: 'upload', icon: 'ğŸ“¤', label: 'Upload Files', category: 'tools' }\n  ];\n\n  const getCategoryColor = (category: string) => {\n    switch (category) {\n      case 'research': return '#3b82f6';\n      case 'editing': return '#f59e0b';\n      case 'analysis': return '#ef4444';\n      case 'export': return '#10b981';\n      case 'tools': return '#8b5cf6';\n      default: return '#6b7280';\n    }\n  };\n\n  const renderToolPanel = () => {\n    if (!activeTool) return null;\n\n    const tool = reportTools.find(t => t.id === activeTool);\n    if (!tool) return null;\n\n    return (\n      <div className=\"tool-panel\">\n        <h3>{tool.icon} {tool.label}</h3>\n        \n        {activeTool === 'upload' && (\n          <div className=\"upload-panel\">\n            <input\n              type=\"file\"\n              ref={fileInputRef}\n              multiple\n              accept=\"image/*,text/*,.pdf,.doc,.docx,.csv,.xlsx\"\n              onChange={handleFileUpload}\n              style={{ display: 'none' }}\n            />\n            <button \n              className=\"upload-btn\"\n              onClick={() => fileInputRef.current?.click()}\n            >\n              <IoCloudUpload size={20} />\n              Upload Research Files\n            </button>\n            {uploadedFiles.length > 0 && (\n              <div className=\"uploaded-files\">\n                <h4>Uploaded Files:</h4>\n                {uploadedFiles.map((file, index) => (\n                  <div key={index} className=\"file-item\">\n                    <span>{file.name}</span>\n                    <small>({(file.size / 1024).toFixed(1)} KB)</small>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n        \n        {activeTool === 'scientific-search' && (\n          <div className=\"scientific-search\">\n            <input type=\"text\" placeholder=\"Search scientific papers...\" />\n            <div className=\"database-filters\">\n              <label><input type=\"checkbox\" /> PubMed</label>\n              <label><input type=\"checkbox\" /> IEEE</label>\n              <label><input type=\"checkbox\" /> Nature</label>\n              <label><input type=\"checkbox\" /> Science</label>\n            </div>\n            <button className=\"search-btn\" onClick={() => window.open('https://pubmed.ncbi.nlm.nih.gov/', '_blank')}>ğŸ” Search Papers</button>\n          </div>\n        )}\n\n        {activeTool === 'nature-physics' && (\n          <div className=\"nature-physics\">\n            <div className=\"database-options\">\n              <button onClick={() => window.open('https://www.nature.com/', '_blank')}>ğŸŒ¿ Nature Database</button>\n              <button onClick={() => window.open('https://journals.aps.org/', '_blank')}>âš›ï¸ Physics Review</button>\n              <button onClick={() => window.open('https://www.cas.org/', '_blank')}>ğŸ§ª Chemical Abstracts</button>\n              <button onClick={() => window.open('https://www.sciencedirect.com/', '_blank')}>ğŸ”¬ Science Direct</button>\n            </div>\n          </div>\n        )}\n\n        {activeTool === 'latex-editor' && (\n          <div className=\"latex-editor-panel\">\n            <textarea placeholder=\"Enter LaTeX code here...\" />\n            <div className=\"latex-templates\">\n              <button>ğŸ“„ Article Template</button>\n              <button>ğŸ“Š Report Template</button>\n              <button>ğŸ“š Thesis Template</button>\n              <button>ğŸ“‘ Paper Template</button>\n            </div>\n            <div className=\"copy-helper\">\n              <button \n                onClick={() => navigator.clipboard.writeText(content)}\n                className=\"copy-btn\"\n              >\n                ğŸ“‹ Copy LaTeX\n              </button>\n            </div>\n          </div>\n        )}\n\n        {activeTool === 'equation-builder' && (\n          <div className=\"equation-panel\">\n            <EquationBuilder />\n          </div>\n        )}\n\n        {activeTool === 'generate-versions' && (\n          <div className=\"generate-versions-panel\">\n            <h4>âœ¨ Academic Report Versions</h4>\n            <p>Generate multiple versions of your report with different academic styles and analysis depths!</p>\n            \n            <div className=\"version-controls\">\n              <div className=\"control-info\">\n                <strong>Current Mode:</strong> {creativeSession.controlSettings.level}\n                <br />\n                <strong>Academic Guide:</strong> {creativeSession.controlSettings.yumiPersonality}\n              </div>\n              \n              <button \n                className=\"generate-btn primary\"\n                onClick={generateReportVersions}\n                disabled={!content.trim()}\n              >\n                âœ¨ Generate Academic Versions\n              </button>\n              \n              <div className=\"academic-variations\">\n                <h5>Academic Enhancements:</h5>\n                <button>ğŸ“š Literature Review</button>\n                <button>ğŸ“Š Data Analysis</button>\n                <button>ğŸ”¬ Methodology</button>\n                <button>ğŸ“‹ Executive Summary</button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTool === 'plagiarism-check' && (\n          <div className=\"plagiarism-check\">\n            <div className=\"check-options\">\n              <button onClick={() => window.open('https://www.grammarly.com/plagiarism-checker', '_blank')}>ğŸ” Quick Check</button>\n              <button>ğŸ“Š Detailed Report</button>\n              <button>ğŸ“š Citation Check</button>\n              <button>ğŸŒ Web Search</button>\n            </div>\n            <div className=\"similarity-threshold\">\n              <label>Similarity Threshold: <input type=\"range\" min=\"0\" max=\"100\" /></label>\n            </div>\n            <div className=\"copy-helper\">\n              <textarea \n                value={content} \n                readOnly \n                placeholder=\"Your content will be analyzed for plagiarism\"\n                rows={3}\n              />\n              <button \n                onClick={() => navigator.clipboard.writeText(content)}\n                className=\"copy-btn\"\n              >\n                ğŸ“‹ Copy for Analysis\n              </button>\n            </div>\n          </div>\n        )}\n\n        {activeTool === 'citation-manager' && (\n          <div className=\"citation-manager\">\n            <div className=\"citation-styles\">\n              <button>ğŸ“– APA</button>\n              <button>ğŸ“š MLA</button>\n              <button>ğŸ”¬ IEEE</button>\n              <button>ğŸ“„ Chicago</button>\n            </div>\n            <textarea placeholder=\"Add citation details...\" />\n          </div>\n        )}\n\n        {activeTool === 'chart-generator' && (\n          <div className=\"chart-panel\">\n            <ChartGenerator />\n          </div>\n        )}\n\n        {activeTool === 'pdf-export' && (\n          <div className=\"pdf-export\">\n            <div className=\"export-options\">\n              <label><input type=\"checkbox\" /> Include References</label>\n              <label><input type=\"checkbox\" /> Include Figures</label>\n              <label><input type=\"checkbox\" /> Include Appendices</label>\n              <label><input type=\"checkbox\" /> Academic Format</label>\n            </div>\n            <button className=\"export-btn\">ğŸ“‹ Export as PDF</button>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div \n      className=\"report-helper-screen\"\n      style={{\n        ...getBackgroundStyle(),\n        opacity: backgroundSettings.opacity\n      }}\n      onMouseMove={handleMouseMove}\n      onMouseUp={handleMouseUp}\n    >\n      {/* Header */}\n      <div className=\"screen-header\">\n        <button className=\"back-btn\" onClick={onBack}>\n          <IoArrowBack size={24} />\n        </button>\n        <h1>ğŸ“Š Report Helper</h1>\n        <button \n          className=\"customize-btn\"\n          onClick={() => setShowCustomization(!showCustomization)}\n        >\n          <IoSettings size={24} />\n        </button>\n      </div>\n\n      {/* Customization Panel */}\n      {showCustomization && (\n        <div className=\"customization-panel\">\n          <h3>ğŸ¨ Customize Report Helper</h3>\n          \n          <div className=\"customization-section\">\n            <h4>Background</h4>\n            <div className=\"bg-type-selector\">\n              <button \n                className={backgroundSettings.type === 'solid' ? 'active' : ''}\n                onClick={() => setBackgroundSettings(prev => ({ ...prev, type: 'solid' }))}\n              >\n                <IoColorPalette size={16} />\n                Solid\n              </button>\n              <button \n                className={backgroundSettings.type === 'gradient' ? 'active' : ''}\n                onClick={() => setBackgroundSettings(prev => ({ ...prev, type: 'gradient' }))}\n              >\n                ğŸŒˆ Gradient\n              </button>\n              <button\n                className={backgroundSettings.type === 'image' ? 'active' : ''}\n                onClick={() => setBackgroundSettings(prev => ({ ...prev, type: 'image' }))}\n              >\n                <IoImage size={16} />\n                Image\n              </button>\n            </div>\n\n            {backgroundSettings.type === 'solid' && (\n              <div className=\"color-picker\">\n                <input \n                  type=\"color\" \n                  value={backgroundSettings.color}\n                  onChange={(e) => setBackgroundSettings(prev => ({ ...prev, color: e.target.value }))}\n                />\n              </div>\n            )}\n\n            {backgroundSettings.type === 'gradient' && (\n              <div className=\"gradient-presets\">\n                <button onClick={() => setBackgroundSettings(prev => ({ ...prev, gradient: 'linear-gradient(135deg, #1e293b 0%, #334155 100%)' }))}>\n                  Dark Slate\n                </button>\n                <button onClick={() => setBackgroundSettings(prev => ({ ...prev, gradient: 'linear-gradient(135deg, #0f172a 0%, #1e293b 100%)' }))}>\n                  Deep Blue\n                </button>\n                <button onClick={() => setBackgroundSettings(prev => ({ ...prev, gradient: 'linear-gradient(135deg, #374151 0%, #4b5563 100%)' }))}>\n                  Professional Gray\n                </button>\n              </div>\n            )}\n\n            {backgroundSettings.type === 'image' && (\n              <div className=\"image-upload\">\n                <button\n                  onClick={() => fileInputRef.current?.click()}\n                  className=\"upload-btn\"\n                >\n                  <IoCloudUpload size={16} />\n                  Upload Background\n                </button>\n              </div>\n            )}\n\n            <div className=\"opacity-slider\">\n              <label>Opacity: {Math.round(backgroundSettings.opacity * 100)}%</label>\n              <input \n                type=\"range\"\n                min=\"0.1\"\n                max=\"1\"\n                step=\"0.1\"\n                value={backgroundSettings.opacity}\n                onChange={(e) => setBackgroundSettings(prev => ({ ...prev, opacity: parseFloat(e.target.value) }))}\n              />\n            </div>\n          </div>\n\n          <div className=\"customization-section\">\n            <h4>Sidebar Settings</h4>\n            <div className=\"sidebar-options\">\n              <button onClick={togglePosition}>\n                <IoSwapHorizontal size={16} />\n                Switch to {sidebarPosition === 'left' ? 'Right' : 'Left'}\n              </button>\n              <button onClick={() => setSidebarCollapsed(!sidebarCollapsed)}>\n                {sidebarCollapsed ? <IoMenu size={16} /> : <IoClose size={16} />}\n                {sidebarCollapsed ? 'Expand' : 'Collapse'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Main Content Editor */}\n      <div className={`content-area ${sidebarCollapsed ? 'sidebar-collapsed' : ''} sidebar-${sidebarPosition}`}>\n        <textarea\n          className=\"main-editor\"\n          value={content}\n          onChange={(e) => onContentChange(e.target.value)}\n          placeholder=\"Start writing your scientific report...\"\n        />\n      </div>\n\n      {/* Draggable Sidebar */}\n      <div \n        ref={sidebarRef}\n        className={`report-sidebar ${sidebarCollapsed ? 'collapsed' : ''} ${sidebarPosition}`}\n        style={{ cursor: isDragging ? 'grabbing' : 'grab' }}\n      >\n        {/* Sidebar Header */}\n        <div className=\"sidebar-header\" onMouseDown={handleMouseDown}>\n          <div className=\"sidebar-controls\">\n            <button \n              className=\"collapse-btn\"\n              onClick={() => setSidebarCollapsed(!sidebarCollapsed)}\n            >\n              {sidebarCollapsed ? <IoMenu size={20} /> : <IoClose size={20} />}\n            </button>\n            <button className=\"position-btn\" onClick={togglePosition}>\n              <IoSwapHorizontal size={20} />\n            </button>\n          </div>\n          {!sidebarCollapsed && <h3>Research Tools</h3>}\n        </div>\n\n        {/* Tools */}\n        {!sidebarCollapsed && (\n          <div className=\"sidebar-content\">\n            <div className=\"tools-grid\">\n              {reportTools.map(tool => (\n                <button\n                  key={tool.id}\n                  className={`tool-btn ${activeTool === tool.id ? 'active' : ''}`}\n                  style={{ '--category-color': getCategoryColor(tool.category) } as React.CSSProperties}\n                  onClick={() => handleToolClick(tool.id)}\n                >\n                  <span className=\"tool-icon\">{tool.icon}</span>\n                  <span className=\"tool-label\">{tool.label}</span>\n                </button>\n              ))}\n            </div>\n\n            {/* Tool Panel */}\n            {renderToolPanel()}\n          </div>\n        )}\n\n        {/* Collapsed Icons */}\n        {sidebarCollapsed && (\n          <div className=\"collapsed-icons\">\n            {reportTools.map(tool => (\n              <button\n                key={tool.id}\n                className=\"collapsed-tool-btn\"\n                onClick={() => {\n                  setSidebarCollapsed(false);\n                  handleToolClick(tool.id);\n                }}\n                title={tool.label}\n              >\n                {tool.icon}\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* AI Assistant */}\n      <AIAssistant \n        isOpen={showAI}\n        onClose={() => setShowAI(false)}\n        mode=\"report-helper\"\n        floatingMode={!showAI}\n      />\n\n      {/* Creative Control Panel */}\n      <CreativeControlPanel\n        currentSettings={creativeSession.controlSettings}\n        onSettingsChange={handleCreativeSettingsChange}\n        userHistory={creativeSession.userHistory}\n        availablePersonalities={availablePersonalities}\n        mode=\"report\"\n      />\n\n      {/* Iterative Feedback Panel */}\n      {showIterativeFeedback && currentVersions.length > 0 && (\n        <IterativeFeedbackPanel\n          versions={currentVersions}\n          onVersionSelect={handleVersionSelect}\n          onRequestRefinement={handleRequestRefinement}\n          currentPersonality={creativeSession.controlSettings.yumiPersonality}\n          refinementSuggestions={[\n            'Add citations',\n            'Include data analysis',\n            'Improve structure',\n            'Academic formatting',\n            'Peer review ready',\n            'Add conclusions'\n          ]}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ReportHelperScreen; ","import React, { useState } from 'react';\nimport { IconButton } from '@mui/material';\nimport { ArrowBack } from '@mui/icons-material';\nimport WritingScreen from './WritingScreen';\nimport WritingHelperScreen from './WritingHelperScreen';\nimport ReportHelperScreen from './ReportHelperScreen';\nimport './WritingHelper.css';\n\nexport interface WritingHelperAppProps {\n  onBack?: () => void;\n}\n\nexport type ActiveScreen = 'main' | 'writing' | 'report';\n\nconst WritingHelperApp: React.FC<WritingHelperAppProps> = ({ onBack }) => {\n  const [activeScreen, setActiveScreen] = useState<ActiveScreen>('main');\n  const [content, setContent] = useState('');\n  \n  // Background customization for main screen\n  const [backgroundSettings, setBackgroundSettings] = useState({\n    type: 'gradient' as 'solid' | 'gradient' | 'image',\n    color: '#1a1a2e',\n    gradient: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)',\n    image: '',\n    opacity: 1\n  });\n\n  // Icon positioning for main screen\n  const [iconPositions, setIconPositions] = useState({\n    writing: { x: 50, y: 100 },\n    report: { x: window.innerWidth - 200, y: 100 }\n  });\n\n  const handleScreenChange = (screen: ActiveScreen) => {\n    setActiveScreen(screen);\n  };\n\n  const handleBackToMain = () => {\n    setActiveScreen('main');\n  };\n\n  const handleContentChange = (newContent: string) => {\n    setContent(newContent);\n  };\n\n  const handleBackgroundChange = (settings: typeof backgroundSettings) => {\n    setBackgroundSettings(settings);\n  };\n\n  const handleIconPositionChange = (section: 'writing' | 'report', position: { x: number; y: number }) => {\n    setIconPositions(prev => ({\n      ...prev,\n      [section]: position\n    }));\n  };\n\n  // Render based on active screen\n  switch (activeScreen) {\n    case 'writing':\n      return (\n        <div className=\"writing-helper-app\">\n          {onBack && (\n            <IconButton \n              className=\"back-button\"\n              onClick={onBack}\n              sx={{ position: 'absolute', top: 16, left: 16, zIndex: 1000 }}\n            >\n              <ArrowBack />\n            </IconButton>\n          )}\n          <WritingHelperScreen\n            content={content}\n            onContentChange={handleContentChange}\n            onBack={handleBackToMain}\n          />\n        </div>\n      );\n      \n    case 'report':\n      return (\n        <div className=\"writing-helper-app\">\n          {onBack && (\n            <IconButton \n              className=\"back-button\"\n              onClick={onBack}\n              sx={{ position: 'absolute', top: 16, left: 16, zIndex: 1000 }}\n            >\n              <ArrowBack />\n            </IconButton>\n          )}\n          <ReportHelperScreen\n            content={content}\n            onContentChange={handleContentChange}\n            onBack={handleBackToMain}\n          />\n        </div>\n      );\n      \n    default:\n      return (\n        <div className=\"writing-helper-app\">\n          {onBack && (\n            <IconButton \n              className=\"back-button\"\n              onClick={onBack}\n              sx={{ position: 'absolute', top: 16, left: 16, zIndex: 1000 }}\n            >\n              <ArrowBack />\n            </IconButton>\n          )}\n          <WritingScreen\n            backgroundSettings={backgroundSettings}\n            onBackgroundChange={handleBackgroundChange}\n            iconPositions={iconPositions}\n            onIconPositionChange={handleIconPositionChange}\n            onScreenChange={handleScreenChange}\n            onBack={onBack}\n          />\n        </div>\n      );\n  }\n};\n\nexport default WritingHelperApp; "],"names":["WritingScreen","backgroundSettings","onBackgroundChange","iconPositions","onIconPositionChange","onScreenChange","onBack","showCustomization","setShowCustomization","useState","draggingIcon","setDraggingIcon","dragOffset","setDragOffset","x","y","screenRef","useRef","showAI","setShowAI","getBackgroundStyle","type","backgroundColor","color","background","gradient","backgroundImage","image","backgroundSize","backgroundPosition","backgroundRepeat","handleIconMouseDown","e","section","preventDefault","stopPropagation","rect","target","getBoundingClientRect","clientX","left","clientY","top","handleMouseMove","current","screenRect","newPosition","width","height","handleMouseUp","handleIconClick","handleBackgroundTypeChange","handleColorChange","handleGradientChange","handleImageUpload","file","files","reader","FileReader","onload","event","imageUrl","result","readAsDataURL","opacity","position","overflow","jsxs","jsx","IoArrowBack","IoSettings","value","IoImage","Math","round","parseFloat","writing","cursor","report","AIAssistant","EquationBuilder","onEquationChange","initialLatex","latex","setLatex","preview","setPreview","textareaRef","symbols","symbol","display","name","templates","handleLatexChange","insertSymbol","textarea","start","selectionStart","end","selectionEnd","newValue","substring","setTimeout","cursorPos","includes","indexOf","length","setSelectionRange","focus","loadTemplate","templateLatex","clearEquation","copyToClipboard","navigator","clipboard","writeText","alert","err","error","map","item","index","template","ChartJS","register","CategoryScale","LinearScale","PointElement","LineElement","BarElement","Title","Tooltip","Legend","ChartGenerator","onChartChange","chartType","setChartType","data","setData","labels","setLabels","title","setTitle","chartRef","chartTypes","parseData","input","split","num","trim","filter","isNaN","parseLabels","label","generateChartData","parsedData","parsedLabels","colors","datasets","borderColor","slice","replace","handleExport","url","toBase64Image","link","document","createElement","download","Date","now","href","click","handleGenerateFromCSV","sampleData","sampleLabels","useEffect","chartData","charAt","toUpperCase","Chart","responsive","maintainAspectRatio","plugins","text","legend","scales","ticks","grid","undefined","ReportHelperScreen","content","onContentChange","sidebarCollapsed","setSidebarCollapsed","sidebarPosition","setSidebarPosition","activeTool","setActiveTool","isDragging","setIsDragging","setBackgroundSettings","uploadedFiles","setUploadedFiles","sidebarRef","fileInputRef","creativeSession","setCreativeSession","createCreativeSession","level","yumiPersonality","allowSuggestions","memoryNudges","iterativeMode","showIterativeFeedback","setShowIterativeFeedback","currentVersions","setCurrentVersions","availablePersonalities","getAvailablePersonalities","handleMouseDown","newX","screenWidth","window","innerWidth","togglePosition","prev","handleToolClick","tool","handleFileUpload","Array","from","onloadend","handleCreativeSettingsChange","settings","previousSettings","controlSettings","updateUserHistory","lastUsedPersonality","handleVersionSelect","versionId","version","find","v","id","handleRequestRefinement","feedback","smartPromptEngine","generateBasePrompt","question","currentContext","originalContent","generateReportVersions","versions","metadata","aiConfidence","refinementsSuggested","personalityInfluence","push","reportTools","icon","category","getCategoryColor","renderToolPanel","t","IoCloudUpload","size","toFixed","open","IoColorPalette","IoSwapHorizontal","IoMenu","IoClose","CreativeControlPanel","userHistory","IterativeFeedbackPanel","WritingHelperApp","activeScreen","setActiveScreen","setContent","setIconPositions","handleScreenChange","screen","handleBackToMain","handleContentChange","newContent","handleBackgroundChange","handleIconPositionChange","IconButton","zIndex","ArrowBack","WritingHelperScreen"],"mappings":"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"}