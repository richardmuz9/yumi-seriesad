{"version":3,"mappings":"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","names":["Fragment","ReactJSXRuntime.Fragment","jsx","type","props","key","hasOwn","ReactJSXRuntime.jsx","Emotion","createEmotionProps","jsxs","ReactJSXRuntime.jsxs","m","require$$0","_typeof","o","hasXMLHttpRequest","isPromise","maybePromise","makePromise","ownKeys","e","r","_objectSpread","_defineProperty","_toPropertyKey","t","i","_toPrimitive","fetchApi","XmlHttpRequestApi","ActiveXObjectApi","__vitePreload","n","mod","addQueryString","url","params","queryString","paramName","fetchIt","fetchOptions","callback","altFetch","resolver","response","data","altResponse","omitFetchOptions","requestWithFetch","options","payload","headers","reqOptions","opt","err","requestWithXmlHttpRequest","x","h","request","_classCallCheck","a","_defineProperties","_createClass","getDefaults","namespace","fallbackValue","languages","namespaces","Backend","services","allOptions","_this","timer","language","loadUrlLanguages","loadUrlNamespaces","_this2","loadPath","resolvedLoadPath","_this3","lng","ns","res","errorMessage","isNetworkError","term","ret","parseErr","_this4","finished","dataArray","resArray","addPath","_this5","_this$services","backendConnector","languageUtils","logger","currentLanguage","toLoad","append","lngs","l","slice","forEach","defaults","obj","source","prop","hasXSS","input","pattern","fieldContentRegExp","serializeCookie","name","val","value","str","maxAge","cookie","minutes","domain","cookieOptions","nameEQ","ca","c","cookie$1","_ref","lookupCookie","_ref2","cookieMinutes","cookieDomain","querystring","lookupQuerystring","found","search","_a","pos","hash","lookupHash","lookupFromHashIndex","query","hasLocalStorageSupport","localStorageAvailable","testKey","localStorage","lookupLocalStorage","hasSessionStorageSupport","sessionStorageAvailable","sessionStorage","lookupSessionStorage","navigator$1","userLanguage","htmlTag","internalHtmlTag","path","lookupFromPathIndex","subdomain","lookupFromSubdomainIndex","internalLookupFromSubdomainIndex","_b","canCookies","order","Browser","i18nOptions","detector","detectionOrder","detected","detectorName","lookup","d","caches","cacheName","i18n","use","LanguageDetector","initReactI18next","init","fallbackLng","defaultNS","backend","detection","interpolation","escapeValue","react","useSuspense","LanguageContext","createContext","undefined","useLanguage","context","useContext","Error","LanguageProvider","children","setLanguageState","useState","getItem","setLanguage","lang","setItem","changeLanguage","useEffect","savedLang","ModeManager","STORAGE_KEY","USAGE_STATS_KEY","CACHE_PREFIX","modeConfigs","id","version","size","dependencies","cacheKeys","assets","coreModes","getInstalledModes","stored","JSON","parse","defaultModes","setInstalledModes","error","modes","modesWithCore","Set","stringify","isModeInstalled","modeId","installedModes","includes","installMode","onProgress","config","progress","status","message","downloadDependencies","cacheAssets","initializeModeCache","updatedModes","initializeUsageStats","uninstallMode","clearModeCache","clearCachedAssets","filter","clearServiceWorkerCache","console","getUsageStats","logModeUsage","sessionTime","stats","currentStats","count","lastUsed","Date","totalTime","getStorageUsage","usage","clearAllData","removeItem","clearIndexedDB","clearAllServiceWorkerCache","simulateAsyncOperation","asset","cacheKey","cached","now","Object","keys","startsWith","fullKey","initialized","navigator","window","modeCacheNames","Promise","all","map","delete","cacheNames","dbNames","dbName","deleteReq","indexedDB","deleteDatabase","resolve","reject","onsuccess","onerror","delay","setTimeout","modeManager","loadComponent","lazy","preloadInstalledComponents","dynamicLoader","warn","preloadComponent","clearComponentCache","clearAllCache","getCacheSize","getCachedComponent","MainPage","AIAssistant","ChargePage","WritingHelperApp","AnimeCharaHelperApp","LoadingComponent","App","isAssistantOpen","setAssistantOpen","handleBack","Suspense","CircularProgress","Router","Routes","Route","ErrorBoundary","Component","state","hasError","getDerivedStateFromError","componentDidCatch","errorInfo","render","setState","location","reload","ReactDOM","createRoot","document","getElementById","React"],"ignoreList":[0,1,2,3,4,5],"sources":["../../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js","../../node_modules/react-dom/client.js","../../node_modules/i18next-http-backend/esm/utils.js","../../node_modules/i18next-http-backend/esm/request.js","../../node_modules/i18next-http-backend/esm/index.js","../../node_modules/i18next-browser-languagedetector/dist/esm/i18nextBrowserLanguageDetector.js","../../src/i18n/index.ts","../../src/contexts/LanguageContext.tsx","../../src/utils/modeManager.ts","../../src/utils/dynamicLoader.ts","../../src/App.tsx","../../src/components/ErrorBoundary.tsx","../../src/main.tsx"],"sourcesContent":["import * as ReactJSXRuntime from 'react/jsx-runtime';\nimport { h as hasOwn, E as Emotion, c as createEmotionProps } from '../../dist/emotion-element-f0de968e.browser.esm.js';\nimport 'react';\nimport '@emotion/cache';\nimport '@babel/runtime/helpers/extends';\nimport '@emotion/weak-memoize';\nimport '../../_isolated-hnrs/dist/emotion-react-_isolated-hnrs.browser.esm.js';\nimport 'hoist-non-react-statics';\nimport '@emotion/utils';\nimport '@emotion/serialize';\nimport '@emotion/use-insertion-effect-with-fallbacks';\n\nvar Fragment = ReactJSXRuntime.Fragment;\nvar jsx = function jsx(type, props, key) {\n  if (!hasOwn.call(props, 'css')) {\n    return ReactJSXRuntime.jsx(type, props, key);\n  }\n\n  return ReactJSXRuntime.jsx(Emotion, createEmotionProps(type, props), key);\n};\nvar jsxs = function jsxs(type, props, key) {\n  if (!hasOwn.call(props, 'css')) {\n    return ReactJSXRuntime.jsxs(type, props, key);\n  }\n\n  return ReactJSXRuntime.jsxs(Emotion, createEmotionProps(type, props), key);\n};\n\nexport { Fragment, jsx, jsxs };\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nvar arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\nexport function defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\nexport function hasXMLHttpRequest() {\n  return typeof XMLHttpRequest === 'function' || (typeof XMLHttpRequest === \"undefined\" ? \"undefined\" : _typeof(XMLHttpRequest)) === 'object';\n}\nfunction isPromise(maybePromise) {\n  return !!maybePromise && typeof maybePromise.then === 'function';\n}\nexport function makePromise(maybePromise) {\n  if (isPromise(maybePromise)) {\n    return maybePromise;\n  }\n  return Promise.resolve(maybePromise);\n}","function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nimport { hasXMLHttpRequest } from './utils.js';\nvar fetchApi = typeof fetch === 'function' ? fetch : undefined;\nif (typeof global !== 'undefined' && global.fetch) {\n  fetchApi = global.fetch;\n} else if (typeof window !== 'undefined' && window.fetch) {\n  fetchApi = window.fetch;\n}\nvar XmlHttpRequestApi;\nif (hasXMLHttpRequest()) {\n  if (typeof global !== 'undefined' && global.XMLHttpRequest) {\n    XmlHttpRequestApi = global.XMLHttpRequest;\n  } else if (typeof window !== 'undefined' && window.XMLHttpRequest) {\n    XmlHttpRequestApi = window.XMLHttpRequest;\n  }\n}\nvar ActiveXObjectApi;\nif (typeof ActiveXObject === 'function') {\n  if (typeof global !== 'undefined' && global.ActiveXObject) {\n    ActiveXObjectApi = global.ActiveXObject;\n  } else if (typeof window !== 'undefined' && window.ActiveXObject) {\n    ActiveXObjectApi = window.ActiveXObject;\n  }\n}\nif (typeof fetchApi !== 'function') fetchApi = undefined;\nif (!fetchApi && !XmlHttpRequestApi && !ActiveXObjectApi) {\n  try {\n    import('cross-fetch').then(function (mod) {\n      fetchApi = mod.default;\n    }).catch(function () {});\n  } catch (e) {}\n}\nvar addQueryString = function addQueryString(url, params) {\n  if (params && _typeof(params) === 'object') {\n    var queryString = '';\n    for (var paramName in params) {\n      queryString += '&' + encodeURIComponent(paramName) + '=' + encodeURIComponent(params[paramName]);\n    }\n    if (!queryString) return url;\n    url = url + (url.indexOf('?') !== -1 ? '&' : '?') + queryString.slice(1);\n  }\n  return url;\n};\nvar fetchIt = function fetchIt(url, fetchOptions, callback, altFetch) {\n  var resolver = function resolver(response) {\n    if (!response.ok) return callback(response.statusText || 'Error', {\n      status: response.status\n    });\n    response.text().then(function (data) {\n      callback(null, {\n        status: response.status,\n        data: data\n      });\n    }).catch(callback);\n  };\n  if (altFetch) {\n    var altResponse = altFetch(url, fetchOptions);\n    if (altResponse instanceof Promise) {\n      altResponse.then(resolver).catch(callback);\n      return;\n    }\n  }\n  if (typeof fetch === 'function') {\n    fetch(url, fetchOptions).then(resolver).catch(callback);\n  } else {\n    fetchApi(url, fetchOptions).then(resolver).catch(callback);\n  }\n};\nvar omitFetchOptions = false;\nvar requestWithFetch = function requestWithFetch(options, url, payload, callback) {\n  if (options.queryStringParams) {\n    url = addQueryString(url, options.queryStringParams);\n  }\n  var headers = _objectSpread({}, typeof options.customHeaders === 'function' ? options.customHeaders() : options.customHeaders);\n  if (typeof window === 'undefined' && typeof global !== 'undefined' && typeof global.process !== 'undefined' && global.process.versions && global.process.versions.node) {\n    headers['User-Agent'] = \"i18next-http-backend (node/\".concat(global.process.version, \"; \").concat(global.process.platform, \" \").concat(global.process.arch, \")\");\n  }\n  if (payload) headers['Content-Type'] = 'application/json';\n  var reqOptions = typeof options.requestOptions === 'function' ? options.requestOptions(payload) : options.requestOptions;\n  var fetchOptions = _objectSpread({\n    method: payload ? 'POST' : 'GET',\n    body: payload ? options.stringify(payload) : undefined,\n    headers: headers\n  }, omitFetchOptions ? {} : reqOptions);\n  var altFetch = typeof options.alternateFetch === 'function' && options.alternateFetch.length >= 1 ? options.alternateFetch : undefined;\n  try {\n    fetchIt(url, fetchOptions, callback, altFetch);\n  } catch (e) {\n    if (!reqOptions || Object.keys(reqOptions).length === 0 || !e.message || e.message.indexOf('not implemented') < 0) {\n      return callback(e);\n    }\n    try {\n      Object.keys(reqOptions).forEach(function (opt) {\n        delete fetchOptions[opt];\n      });\n      fetchIt(url, fetchOptions, callback, altFetch);\n      omitFetchOptions = true;\n    } catch (err) {\n      callback(err);\n    }\n  }\n};\nvar requestWithXmlHttpRequest = function requestWithXmlHttpRequest(options, url, payload, callback) {\n  if (payload && _typeof(payload) === 'object') {\n    payload = addQueryString('', payload).slice(1);\n  }\n  if (options.queryStringParams) {\n    url = addQueryString(url, options.queryStringParams);\n  }\n  try {\n    var x = XmlHttpRequestApi ? new XmlHttpRequestApi() : new ActiveXObjectApi('MSXML2.XMLHTTP.3.0');\n    x.open(payload ? 'POST' : 'GET', url, 1);\n    if (!options.crossDomain) {\n      x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    }\n    x.withCredentials = !!options.withCredentials;\n    if (payload) {\n      x.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    }\n    if (x.overrideMimeType) {\n      x.overrideMimeType('application/json');\n    }\n    var h = options.customHeaders;\n    h = typeof h === 'function' ? h() : h;\n    if (h) {\n      for (var i in h) {\n        x.setRequestHeader(i, h[i]);\n      }\n    }\n    x.onreadystatechange = function () {\n      x.readyState > 3 && callback(x.status >= 400 ? x.statusText : null, {\n        status: x.status,\n        data: x.responseText\n      });\n    };\n    x.send(payload);\n  } catch (e) {\n    console && console.log(e);\n  }\n};\nvar request = function request(options, url, payload, callback) {\n  if (typeof payload === 'function') {\n    callback = payload;\n    payload = undefined;\n  }\n  callback = callback || function () {};\n  if (fetchApi && url.indexOf('file:') !== 0) {\n    return requestWithFetch(options, url, payload, callback);\n  }\n  if (hasXMLHttpRequest() || typeof ActiveXObject === 'function') {\n    return requestWithXmlHttpRequest(options, url, payload, callback);\n  }\n  callback(new Error('No fetch and no xhr implementation found!'));\n};\nexport default request;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport { makePromise } from './utils.js';\nimport request from './request.js';\nvar getDefaults = function getDefaults() {\n  return {\n    loadPath: '/locales/{{lng}}/{{ns}}.json',\n    addPath: '/locales/add/{{lng}}/{{ns}}',\n    parse: function parse(data) {\n      return JSON.parse(data);\n    },\n    stringify: JSON.stringify,\n    parsePayload: function parsePayload(namespace, key, fallbackValue) {\n      return _defineProperty({}, key, fallbackValue || '');\n    },\n    parseLoadPayload: function parseLoadPayload(languages, namespaces) {\n      return undefined;\n    },\n    request: request,\n    reloadInterval: typeof window !== 'undefined' ? false : 60 * 60 * 1000,\n    customHeaders: {},\n    queryStringParams: {},\n    crossDomain: false,\n    withCredentials: false,\n    overrideMimeType: false,\n    requestOptions: {\n      mode: 'cors',\n      credentials: 'same-origin',\n      cache: 'default'\n    }\n  };\n};\nvar Backend = function () {\n  function Backend(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var allOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    _classCallCheck(this, Backend);\n    this.services = services;\n    this.options = options;\n    this.allOptions = allOptions;\n    this.type = 'backend';\n    this.init(services, options, allOptions);\n  }\n  return _createClass(Backend, [{\n    key: \"init\",\n    value: function init(services) {\n      var _this = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var allOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      this.services = services;\n      this.options = _objectSpread(_objectSpread(_objectSpread({}, getDefaults()), this.options || {}), options);\n      this.allOptions = allOptions;\n      if (this.services && this.options.reloadInterval) {\n        var timer = setInterval(function () {\n          return _this.reload();\n        }, this.options.reloadInterval);\n        if (_typeof(timer) === 'object' && typeof timer.unref === 'function') timer.unref();\n      }\n    }\n  }, {\n    key: \"readMulti\",\n    value: function readMulti(languages, namespaces, callback) {\n      this._readAny(languages, languages, namespaces, namespaces, callback);\n    }\n  }, {\n    key: \"read\",\n    value: function read(language, namespace, callback) {\n      this._readAny([language], language, [namespace], namespace, callback);\n    }\n  }, {\n    key: \"_readAny\",\n    value: function _readAny(languages, loadUrlLanguages, namespaces, loadUrlNamespaces, callback) {\n      var _this2 = this;\n      var loadPath = this.options.loadPath;\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath(languages, namespaces);\n      }\n      loadPath = makePromise(loadPath);\n      loadPath.then(function (resolvedLoadPath) {\n        if (!resolvedLoadPath) return callback(null, {});\n        var url = _this2.services.interpolator.interpolate(resolvedLoadPath, {\n          lng: languages.join('+'),\n          ns: namespaces.join('+')\n        });\n        _this2.loadUrl(url, callback, loadUrlLanguages, loadUrlNamespaces);\n      });\n    }\n  }, {\n    key: \"loadUrl\",\n    value: function loadUrl(url, callback, languages, namespaces) {\n      var _this3 = this;\n      var lng = typeof languages === 'string' ? [languages] : languages;\n      var ns = typeof namespaces === 'string' ? [namespaces] : namespaces;\n      var payload = this.options.parseLoadPayload(lng, ns);\n      this.options.request(this.options, url, payload, function (err, res) {\n        if (res && (res.status >= 500 && res.status < 600 || !res.status)) return callback('failed loading ' + url + '; status code: ' + res.status, true);\n        if (res && res.status >= 400 && res.status < 500) return callback('failed loading ' + url + '; status code: ' + res.status, false);\n        if (!res && err && err.message) {\n          var errorMessage = err.message.toLowerCase();\n          var isNetworkError = ['failed', 'fetch', 'network', 'load'].find(function (term) {\n            return errorMessage.indexOf(term) > -1;\n          });\n          if (isNetworkError) {\n            return callback('failed loading ' + url + ': ' + err.message, true);\n          }\n        }\n        if (err) return callback(err, false);\n        var ret, parseErr;\n        try {\n          if (typeof res.data === 'string') {\n            ret = _this3.options.parse(res.data, languages, namespaces);\n          } else {\n            ret = res.data;\n          }\n        } catch (e) {\n          parseErr = 'failed parsing ' + url + ' to json';\n        }\n        if (parseErr) return callback(parseErr, false);\n        callback(null, ret);\n      });\n    }\n  }, {\n    key: \"create\",\n    value: function create(languages, namespace, key, fallbackValue, callback) {\n      var _this4 = this;\n      if (!this.options.addPath) return;\n      if (typeof languages === 'string') languages = [languages];\n      var payload = this.options.parsePayload(namespace, key, fallbackValue);\n      var finished = 0;\n      var dataArray = [];\n      var resArray = [];\n      languages.forEach(function (lng) {\n        var addPath = _this4.options.addPath;\n        if (typeof _this4.options.addPath === 'function') {\n          addPath = _this4.options.addPath(lng, namespace);\n        }\n        var url = _this4.services.interpolator.interpolate(addPath, {\n          lng: lng,\n          ns: namespace\n        });\n        _this4.options.request(_this4.options, url, payload, function (data, res) {\n          finished += 1;\n          dataArray.push(data);\n          resArray.push(res);\n          if (finished === languages.length) {\n            if (typeof callback === 'function') callback(dataArray, resArray);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"reload\",\n    value: function reload() {\n      var _this5 = this;\n      var _this$services = this.services,\n        backendConnector = _this$services.backendConnector,\n        languageUtils = _this$services.languageUtils,\n        logger = _this$services.logger;\n      var currentLanguage = backendConnector.language;\n      if (currentLanguage && currentLanguage.toLowerCase() === 'cimode') return;\n      var toLoad = [];\n      var append = function append(lng) {\n        var lngs = languageUtils.toResolveHierarchy(lng);\n        lngs.forEach(function (l) {\n          if (toLoad.indexOf(l) < 0) toLoad.push(l);\n        });\n      };\n      append(currentLanguage);\n      if (this.allOptions.preload) this.allOptions.preload.forEach(function (l) {\n        return append(l);\n      });\n      toLoad.forEach(function (lng) {\n        _this5.allOptions.ns.forEach(function (ns) {\n          backendConnector.read(lng, ns, 'read', null, null, function (err, data) {\n            if (err) logger.warn(\"loading namespace \".concat(ns, \" for language \").concat(lng, \" failed\"), err);\n            if (!err && data) logger.log(\"loaded namespace \".concat(ns, \" for language \").concat(lng), data);\n            backendConnector.loaded(\"\".concat(lng, \"|\").concat(ns), err, data);\n          });\n        });\n      });\n    }\n  }]);\n}();\nBackend.type = 'backend';\nexport default Backend;","const {\n  slice,\n  forEach\n} = [];\nfunction defaults(obj) {\n  forEach.call(slice.call(arguments, 1), source => {\n    if (source) {\n      for (const prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\nfunction hasXSS(input) {\n  if (typeof input !== 'string') return false;\n\n  // Common XSS attack patterns\n  const xssPatterns = [/<\\s*script.*?>/i, /<\\s*\\/\\s*script\\s*>/i, /<\\s*img.*?on\\w+\\s*=/i, /<\\s*\\w+\\s*on\\w+\\s*=.*?>/i, /javascript\\s*:/i, /vbscript\\s*:/i, /expression\\s*\\(/i, /eval\\s*\\(/i, /alert\\s*\\(/i, /document\\.cookie/i, /document\\.write\\s*\\(/i, /window\\.location/i, /innerHTML/i];\n  return xssPatterns.some(pattern => pattern.test(input));\n}\n\n// eslint-disable-next-line no-control-regex\nconst fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\nconst serializeCookie = function (name, val) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    path: '/'\n  };\n  const opt = options;\n  const value = encodeURIComponent(val);\n  let str = `${name}=${value}`;\n  if (opt.maxAge > 0) {\n    const maxAge = opt.maxAge - 0;\n    if (Number.isNaN(maxAge)) throw new Error('maxAge should be a Number');\n    str += `; Max-Age=${Math.floor(maxAge)}`;\n  }\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError('option domain is invalid');\n    }\n    str += `; Domain=${opt.domain}`;\n  }\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError('option path is invalid');\n    }\n    str += `; Path=${opt.path}`;\n  }\n  if (opt.expires) {\n    if (typeof opt.expires.toUTCString !== 'function') {\n      throw new TypeError('option expires is invalid');\n    }\n    str += `; Expires=${opt.expires.toUTCString()}`;\n  }\n  if (opt.httpOnly) str += '; HttpOnly';\n  if (opt.secure) str += '; Secure';\n  if (opt.sameSite) {\n    const sameSite = typeof opt.sameSite === 'string' ? opt.sameSite.toLowerCase() : opt.sameSite;\n    switch (sameSite) {\n      case true:\n        str += '; SameSite=Strict';\n        break;\n      case 'lax':\n        str += '; SameSite=Lax';\n        break;\n      case 'strict':\n        str += '; SameSite=Strict';\n        break;\n      case 'none':\n        str += '; SameSite=None';\n        break;\n      default:\n        throw new TypeError('option sameSite is invalid');\n    }\n  }\n  if (opt.partitioned) str += '; Partitioned';\n  return str;\n};\nconst cookie = {\n  create(name, value, minutes, domain) {\n    let cookieOptions = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n      path: '/',\n      sameSite: 'strict'\n    };\n    if (minutes) {\n      cookieOptions.expires = new Date();\n      cookieOptions.expires.setTime(cookieOptions.expires.getTime() + minutes * 60 * 1000);\n    }\n    if (domain) cookieOptions.domain = domain;\n    document.cookie = serializeCookie(name, value, cookieOptions);\n  },\n  read(name) {\n    const nameEQ = `${name}=`;\n    const ca = document.cookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n      let c = ca[i];\n      while (c.charAt(0) === ' ') c = c.substring(1, c.length);\n      if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\n    }\n    return null;\n  },\n  remove(name, domain) {\n    this.create(name, '', -1, domain);\n  }\n};\nvar cookie$1 = {\n  name: 'cookie',\n  // Deconstruct the options object and extract the lookupCookie property\n  lookup(_ref) {\n    let {\n      lookupCookie\n    } = _ref;\n    if (lookupCookie && typeof document !== 'undefined') {\n      return cookie.read(lookupCookie) || undefined;\n    }\n    return undefined;\n  },\n  // Deconstruct the options object and extract the lookupCookie, cookieMinutes, cookieDomain, and cookieOptions properties\n  cacheUserLanguage(lng, _ref2) {\n    let {\n      lookupCookie,\n      cookieMinutes,\n      cookieDomain,\n      cookieOptions\n    } = _ref2;\n    if (lookupCookie && typeof document !== 'undefined') {\n      cookie.create(lookupCookie, lng, cookieMinutes, cookieDomain, cookieOptions);\n    }\n  }\n};\n\nvar querystring = {\n  name: 'querystring',\n  // Deconstruct the options object and extract the lookupQuerystring property\n  lookup(_ref) {\n    let {\n      lookupQuerystring\n    } = _ref;\n    let found;\n    if (typeof window !== 'undefined') {\n      let {\n        search\n      } = window.location;\n      if (!window.location.search && window.location.hash?.indexOf('?') > -1) {\n        search = window.location.hash.substring(window.location.hash.indexOf('?'));\n      }\n      const query = search.substring(1);\n      const params = query.split('&');\n      for (let i = 0; i < params.length; i++) {\n        const pos = params[i].indexOf('=');\n        if (pos > 0) {\n          const key = params[i].substring(0, pos);\n          if (key === lookupQuerystring) {\n            found = params[i].substring(pos + 1);\n          }\n        }\n      }\n    }\n    return found;\n  }\n};\n\nvar hash = {\n  name: 'hash',\n  // Deconstruct the options object and extract the lookupHash property and the lookupFromHashIndex property\n  lookup(_ref) {\n    let {\n      lookupHash,\n      lookupFromHashIndex\n    } = _ref;\n    let found;\n    if (typeof window !== 'undefined') {\n      const {\n        hash\n      } = window.location;\n      if (hash && hash.length > 2) {\n        const query = hash.substring(1);\n        if (lookupHash) {\n          const params = query.split('&');\n          for (let i = 0; i < params.length; i++) {\n            const pos = params[i].indexOf('=');\n            if (pos > 0) {\n              const key = params[i].substring(0, pos);\n              if (key === lookupHash) {\n                found = params[i].substring(pos + 1);\n              }\n            }\n          }\n        }\n        if (found) return found;\n        if (!found && lookupFromHashIndex > -1) {\n          const language = hash.match(/\\/([a-zA-Z-]*)/g);\n          if (!Array.isArray(language)) return undefined;\n          const index = typeof lookupFromHashIndex === 'number' ? lookupFromHashIndex : 0;\n          return language[index]?.replace('/', '');\n        }\n      }\n    }\n    return found;\n  }\n};\n\nlet hasLocalStorageSupport = null;\nconst localStorageAvailable = () => {\n  if (hasLocalStorageSupport !== null) return hasLocalStorageSupport;\n  try {\n    hasLocalStorageSupport = typeof window !== 'undefined' && window.localStorage !== null;\n    if (!hasLocalStorageSupport) {\n      return false;\n    }\n    const testKey = 'i18next.translate.boo';\n    window.localStorage.setItem(testKey, 'foo');\n    window.localStorage.removeItem(testKey);\n  } catch (e) {\n    hasLocalStorageSupport = false;\n  }\n  return hasLocalStorageSupport;\n};\nvar localStorage = {\n  name: 'localStorage',\n  // Deconstruct the options object and extract the lookupLocalStorage property\n  lookup(_ref) {\n    let {\n      lookupLocalStorage\n    } = _ref;\n    if (lookupLocalStorage && localStorageAvailable()) {\n      return window.localStorage.getItem(lookupLocalStorage) || undefined; // Undefined ensures type consistency with the previous version of this function\n    }\n    return undefined;\n  },\n  // Deconstruct the options object and extract the lookupLocalStorage property\n  cacheUserLanguage(lng, _ref2) {\n    let {\n      lookupLocalStorage\n    } = _ref2;\n    if (lookupLocalStorage && localStorageAvailable()) {\n      window.localStorage.setItem(lookupLocalStorage, lng);\n    }\n  }\n};\n\nlet hasSessionStorageSupport = null;\nconst sessionStorageAvailable = () => {\n  if (hasSessionStorageSupport !== null) return hasSessionStorageSupport;\n  try {\n    hasSessionStorageSupport = typeof window !== 'undefined' && window.sessionStorage !== null;\n    if (!hasSessionStorageSupport) {\n      return false;\n    }\n    const testKey = 'i18next.translate.boo';\n    window.sessionStorage.setItem(testKey, 'foo');\n    window.sessionStorage.removeItem(testKey);\n  } catch (e) {\n    hasSessionStorageSupport = false;\n  }\n  return hasSessionStorageSupport;\n};\nvar sessionStorage = {\n  name: 'sessionStorage',\n  lookup(_ref) {\n    let {\n      lookupSessionStorage\n    } = _ref;\n    if (lookupSessionStorage && sessionStorageAvailable()) {\n      return window.sessionStorage.getItem(lookupSessionStorage) || undefined;\n    }\n    return undefined;\n  },\n  cacheUserLanguage(lng, _ref2) {\n    let {\n      lookupSessionStorage\n    } = _ref2;\n    if (lookupSessionStorage && sessionStorageAvailable()) {\n      window.sessionStorage.setItem(lookupSessionStorage, lng);\n    }\n  }\n};\n\nvar navigator$1 = {\n  name: 'navigator',\n  lookup(options) {\n    const found = [];\n    if (typeof navigator !== 'undefined') {\n      const {\n        languages,\n        userLanguage,\n        language\n      } = navigator;\n      if (languages) {\n        // chrome only; not an array, so can't use .push.apply instead of iterating\n        for (let i = 0; i < languages.length; i++) {\n          found.push(languages[i]);\n        }\n      }\n      if (userLanguage) {\n        found.push(userLanguage);\n      }\n      if (language) {\n        found.push(language);\n      }\n    }\n    return found.length > 0 ? found : undefined;\n  }\n};\n\nvar htmlTag = {\n  name: 'htmlTag',\n  // Deconstruct the options object and extract the htmlTag property\n  lookup(_ref) {\n    let {\n      htmlTag\n    } = _ref;\n    let found;\n    const internalHtmlTag = htmlTag || (typeof document !== 'undefined' ? document.documentElement : null);\n    if (internalHtmlTag && typeof internalHtmlTag.getAttribute === 'function') {\n      found = internalHtmlTag.getAttribute('lang');\n    }\n    return found;\n  }\n};\n\nvar path = {\n  name: 'path',\n  // Deconstruct the options object and extract the lookupFromPathIndex property\n  lookup(_ref) {\n    let {\n      lookupFromPathIndex\n    } = _ref;\n    if (typeof window === 'undefined') return undefined;\n    const language = window.location.pathname.match(/\\/([a-zA-Z-]*)/g);\n    if (!Array.isArray(language)) return undefined;\n    const index = typeof lookupFromPathIndex === 'number' ? lookupFromPathIndex : 0;\n    return language[index]?.replace('/', '');\n  }\n};\n\nvar subdomain = {\n  name: 'subdomain',\n  lookup(_ref) {\n    let {\n      lookupFromSubdomainIndex\n    } = _ref;\n    // If given get the subdomain index else 1\n    const internalLookupFromSubdomainIndex = typeof lookupFromSubdomainIndex === 'number' ? lookupFromSubdomainIndex + 1 : 1;\n    // get all matches if window.location. is existing\n    // first item of match is the match itself and the second is the first group match which should be the first subdomain match\n    // is the hostname no public domain get the or option of localhost\n    const language = typeof window !== 'undefined' && window.location?.hostname?.match(/^(\\w{2,5})\\.(([a-z0-9-]{1,63}\\.[a-z]{2,6})|localhost)/i);\n\n    // if there is no match (null) return undefined\n    if (!language) return undefined;\n    // return the given group match\n    return language[internalLookupFromSubdomainIndex];\n  }\n};\n\n// some environments, throws when accessing document.cookie\nlet canCookies = false;\ntry {\n  // eslint-disable-next-line no-unused-expressions\n  document.cookie;\n  canCookies = true;\n  // eslint-disable-next-line no-empty\n} catch (e) {}\nconst order = ['querystring', 'cookie', 'localStorage', 'sessionStorage', 'navigator', 'htmlTag'];\nif (!canCookies) order.splice(1, 1);\nconst getDefaults = () => ({\n  order,\n  lookupQuerystring: 'lng',\n  lookupCookie: 'i18next',\n  lookupLocalStorage: 'i18nextLng',\n  lookupSessionStorage: 'i18nextLng',\n  // cache user language\n  caches: ['localStorage'],\n  excludeCacheFor: ['cimode'],\n  // cookieMinutes: 10,\n  // cookieDomain: 'myDomain'\n\n  convertDetectedLanguage: l => l\n});\nclass Browser {\n  constructor(services) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.type = 'languageDetector';\n    this.detectors = {};\n    this.init(services, options);\n  }\n  init() {\n    let services = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      languageUtils: {}\n    };\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let i18nOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    this.services = services;\n    this.options = defaults(options, this.options || {}, getDefaults());\n    if (typeof this.options.convertDetectedLanguage === 'string' && this.options.convertDetectedLanguage.indexOf('15897') > -1) {\n      this.options.convertDetectedLanguage = l => l.replace('-', '_');\n    }\n\n    // backwards compatibility\n    if (this.options.lookupFromUrlIndex) this.options.lookupFromPathIndex = this.options.lookupFromUrlIndex;\n    this.i18nOptions = i18nOptions;\n    this.addDetector(cookie$1);\n    this.addDetector(querystring);\n    this.addDetector(localStorage);\n    this.addDetector(sessionStorage);\n    this.addDetector(navigator$1);\n    this.addDetector(htmlTag);\n    this.addDetector(path);\n    this.addDetector(subdomain);\n    this.addDetector(hash);\n  }\n  addDetector(detector) {\n    this.detectors[detector.name] = detector;\n    return this;\n  }\n  detect() {\n    let detectionOrder = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.order;\n    let detected = [];\n    detectionOrder.forEach(detectorName => {\n      if (this.detectors[detectorName]) {\n        let lookup = this.detectors[detectorName].lookup(this.options);\n        if (lookup && typeof lookup === 'string') lookup = [lookup];\n        if (lookup) detected = detected.concat(lookup);\n      }\n    });\n    detected = detected.filter(d => d !== undefined && d !== null && !hasXSS(d)).map(d => this.options.convertDetectedLanguage(d));\n    if (this.services && this.services.languageUtils && this.services.languageUtils.getBestMatchFromCodes) return detected; // new i18next v19.5.0\n    return detected.length > 0 ? detected[0] : null; // a little backward compatibility\n  }\n  cacheUserLanguage(lng) {\n    let caches = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.options.caches;\n    if (!caches) return;\n    if (this.options.excludeCacheFor && this.options.excludeCacheFor.indexOf(lng) > -1) return;\n    caches.forEach(cacheName => {\n      if (this.detectors[cacheName]) this.detectors[cacheName].cacheUserLanguage(lng, this.options);\n    });\n  }\n}\nBrowser.type = 'languageDetector';\n\nexport { Browser as default };\n","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport Backend from 'i18next-http-backend';\nimport LanguageDetector from 'i18next-browser-languagedetector';\n\ntype LanguageCode = 'zh-CN' | 'zh-TW' | 'zh-HK' | 'en-US' | 'en-GB' | 'ja-JP' | 'ko-KR';\ntype LanguageMap = Record<LanguageCode, string>;\n\nconst languageMapping: LanguageMap = {\n  'zh-CN': 'zh',\n  'zh-TW': 'zh',\n  'zh-HK': 'zh',\n  'en-US': 'en',\n  'en-GB': 'en',\n  'ja-JP': 'ja',\n  'ko-KR': 'ko'\n};\n\ni18n\n  .use(Backend)\n  .use(LanguageDetector)\n  .use(initReactI18next)\n  .init({\n    fallbackLng: 'en',\n    ns: [\n      'main',          // Main page translations\n      'writing',       // Writing screen translations\n      'report',        // Report writer section\n      'helper',        // Writing helper section\n      'anime',         // Anime character helper\n      'image',         // AI image generation\n      'billing',       // Charge page\n      'download',      // Download page\n      'common'         // Shared translations\n    ],\n    defaultNS: 'main',\n    backend: {\n      loadPath: '/locales/{{lng}}/{{ns}}.json',\n    },\n    detection: {\n      order: ['querystring', 'cookie', 'localStorage', 'navigator'],\n      caches: ['cookie', 'localStorage'],\n      cookieMinutes: 60 * 24 * 30, // 30 days\n      lookupQuerystring: 'lng',\n      lookupCookie: 'i18next',\n      lookupLocalStorage: 'i18nextLng'\n    },\n    interpolation: {\n      escapeValue: false,\n    },\n    react: {\n      useSuspense: true,\n    }\n  } as const);\n\nexport default i18n; ","import React, { createContext, useContext, useEffect, useState } from 'react';\nimport i18n from '../i18n';\n\ntype Language = 'en' | 'ja' | 'zh' | 'ko';\n\ninterface LanguageContextType {\n  language: Language;\n  setLanguage: (lang: Language) => void;\n}\n\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\n\nexport const useLanguage = () => {\n  const context = useContext(LanguageContext);\n  if (!context) {\n    throw new Error('useLanguage must be used within a LanguageProvider');\n  }\n  return context;\n};\n\nexport const LanguageProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [language, setLanguageState] = useState<Language>(() => {\n    // Get initial language from localStorage or default to 'en'\n    const savedLang = localStorage.getItem('language') as Language;\n    return savedLang || 'en';\n  });\n\n  const setLanguage = (lang: Language) => {\n    setLanguageState(lang);\n    localStorage.setItem('language', lang);\n    i18n.changeLanguage(lang);\n  };\n\n  // Initialize language on mount\n  useEffect(() => {\n    const savedLang = localStorage.getItem('language') as Language;\n    if (savedLang) {\n      i18n.changeLanguage(savedLang);\n    }\n  }, []);\n\n  return (\n    <LanguageContext.Provider value={{ language, setLanguage }}>\n      {children}\n    </LanguageContext.Provider>\n  );\n}; ","interface ModeConfig {\n  id: string;\n  name: string;\n  version: string;\n  size: number; // in bytes\n  dependencies: string[];\n  cacheKeys: string[];\n  assets: string[];\n}\n\ninterface UsageStats {\n  count: number;\n  lastUsed: Date;\n  totalTime: number;\n}\n\ninterface InstallationProgress {\n  progress: number;\n  status: 'downloading' | 'installing' | 'complete' | 'error';\n  message: string;\n}\n\nclass ModeManager {\n  private readonly STORAGE_KEY = 'yumi-installed-modes';\n  private readonly USAGE_STATS_KEY = 'yumi-usage-stats';\n  private readonly CACHE_PREFIX = 'yumi-mode-';\n  \n  private modeConfigs: Record<string, ModeConfig> = {\n    'writing-helper': {\n      id: 'writing-helper',\n      name: 'Writing Helper',\n      version: '1.0.0',\n      size: 1800000, // 1.8 MB\n      dependencies: ['react-markdown', 'emoji-mart'],\n      cacheKeys: ['writing-templates', 'character-styles', 'genre-templates'],\n      assets: ['writing-templates.json', 'character-personas.json', 'genre-styles.json']\n    },\n    'anime-chara-helper': {\n      id: 'anime-chara-helper',\n      name: 'Anime Character Designer',\n      version: '1.0.0',\n      size: 3200000, // 3.2 MB\n      dependencies: ['fabric', 'color-picker'],\n      cacheKeys: ['anime-assets', 'character-presets'],\n      assets: ['anime-parts.json', 'character-templates.json', 'anime-backgrounds.png']\n    }\n  };\n\n  // Core modes that cannot be uninstalled\n  private readonly coreModes = ['writing-helper', 'anime-chara-helper']\n\n  /**\n   * Get list of currently installed modes\n   */\n  async getInstalledModes(): Promise<string[]> {\n    try {\n      const stored = localStorage.getItem(this.STORAGE_KEY);\n      if (stored) {\n        return JSON.parse(stored);\n      }\n      \n      // Default installation: only core modes\n      const defaultModes = this.coreModes;\n      await this.setInstalledModes(defaultModes);\n      return defaultModes;\n    } catch (error) {\n      console.error('Error getting installed modes:', error);\n      return this.coreModes;\n    }\n  }\n\n  /**\n   * Set installed modes list\n   */\n  private async setInstalledModes(modes: string[]): Promise<void> {\n    // Always ensure core modes are included\n    const modesWithCore = [...new Set([...this.coreModes, ...modes])];\n    localStorage.setItem(this.STORAGE_KEY, JSON.stringify(modesWithCore));\n  }\n\n  /**\n   * Check if a specific mode is installed\n   */\n  async isModeInstalled(modeId: string): Promise<boolean> {\n    const installedModes = await this.getInstalledModes();\n    return installedModes.includes(modeId);\n  }\n\n  /**\n   * Install a mode\n   */\n  async installMode(modeId: string, onProgress?: (progress: InstallationProgress) => void): Promise<void> {\n    const config = this.modeConfigs[modeId];\n    if (!config) {\n      throw new Error(`Mode ${modeId} not found`);\n    }\n\n    const installedModes = await this.getInstalledModes();\n    if (installedModes.includes(modeId)) {\n      throw new Error(`Mode ${modeId} is already installed`);\n    }\n\n    try {\n      // Step 1: Download dependencies\n      onProgress?.({\n        progress: 10,\n        status: 'downloading',\n        message: 'Downloading dependencies...'\n      });\n\n      await this.downloadDependencies(config.dependencies);\n\n      // Step 2: Cache assets\n      onProgress?.({\n        progress: 50,\n        status: 'installing',\n        message: 'Caching assets...'\n      });\n\n      await this.cacheAssets(modeId, config.assets);\n\n      // Step 3: Initialize cache\n      onProgress?.({\n        progress: 80,\n        status: 'installing',\n        message: 'Initializing cache...'\n      });\n\n      await this.initializeModeCache(modeId, config.cacheKeys);\n\n      // Step 4: Update installed modes\n      onProgress?.({\n        progress: 100,\n        status: 'complete',\n        message: 'Installation complete!'\n      });\n\n      const updatedModes = [...installedModes, modeId];\n      await this.setInstalledModes(updatedModes);\n\n      // Initialize usage stats\n      await this.initializeUsageStats(modeId);\n\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n      onProgress?.({\n        progress: 0,\n        status: 'error',\n        message: `Installation failed: ${errorMessage}`\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Uninstall a mode\n   */\n  async uninstallMode(modeId: string): Promise<void> {\n    // Prevent uninstalling core modes\n    if (this.coreModes.includes(modeId)) {\n      throw new Error(`Cannot uninstall core mode: ${modeId}`);\n    }\n\n    const installedModes = await this.getInstalledModes();\n    if (!installedModes.includes(modeId)) {\n      throw new Error(`Mode ${modeId} is not installed`);\n    }\n\n    const config = this.modeConfigs[modeId];\n    if (!config) {\n      throw new Error(`Mode ${modeId} not found`);\n    }\n\n    try {\n      // Clear mode cache\n      await this.clearModeCache(modeId, config.cacheKeys);\n      \n      // Clear cached assets\n      await this.clearCachedAssets(modeId);\n      \n      // Remove from installed modes\n      const updatedModes = installedModes.filter(id => id !== modeId);\n      await this.setInstalledModes(updatedModes);\n      \n      // Clear service worker cache for this mode\n      await this.clearServiceWorkerCache(modeId);\n      \n    } catch (error) {\n      console.error(`Error uninstalling mode ${modeId}:`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get usage statistics for all modes\n   */\n  async getUsageStats(): Promise<Record<string, UsageStats>> {\n    try {\n      const stored = localStorage.getItem(this.USAGE_STATS_KEY);\n      return stored ? JSON.parse(stored) : {};\n    } catch (error) {\n      console.error('Error getting usage stats:', error);\n      return {};\n    }\n  }\n\n  /**\n   * Log mode usage\n   */\n  async logModeUsage(modeId: string, sessionTime: number = 0): Promise<void> {\n    try {\n      const stats = await this.getUsageStats();\n      const currentStats = stats[modeId] || { count: 0, lastUsed: new Date(), totalTime: 0 };\n      \n      stats[modeId] = {\n        count: currentStats.count + 1,\n        lastUsed: new Date(),\n        totalTime: currentStats.totalTime + sessionTime\n      };\n      \n      localStorage.setItem(this.USAGE_STATS_KEY, JSON.stringify(stats));\n    } catch (error) {\n      console.error('Error logging mode usage:', error);\n    }\n  }\n\n  /**\n   * Get estimated storage usage for all modes\n   */\n  async getStorageUsage(): Promise<Record<string, number>> {\n    const installedModes = await this.getInstalledModes();\n    const usage: Record<string, number> = {};\n    \n    for (const modeId of installedModes) {\n      const config = this.modeConfigs[modeId];\n      if (config) {\n        usage[modeId] = config.size;\n      }\n    }\n    \n    return usage;\n  }\n\n  /**\n   * Clear all app data (reset)\n   */\n  async clearAllData(): Promise<void> {\n    try {\n      // Clear localStorage\n      const keysToRemove = [this.STORAGE_KEY, this.USAGE_STATS_KEY];\n      keysToRemove.forEach(key => localStorage.removeItem(key));\n      \n      // Clear IndexedDB\n      await this.clearIndexedDB();\n      \n      // Clear service worker cache\n      await this.clearAllServiceWorkerCache();\n      \n      // Reset to core modes only\n      await this.setInstalledModes(this.coreModes);\n      \n    } catch (error) {\n      console.error('Error clearing all data:', error);\n      throw error;\n    }\n  }\n\n  // Private helper methods\n\n  private async downloadDependencies(dependencies: string[]): Promise<void> {\n    // In a real implementation, this would dynamically import or fetch dependencies\n    // For now, we'll simulate the download\n    await this.simulateAsyncOperation(1000);\n  }\n\n  private async cacheAssets(modeId: string, assets: string[]): Promise<void> {\n    // Cache static assets in IndexedDB or localStorage\n    for (const asset of assets) {\n      const cacheKey = `${this.CACHE_PREFIX}${modeId}-${asset}`;\n      // In production, you would fetch and cache the actual asset\n      localStorage.setItem(cacheKey, JSON.stringify({ cached: Date.now(), asset }));\n    }\n  }\n\n  private async clearCachedAssets(modeId: string): Promise<void> {\n    const keys = Object.keys(localStorage);\n    const modeKeys = keys.filter(key => key.startsWith(`${this.CACHE_PREFIX}${modeId}`));\n    modeKeys.forEach(key => localStorage.removeItem(key));\n  }\n\n  private async initializeModeCache(modeId: string, cacheKeys: string[]): Promise<void> {\n    // Initialize mode-specific cache entries\n    for (const cacheKey of cacheKeys) {\n      const fullKey = `${modeId}-${cacheKey}`;\n      if (!localStorage.getItem(fullKey)) {\n        localStorage.setItem(fullKey, JSON.stringify({ initialized: Date.now() }));\n      }\n    }\n  }\n\n  private async clearModeCache(modeId: string, cacheKeys: string[]): Promise<void> {\n    for (const cacheKey of cacheKeys) {\n      const fullKey = `${modeId}-${cacheKey}`;\n      localStorage.removeItem(fullKey);\n    }\n  }\n\n  private async initializeUsageStats(modeId: string): Promise<void> {\n    const stats = await this.getUsageStats();\n    if (!stats[modeId]) {\n      stats[modeId] = {\n        count: 0,\n        lastUsed: new Date(),\n        totalTime: 0\n      };\n      localStorage.setItem(this.USAGE_STATS_KEY, JSON.stringify(stats));\n    }\n  }\n\n  private async clearServiceWorkerCache(modeId: string): Promise<void> {\n    if ('serviceWorker' in navigator && 'caches' in window) {\n      try {\n        const cacheNames = await caches.keys();\n        const modeCacheNames = cacheNames.filter(name => name.includes(modeId));\n        \n        await Promise.all(\n          modeCacheNames.map(cacheName => caches.delete(cacheName))\n        );\n      } catch (error) {\n        console.error('Error clearing service worker cache:', error);\n      }\n    }\n  }\n\n  private async clearAllServiceWorkerCache(): Promise<void> {\n    if ('serviceWorker' in navigator && 'caches' in window) {\n      try {\n        const cacheNames = await caches.keys();\n        await Promise.all(\n          cacheNames.map(cacheName => caches.delete(cacheName))\n        );\n      } catch (error) {\n        console.error('Error clearing all service worker cache:', error);\n      }\n    }\n  }\n\n  private async clearIndexedDB(): Promise<void> {\n    // Clear IndexedDB databases related to the app\n    if ('indexedDB' in window) {\n      try {\n        // List of potential IndexedDB names used by the app\n        const dbNames = ['yumi-series-cache', 'yumi-assets', 'yumi-data'];\n        \n        for (const dbName of dbNames) {\n          const deleteReq = indexedDB.deleteDatabase(dbName);\n          await new Promise((resolve, reject) => {\n            deleteReq.onsuccess = () => resolve(undefined);\n            deleteReq.onerror = () => reject(deleteReq.error);\n          });\n        }\n      } catch (error) {\n        console.error('Error clearing IndexedDB:', error);\n      }\n    }\n  }\n\n  private async simulateAsyncOperation(delay: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, delay));\n  }\n}\n\n// Export singleton instance\nexport const modeManager = new ModeManager(); ","import { lazy, ComponentType } from 'react';\nimport { modeManager } from './modeManager';\n\ntype LazyComponentModule = {\n  default: ComponentType<any>;\n};\n\ntype LazyComponentImport = () => Promise<LazyComponentModule>;\n\nconst loadComponent = (key: string) => {\n  switch (key) {\n    case 'writing-helper':\n      return lazy(() => import('../writing-helper/WritingHelperApp'));\n    case 'anime-chara':\n      return lazy(() => import('../anime-chara-helper/AnimeCharaHelperApp'));\n    default:\n      throw new Error(`Unknown component: ${key}`);\n  }\n};\n\nconst preloadInstalledComponents = () => {\n  // Preload components that are installed by default\n  const defaultComponents = ['writing-helper', 'anime-chara'];\n  defaultComponents.forEach(key => {\n    try {\n      loadComponent(key);\n    } catch (error) {\n      console.error(`Failed to preload component ${key}:`, error);\n    }\n  });\n};\n\nexport const dynamicLoader = {\n  /**\n   * Load a component dynamically with installation check\n   */\n  loadComponent: async (key: string): Promise<ComponentType<any> | null> => {\n    // Check if mode is installed\n    const isInstalled = await modeManager.isModeInstalled(key);\n    if (!isInstalled) {\n      console.warn(`Mode ${key} is not installed. Cannot load component.`);\n      return null;\n    }\n\n    try {\n      return loadComponent(key);\n    } catch (error) {\n      console.error(`Failed to load component for mode ${key}:`, error);\n      return null;\n    }\n  },\n\n  /**\n   * Preload a component (cache it without rendering)\n   */\n  preloadComponent: async (key: string): Promise<void> => {\n    await dynamicLoader.loadComponent(key);\n  },\n\n  /**\n   * Preload all installed components\n   */\n  preloadInstalledComponents,\n\n  /**\n   * Clear component cache for a specific mode\n   */\n  clearComponentCache: (key: string): void => {\n    // Implementation needed\n  },\n\n  /**\n   * Clear all component cache\n   */\n  clearAllCache: () => {\n    // Implementation needed\n  },\n\n  /**\n   * Get size of component cache\n   */\n  getCacheSize: () => {\n    // Implementation needed\n    return 0; // Placeholder return, actual implementation needed\n  },\n\n  /**\n   * Get cached component without loading\n   */\n  getCachedComponent: (key: string): LazyComponentModule | null => {\n    // Implementation needed\n    return null; // Placeholder return, actual implementation needed\n  }\n}; ","import React, { useState, Suspense, useEffect, lazy } from 'react'\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom'\nimport { CircularProgress } from '@mui/material'\nimport { LanguageProvider } from './contexts/LanguageContext'\nimport { dynamicLoader } from './utils/dynamicLoader'\n\n// Lazy load components\nconst MainPage = lazy(() => import('./MainPage'))\nconst AIAssistant = lazy(() => import('./components/AIAssistant'))\nconst ChargePage = lazy(() => import('./components/ChargePage'))\nconst WritingHelperApp = lazy(() => import('./writing-helper/WritingHelperApp'))\nconst AnimeCharaHelperApp = lazy(() => import('./anime-chara-helper/AnimeCharaHelperApp'))\n\n// Loading component for suspense\nconst LoadingComponent = () => (\n  <div className=\"loading-container\">\n    <div className=\"loading-spinner\"></div>\n    <span>Loading...</span>\n  </div>\n);\n\nconst App: React.FC = () => {\n  const [isAssistantOpen, setAssistantOpen] = useState(false);\n\n  // Preload installed components on app start\n  useEffect(() => {\n    dynamicLoader.preloadInstalledComponents();\n  }, []);\n\n  const handleModeSelect = (mode: string) => {\n    // Handle mode selection\n  };\n\n  const handleBack = () => {\n    // Handle back navigation\n  };\n\n  return (\n    <Suspense fallback={<CircularProgress />}>\n      <LanguageProvider>\n        <Router>\n          <div className=\"app-container\">\n            <Suspense fallback={<LoadingComponent />}>\n              <Routes>\n                <Route path=\"/\" element={<MainPage />} />\n                <Route path=\"/writing\" element={<WritingHelperApp />} />\n                <Route path=\"/writing-helper\" element={<WritingHelperApp />} />\n                <Route path=\"/anime-chara\" element={<AnimeCharaHelperApp onBack={handleBack} />} />\n                <Route path=\"/charge\" element={<ChargePage onClose={() => {}} />} />\n              </Routes>\n            </Suspense>\n\n            {isAssistantOpen && (\n              <div className=\"ai-assistant-container\">\n                <Suspense fallback={<LoadingComponent />}>\n                  <AIAssistant onClose={() => setAssistantOpen(false)} />\n                </Suspense>\n              </div>\n            )}\n          </div>\n        </Router>\n      </LanguageProvider>\n    </Suspense>\n  )\n}\n\nexport default App ","import { Component, ErrorInfo, ReactNode } from 'react'\n\ninterface Props {\n  children: ReactNode\n}\n\ninterface State {\n  hasError: boolean\n  error?: Error\n}\n\nexport class ErrorBoundary extends Component<Props, State> {\n  public state: State = {\n    hasError: false\n  }\n\n  public static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error }\n  }\n\n  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error('ErrorBoundary caught an error:', error, errorInfo)\n  }\n\n  public render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 flex items-center justify-center p-4\">\n          <div className=\"bg-white rounded-xl shadow-xl p-8 max-w-md w-full text-center\">\n            <div className=\"text-6xl mb-4\"></div>\n            <h1 className=\"text-2xl font-bold text-gray-800 mb-4\">Oops! Something went wrong</h1>\n            <p className=\"text-gray-600 mb-6\">\n              The app encountered an error. Don't worry, let's get you back on track!\n            </p>\n            <button\n              onClick={() => {\n                this.setState({ hasError: false, error: undefined })\n                window.location.reload()\n              }}\n              className=\"w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105\"\n            >\n               Reload App\n            </button>\n            <div className=\"mt-4 text-xs text-gray-500\">\n              {this.state.error?.message && (\n                <details className=\"mt-2\">\n                  <summary className=\"cursor-pointer text-purple-600\">Technical Details</summary>\n                  <pre className=\"mt-2 text-left bg-gray-100 p-2 rounded text-xs overflow-auto\">\n                    {this.state.error.message}\n                  </pre>\n                </details>\n              )}\n            </div>\n          </div>\n        </div>\n      )\n    }\n\n    return this.props.children\n  }\n} ","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App'\nimport { ErrorBoundary } from './components/ErrorBoundary'\nimport './index.css'\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <ErrorBoundary>\n      <App />\n    </ErrorBoundary>\n  </React.StrictMode>\n)\n"],"file":"assets/index-WcmAaxBA.js"}