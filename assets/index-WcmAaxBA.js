const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-ponyfill-DdJ7XUlJ.js","assets/vendor-B9lPEkq4.js","assets/WritingHelperApp-d0q-8gVb.js","assets/smartPromptEngine-Dc2xad7S.js","assets/smartPromptEngine-C5edp74q.css","assets/AIAssistant-fp7EeI3B.js","assets/api-DX6zK3xw.js","assets/AIAssistant-C0BfmMU0.css","assets/WritingHelperScreen-BRTwtSlV.js","assets/ArrowBack-D_LrkQ9Z.js","assets/WritingHelperApp-DBs2sUxn.css","assets/AnimeCharaHelperApp-ziGT7p_V.js","assets/useAuth-CLSV77f7.js","assets/AnimeCharaHelperApp-DSMWpZVQ.css","assets/MainPage-BIFGFClo.js","assets/billingApi-BuW6k-_u.js","assets/MainPage-DJxVHDvl.css","assets/ChargePage-DsIV7S1k.js","assets/ChargePage-ZhTmxzUY.css"])))=>i.map(i=>d[i]);
import{h as G,j as x,E as J,c as V,r as se,i as P,a as ce,b as h,B as le,R as ue,d as k,C as de,e as fe}from"./vendor-B9lPEkq4.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var et=x.Fragment,l=function(e,t,n){return G.call(t,"css")?x.jsx(J,V(e,t),n):x.jsx(e,t,n)},C=function(e,t,n){return G.call(t,"css")?x.jsxs(J,V(e,t),n):x.jsxs(e,t,n)},M={},I=se;M.createRoot=I.createRoot,M.hydrateRoot=I.hydrateRoot;const he="modulepreload",pe=function(o){return"/"+o},R={},m=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),s=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=pe(c),c in R)return;R[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":he,d||(u.as="script"),u.crossOrigin="",u.href=c,s&&u.setAttribute("nonce",s),document.head.appendChild(u),d)return new Promise((p,g)=>{u.addEventListener("load",p),u.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return r.then(a=>{for(const s of a||[])s.status==="rejected"&&i(s.reason);return e().catch(i)})};function T(o){"@babel/helpers - typeof";return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(o)}function Y(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":T(XMLHttpRequest))==="object"}function ge(o){return!!o&&typeof o.then=="function"}function me(o){return ge(o)?o:Promise.resolve(o)}function q(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),t.push.apply(t,n)}return t}function $(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?q(Object(t),!0).forEach(function(n){ye(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function ye(o,e,t){return(e=we(e))in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function we(o){var e=ve(o,"string");return w(e)=="symbol"?e:e+""}function ve(o,e){if(w(o)!="object"||!o)return o;var t=o[Symbol.toPrimitive];if(t!==void 0){var n=t.call(o,e);if(w(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(o)}function w(o){"@babel/helpers - typeof";return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(o)}var y=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?y=global.fetch:typeof window<"u"&&window.fetch&&(y=window.fetch);var _;Y()&&(typeof global<"u"&&global.XMLHttpRequest?_=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(_=window.XMLHttpRequest));var L;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?L=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(L=window.ActiveXObject));typeof y!="function"&&(y=void 0);if(!y&&!_&&!L)try{m(()=>import("./browser-ponyfill-DdJ7XUlJ.js").then(o=>o.b),__vite__mapDeps([0,1])).then(function(o){y=o.default}).catch(function(){})}catch{}var D=function(e,t){if(t&&w(t)==="object"){var n="";for(var r in t)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);if(!n)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+n.slice(1)}return e},U=function(e,t,n,r){var i=function(c){if(!c.ok)return n(c.statusText||"Error",{status:c.status});c.text().then(function(d){n(null,{status:c.status,data:d})}).catch(n)};if(r){var a=r(e,t);if(a instanceof Promise){a.then(i).catch(n);return}}typeof fetch=="function"?fetch(e,t).then(i).catch(n):y(e,t).then(i).catch(n)},N=!1,Se=function(e,t,n,r){e.queryStringParams&&(t=D(t,e.queryStringParams));var i=$({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(i["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),n&&(i["Content-Type"]="application/json");var a=typeof e.requestOptions=="function"?e.requestOptions(n):e.requestOptions,s=$({method:n?"POST":"GET",body:n?e.stringify(n):void 0,headers:i},N?{}:a),c=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{U(t,s,r,c)}catch(d){if(!a||Object.keys(a).length===0||!d.message||d.message.indexOf("not implemented")<0)return r(d);try{Object.keys(a).forEach(function(f){delete s[f]}),U(t,s,r,c),N=!0}catch(f){r(f)}}},be=function(e,t,n,r){n&&w(n)==="object"&&(n=D("",n).slice(1)),e.queryStringParams&&(t=D(t,e.queryStringParams));try{var i=_?new _:new L("MSXML2.XMLHTTP.3.0");i.open(n?"POST":"GET",t,1),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!e.withCredentials,n&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var a=e.customHeaders;if(a=typeof a=="function"?a():a,a)for(var s in a)i.setRequestHeader(s,a[s]);i.onreadystatechange=function(){i.readyState>3&&r(i.status>=400?i.statusText:null,{status:i.status,data:i.responseText})},i.send(n)}catch(c){console&&console.log(c)}},Ee=function(e,t,n,r){if(typeof n=="function"&&(r=n,n=void 0),r=r||function(){},y&&t.indexOf("file:")!==0)return Se(e,t,n,r);if(Y()||typeof ActiveXObject=="function")return be(e,t,n,r);r(new Error("No fetch and no xhr implementation found!"))};function b(o){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(o)}function H(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),t.push.apply(t,n)}return t}function j(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?H(Object(t),!0).forEach(function(n){Q(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function Oe(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function ke(o,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,Z(n.key),n)}}function xe(o,e,t){return e&&ke(o.prototype,e),Object.defineProperty(o,"prototype",{writable:!1}),o}function Q(o,e,t){return(e=Z(e))in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function Z(o){var e=Ce(o,"string");return b(e)=="symbol"?e:e+""}function Ce(o,e){if(b(o)!="object"||!o)return o;var t=o[Symbol.toPrimitive];if(t!==void 0){var n=t.call(o,e);if(b(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}var _e=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,n,r){return Q({},n,r||"")},parseLoadPayload:function(t,n){},request:Ee,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},ee=function(){function o(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Oe(this,o),this.services=e,this.options=t,this.allOptions=n,this.type="backend",this.init(e,t,n)}return xe(o,[{key:"init",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=t,this.options=j(j(j({},_e()),this.options||{}),r),this.allOptions=i,this.services&&this.options.reloadInterval){var a=setInterval(function(){return n.reload()},this.options.reloadInterval);b(a)==="object"&&typeof a.unref=="function"&&a.unref()}}},{key:"readMulti",value:function(t,n,r){this._readAny(t,t,n,n,r)}},{key:"read",value:function(t,n,r){this._readAny([t],t,[n],n,r)}},{key:"_readAny",value:function(t,n,r,i,a){var s=this,c=this.options.loadPath;typeof this.options.loadPath=="function"&&(c=this.options.loadPath(t,r)),c=me(c),c.then(function(d){if(!d)return a(null,{});var f=s.services.interpolator.interpolate(d,{lng:t.join("+"),ns:r.join("+")});s.loadUrl(f,a,n,i)})}},{key:"loadUrl",value:function(t,n,r,i){var a=this,s=typeof r=="string"?[r]:r,c=typeof i=="string"?[i]:i,d=this.options.parseLoadPayload(s,c);this.options.request(this.options,t,d,function(f,u){if(u&&(u.status>=500&&u.status<600||!u.status))return n("failed loading "+t+"; status code: "+u.status,!0);if(u&&u.status>=400&&u.status<500)return n("failed loading "+t+"; status code: "+u.status,!1);if(!u&&f&&f.message){var p=f.message.toLowerCase(),g=["failed","fetch","network","load"].find(function(A){return p.indexOf(A)>-1});if(g)return n("failed loading "+t+": "+f.message,!0)}if(f)return n(f,!1);var E,O;try{typeof u.data=="string"?E=a.options.parse(u.data,r,i):E=u.data}catch{O="failed parsing "+t+" to json"}if(O)return n(O,!1);n(null,E)})}},{key:"create",value:function(t,n,r,i,a){var s=this;if(this.options.addPath){typeof t=="string"&&(t=[t]);var c=this.options.parsePayload(n,r,i),d=0,f=[],u=[];t.forEach(function(p){var g=s.options.addPath;typeof s.options.addPath=="function"&&(g=s.options.addPath(p,n));var E=s.services.interpolator.interpolate(g,{lng:p,ns:n});s.options.request(s.options,E,c,function(O,A){d+=1,f.push(O),u.push(A),d===t.length&&typeof a=="function"&&a(f,u)})})}}},{key:"reload",value:function(){var t=this,n=this.services,r=n.backendConnector,i=n.languageUtils,a=n.logger,s=r.language;if(!(s&&s.toLowerCase()==="cimode")){var c=[],d=function(u){var p=i.toResolveHierarchy(u);p.forEach(function(g){c.indexOf(g)<0&&c.push(g)})};d(s),this.allOptions.preload&&this.allOptions.preload.forEach(function(f){return d(f)}),c.forEach(function(f){t.allOptions.ns.forEach(function(u){r.read(f,u,"read",null,null,function(p,g){p&&a.warn("loading namespace ".concat(u," for language ").concat(f," failed"),p),!p&&g&&a.log("loaded namespace ".concat(u," for language ").concat(f),g),r.loaded("".concat(f,"|").concat(u),p,g)})})})}}}])}();ee.type="backend";const{slice:Ae,forEach:Le}=[];function je(o){return Le.call(Ae.call(arguments,1),e=>{if(e)for(const t in e)o[t]===void 0&&(o[t]=e[t])}),o}function Pe(o){return typeof o!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(o))}const F=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Me=function(o,e){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let i=`${o}=${r}`;if(n.maxAge>0){const a=n.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(a)}`}if(n.domain){if(!F.test(n.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${n.domain}`}if(n.path){if(!F.test(n.path))throw new TypeError("option path is invalid");i+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(i+="; Partitioned"),i},K={create(o,e,t,n){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+t*60*1e3)),n&&(r.domain=n),document.cookie=Me(o,e,r)},read(o){const e=`${o}=`,t=document.cookie.split(";");for(let n=0;n<t.length;n++){let r=t[n];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(o,e){this.create(o,"",-1,e)}};var Te={name:"cookie",lookup(o){let{lookupCookie:e}=o;if(e&&typeof document<"u")return K.read(e)||void 0},cacheUserLanguage(o,e){let{lookupCookie:t,cookieMinutes:n,cookieDomain:r,cookieOptions:i}=e;t&&typeof document<"u"&&K.create(t,o,n,r,i)}},De={name:"querystring",lookup(o){var n;let{lookupQuerystring:e}=o,t;if(typeof window<"u"){let{search:r}=window.location;!window.location.search&&((n=window.location.hash)==null?void 0:n.indexOf("?"))>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));const a=r.substring(1).split("&");for(let s=0;s<a.length;s++){const c=a[s].indexOf("=");c>0&&a[s].substring(0,c)===e&&(t=a[s].substring(c+1))}}return t}},Ie={name:"hash",lookup(o){var r;let{lookupHash:e,lookupFromHashIndex:t}=o,n;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const a=i.substring(1);if(e){const s=a.split("&");for(let c=0;c<s.length;c++){const d=s[c].indexOf("=");d>0&&s[c].substring(0,d)===e&&(n=s[c].substring(d+1))}}if(n)return n;if(!n&&t>-1){const s=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?(r=s[typeof t=="number"?t:0])==null?void 0:r.replace("/",""):void 0}}}return n}};let v=null;const X=()=>{if(v!==null)return v;try{if(v=typeof window<"u"&&window.localStorage!==null,!v)return!1;const o="i18next.translate.boo";window.localStorage.setItem(o,"foo"),window.localStorage.removeItem(o)}catch{v=!1}return v};var Re={name:"localStorage",lookup(o){let{lookupLocalStorage:e}=o;if(e&&X())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(o,e){let{lookupLocalStorage:t}=e;t&&X()&&window.localStorage.setItem(t,o)}};let S=null;const z=()=>{if(S!==null)return S;try{if(S=typeof window<"u"&&window.sessionStorage!==null,!S)return!1;const o="i18next.translate.boo";window.sessionStorage.setItem(o,"foo"),window.sessionStorage.removeItem(o)}catch{S=!1}return S};var qe={name:"sessionStorage",lookup(o){let{lookupSessionStorage:e}=o;if(e&&z())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(o,e){let{lookupSessionStorage:t}=e;t&&z()&&window.sessionStorage.setItem(t,o)}},$e={name:"navigator",lookup(o){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:n,language:r}=navigator;if(t)for(let i=0;i<t.length;i++)e.push(t[i]);n&&e.push(n),r&&e.push(r)}return e.length>0?e:void 0}},Ue={name:"htmlTag",lookup(o){let{htmlTag:e}=o,t;const n=e||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(t=n.getAttribute("lang")),t}},Ne={name:"path",lookup(o){var r;let{lookupFromPathIndex:e}=o;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?(r=t[typeof e=="number"?e:0])==null?void 0:r.replace("/",""):void 0}},He={name:"subdomain",lookup(o){var r,i;let{lookupFromSubdomainIndex:e}=o;const t=typeof e=="number"?e+1:1,n=typeof window<"u"&&((i=(r=window.location)==null?void 0:r.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(n)return n[t]}};let te=!1;try{document.cookie,te=!0}catch{}const ne=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];te||ne.splice(1,1);const Fe=()=>({order:ne,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:o=>o});class oe{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=je(t,this.options||{},Fe()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(Te),this.addDetector(De),this.addDetector(Re),this.addDetector(qe),this.addDetector($e),this.addDetector(Ue),this.addDetector(Ne),this.addDetector(He),this.addDetector(Ie)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(n=>{if(this.detectors[n]){let r=this.detectors[n].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(t=t.concat(r))}}),t=t.filter(n=>n!=null&&!Pe(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(e,this.options)}))}}oe.type="languageDetector";P.use(ee).use(oe).use(ce).init({fallbackLng:"en",ns:["main","writing","report","helper","anime","image","billing","download","common"],defaultNS:"main",backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},detection:{order:["querystring","cookie","localStorage","navigator"],caches:["cookie","localStorage"],cookieMinutes:60*24*30,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng"},interpolation:{escapeValue:!1},react:{useSuspense:!0}});const re=h.createContext(void 0),tt=()=>{const o=h.useContext(re);if(!o)throw new Error("useLanguage must be used within a LanguageProvider");return o},Ke=({children:o})=>{const[e,t]=h.useState(()=>localStorage.getItem("language")||"en"),n=r=>{t(r),localStorage.setItem("language",r),P.changeLanguage(r)};return h.useEffect(()=>{const r=localStorage.getItem("language");r&&P.changeLanguage(r)},[]),l(re.Provider,{value:{language:e,setLanguage:n},children:o})};class Xe{constructor(){this.STORAGE_KEY="yumi-installed-modes",this.USAGE_STATS_KEY="yumi-usage-stats",this.CACHE_PREFIX="yumi-mode-",this.modeConfigs={"writing-helper":{id:"writing-helper",name:"Writing Helper",version:"1.0.0",size:18e5,dependencies:["react-markdown","emoji-mart"],cacheKeys:["writing-templates","character-styles","genre-templates"],assets:["writing-templates.json","character-personas.json","genre-styles.json"]},"anime-chara-helper":{id:"anime-chara-helper",name:"Anime Character Designer",version:"1.0.0",size:32e5,dependencies:["fabric","color-picker"],cacheKeys:["anime-assets","character-presets"],assets:["anime-parts.json","character-templates.json","anime-backgrounds.png"]}},this.coreModes=["writing-helper","anime-chara-helper"]}async getInstalledModes(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e)return JSON.parse(e);const t=this.coreModes;return await this.setInstalledModes(t),t}catch(e){return console.error("Error getting installed modes:",e),this.coreModes}}async setInstalledModes(e){const t=[...new Set([...this.coreModes,...e])];localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}async isModeInstalled(e){return(await this.getInstalledModes()).includes(e)}async installMode(e,t){const n=this.modeConfigs[e];if(!n)throw new Error(`Mode ${e} not found`);const r=await this.getInstalledModes();if(r.includes(e))throw new Error(`Mode ${e} is already installed`);try{t==null||t({progress:10,status:"downloading",message:"Downloading dependencies..."}),await this.downloadDependencies(n.dependencies),t==null||t({progress:50,status:"installing",message:"Caching assets..."}),await this.cacheAssets(e,n.assets),t==null||t({progress:80,status:"installing",message:"Initializing cache..."}),await this.initializeModeCache(e,n.cacheKeys),t==null||t({progress:100,status:"complete",message:"Installation complete!"});const i=[...r,e];await this.setInstalledModes(i),await this.initializeUsageStats(e)}catch(i){const a=i instanceof Error?i.message:"Unknown error occurred";throw t==null||t({progress:0,status:"error",message:`Installation failed: ${a}`}),i}}async uninstallMode(e){if(this.coreModes.includes(e))throw new Error(`Cannot uninstall core mode: ${e}`);const t=await this.getInstalledModes();if(!t.includes(e))throw new Error(`Mode ${e} is not installed`);const n=this.modeConfigs[e];if(!n)throw new Error(`Mode ${e} not found`);try{await this.clearModeCache(e,n.cacheKeys),await this.clearCachedAssets(e);const r=t.filter(i=>i!==e);await this.setInstalledModes(r),await this.clearServiceWorkerCache(e)}catch(r){throw console.error(`Error uninstalling mode ${e}:`,r),r}}async getUsageStats(){try{const e=localStorage.getItem(this.USAGE_STATS_KEY);return e?JSON.parse(e):{}}catch(e){return console.error("Error getting usage stats:",e),{}}}async logModeUsage(e,t=0){try{const n=await this.getUsageStats(),r=n[e]||{count:0,lastUsed:new Date,totalTime:0};n[e]={count:r.count+1,lastUsed:new Date,totalTime:r.totalTime+t},localStorage.setItem(this.USAGE_STATS_KEY,JSON.stringify(n))}catch(n){console.error("Error logging mode usage:",n)}}async getStorageUsage(){const e=await this.getInstalledModes(),t={};for(const n of e){const r=this.modeConfigs[n];r&&(t[n]=r.size)}return t}async clearAllData(){try{[this.STORAGE_KEY,this.USAGE_STATS_KEY].forEach(t=>localStorage.removeItem(t)),await this.clearIndexedDB(),await this.clearAllServiceWorkerCache(),await this.setInstalledModes(this.coreModes)}catch(e){throw console.error("Error clearing all data:",e),e}}async downloadDependencies(e){await this.simulateAsyncOperation(1e3)}async cacheAssets(e,t){for(const n of t){const r=`${this.CACHE_PREFIX}${e}-${n}`;localStorage.setItem(r,JSON.stringify({cached:Date.now(),asset:n}))}}async clearCachedAssets(e){Object.keys(localStorage).filter(r=>r.startsWith(`${this.CACHE_PREFIX}${e}`)).forEach(r=>localStorage.removeItem(r))}async initializeModeCache(e,t){for(const n of t){const r=`${e}-${n}`;localStorage.getItem(r)||localStorage.setItem(r,JSON.stringify({initialized:Date.now()}))}}async clearModeCache(e,t){for(const n of t){const r=`${e}-${n}`;localStorage.removeItem(r)}}async initializeUsageStats(e){const t=await this.getUsageStats();t[e]||(t[e]={count:0,lastUsed:new Date,totalTime:0},localStorage.setItem(this.USAGE_STATS_KEY,JSON.stringify(t)))}async clearServiceWorkerCache(e){if("serviceWorker"in navigator&&"caches"in window)try{const n=(await caches.keys()).filter(r=>r.includes(e));await Promise.all(n.map(r=>caches.delete(r)))}catch(t){console.error("Error clearing service worker cache:",t)}}async clearAllServiceWorkerCache(){if("serviceWorker"in navigator&&"caches"in window)try{const e=await caches.keys();await Promise.all(e.map(t=>caches.delete(t)))}catch(e){console.error("Error clearing all service worker cache:",e)}}async clearIndexedDB(){if("indexedDB"in window)try{const e=["yumi-series-cache","yumi-assets","yumi-data"];for(const t of e){const n=indexedDB.deleteDatabase(t);await new Promise((r,i)=>{n.onsuccess=()=>r(void 0),n.onerror=()=>i(n.error)})}}catch(e){console.error("Error clearing IndexedDB:",e)}}async simulateAsyncOperation(e){return new Promise(t=>setTimeout(t,e))}}const ze=new Xe,ie=o=>{switch(o){case"writing-helper":return h.lazy(()=>m(()=>import("./WritingHelperApp-d0q-8gVb.js"),__vite__mapDeps([2,1,3,4,5,6,7,8,9,10])));case"anime-chara":return h.lazy(()=>m(()=>import("./AnimeCharaHelperApp-ziGT7p_V.js"),__vite__mapDeps([11,1,5,6,7,12,3,4,9,13])));default:throw new Error(`Unknown component: ${o}`)}},Be=()=>{["writing-helper","anime-chara"].forEach(e=>{try{ie(e)}catch(t){console.error(`Failed to preload component ${e}:`,t)}})},ae={loadComponent:async o=>{if(!await ze.isModeInstalled(o))return console.warn(`Mode ${o} is not installed. Cannot load component.`),null;try{return ie(o)}catch(t){return console.error(`Failed to load component for mode ${o}:`,t),null}},preloadComponent:async o=>{await ae.loadComponent(o)},preloadInstalledComponents:Be,clearComponentCache:o=>{},clearAllCache:()=>{},getCacheSize:()=>0,getCachedComponent:o=>null},We=h.lazy(()=>m(()=>import("./MainPage-BIFGFClo.js"),__vite__mapDeps([14,1,5,6,7,3,4,15,12,8,11,9,13,16]))),Ge=h.lazy(()=>m(()=>import("./AIAssistant-fp7EeI3B.js").then(o=>o.a),__vite__mapDeps([5,1,6,7]))),Je=h.lazy(()=>m(()=>import("./ChargePage-DsIV7S1k.js"),__vite__mapDeps([17,1,15,6,12,9,18]))),B=h.lazy(()=>m(()=>import("./WritingHelperApp-d0q-8gVb.js"),__vite__mapDeps([2,1,3,4,5,6,7,8,9,10]))),Ve=h.lazy(()=>m(()=>import("./AnimeCharaHelperApp-ziGT7p_V.js"),__vite__mapDeps([11,1,5,6,7,12,3,4,9,13]))),W=()=>C("div",{className:"loading-container",children:[l("div",{className:"loading-spinner"}),l("span",{children:"Loading..."})]}),Ye=()=>{const[o,e]=h.useState(!1);h.useEffect(()=>{ae.preloadInstalledComponents()},[]);const t=()=>{};return l(h.Suspense,{fallback:l(de,{}),children:l(Ke,{children:l(le,{children:C("div",{className:"app-container",children:[l(h.Suspense,{fallback:l(W,{}),children:C(ue,{children:[l(k,{path:"/",element:l(We,{})}),l(k,{path:"/writing",element:l(B,{})}),l(k,{path:"/writing-helper",element:l(B,{})}),l(k,{path:"/anime-chara",element:l(Ve,{onBack:t})}),l(k,{path:"/charge",element:l(Je,{onClose:()=>{}})})]})}),o&&l("div",{className:"ai-assistant-container",children:l(h.Suspense,{fallback:l(W,{}),children:l(Ge,{onClose:()=>e(!1)})})})]})})})})};class Qe extends h.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){var e;return this.state.hasError?l("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 flex items-center justify-center p-4",children:C("div",{className:"bg-white rounded-xl shadow-xl p-8 max-w-md w-full text-center",children:[l("div",{className:"text-6xl mb-4",children:"😵"}),l("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Oops! Something went wrong"}),l("p",{className:"text-gray-600 mb-6",children:"The app encountered an error. Don't worry, let's get you back on track!"}),l("button",{onClick:()=>{this.setState({hasError:!1,error:void 0}),window.location.reload()},className:"w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:"🔄 Reload App"}),l("div",{className:"mt-4 text-xs text-gray-500",children:((e=this.state.error)==null?void 0:e.message)&&C("details",{className:"mt-2",children:[l("summary",{className:"cursor-pointer text-purple-600",children:"Technical Details"}),l("pre",{className:"mt-2 text-left bg-gray-100 p-2 rounded text-xs overflow-auto",children:this.state.error.message})]})})]})}):this.props.children}}M.createRoot(document.getElementById("root")).render(l(fe.StrictMode,{children:l(Qe,{children:l(Ye,{})})}));export{et as F,l as a,C as j,tt as u};
//# sourceMappingURL=index-WcmAaxBA.js.map
