.icon-bar{display:flex;flex-direction:column;background:linear-gradient(180deg,#2a2a2a,#1f1f1f);width:80px;min-height:400px;max-height:90vh;padding:8px 0;gap:2px;border-right:2px solid #3a3a3a;border-radius:0 12px 12px 0;position:fixed;left:0;top:50%;transform:translateY(-50%);z-index:1000;box-shadow:4px 0 20px #0000004d;transition:all .3s cubic-bezier(.4,0,.2,1);-webkit-user-select:none;user-select:none;overflow:hidden}.icon-bar.collapsed{width:50px;min-height:300px}.icon-bar.dragging{box-shadow:8px 0 30px #00000080;transform:translateY(-50%) scale(1.02)}.drag-handle{display:flex;justify-content:center;align-items:center;height:20px;cursor:grab;background:#ffffff0d;border-radius:4px;margin:4px 8px 8px;transition:background-color .2s ease}.drag-handle:hover{background:#ffffff1a}.drag-handle:active{cursor:grabbing}.drag-dots{display:flex;gap:2px}.drag-dots span{width:3px;height:3px;background:#888;border-radius:50%;transition:background-color .2s ease}.drag-handle:hover .drag-dots span{background:#fff}.collapse-toggle{display:flex;align-items:center;justify-content:center;width:calc(100% - 16px);height:28px;margin:0 8px 8px;background:#ff69b41a;border:1px solid rgba(255,105,180,.3);border-radius:6px;color:#ff69b4;cursor:pointer;transition:all .2s ease}.collapse-toggle:hover{background:#ff69b433;border-color:#ff69b480}.icons-container{display:flex;flex-direction:column;flex:1;gap:2px;padding:0 4px;overflow-y:auto;scrollbar-width:none;-ms-overflow-style:none}.icons-container::-webkit-scrollbar{display:none}.icon-button{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;min-height:56px;background:none;border:none;color:#888;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);position:relative;padding:8px 4px;border-radius:8px;margin:1px 0}.icon-button:hover{color:#fff;background:linear-gradient(135deg,#ffffff1a,#ffffff0d);transform:translate(2px)}.icon-button.active{color:#ff69b4;background:linear-gradient(135deg,#ff69b426,#ff69b414);border:1px solid rgba(255,105,180,.3);transform:translate(3px)}.icon-button.active:before{content:"";position:absolute;left:-4px;top:8px;bottom:8px;width:3px;background:linear-gradient(180deg,#ff69b4,#ff1493);border-radius:0 2px 2px 0;box-shadow:0 0 8px #ff69b480}.icon-button.navigation{border-bottom:1px solid rgba(255,255,255,.1);margin-bottom:4px}.icon-button.creation{background:#ffa5000d;border:1px solid rgba(255,165,0,.1)}.icon-button.creation:hover{background:#ffa50026;color:orange}.icon-button.creation.active{color:orange;background:#ffa50033;border-color:#ffa50066}.icon-button.ai{background:#8a2be20d;border:1px solid rgba(138,43,226,.1)}.icon-button.ai:hover{background:#8a2be226;color:#ba55d3}.icon-button.ai.active{color:#ba55d3;background:#8a2be233;border-color:#8a2be266}.icon-button.drawing{background:#228b220d;border:1px solid rgba(34,139,34,.1)}.icon-button.drawing:hover{background:#228b2226;color:#32cd32}.icon-button.drawing.active{color:#32cd32;background:#228b2233;border-color:#228b2266}.icon-button.v12{background:#667eea0d;border:1px solid rgba(102,126,234,.1);position:relative}.icon-button.v12:hover{background:#667eea26;color:#667eea;transform:translateY(-2px);box-shadow:0 4px 12px #667eea33}.icon-button.v12.active{color:#667eea;background:#667eea33;border-color:#667eea66;box-shadow:0 0 20px #667eea4d}.version-badge{position:absolute;top:-4px;right:-4px;background:linear-gradient(135deg,#ff6b9d,#c44569);color:#fff;font-size:.6rem;padding:1px 4px;border-radius:8px;font-weight:600;line-height:1;box-shadow:0 2px 4px #0000004d;pointer-events:none;animation:pulse 2s infinite}@keyframes pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}}.icon-label{font-size:9px;margin-top:4px;opacity:.9;font-weight:500;text-align:center;line-height:1.2;max-width:60px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.category-info{margin-top:8px;padding:8px;border-top:1px solid rgba(255,255,255,.1)}.category-separator{height:1px;background:linear-gradient(90deg,transparent 0%,#ff69b4 50%,transparent 100%);margin-bottom:4px}.category-label{font-size:8px;color:#888;text-align:center;display:block;text-transform:uppercase;letter-spacing:.5px;font-weight:600}.icon-button:hover:after{content:attr(title);position:absolute;left:calc(100% + 12px);top:50%;transform:translateY(-50%);background:linear-gradient(135deg,#000000e6,#000c);color:#fff;padding:8px 12px;border-radius:8px;font-size:12px;font-weight:500;white-space:nowrap;z-index:1001;box-shadow:0 4px 12px #0000004d;border:1px solid rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);animation:tooltipFadeIn .2s ease-out}@keyframes tooltipFadeIn{0%{opacity:0;transform:translateY(-50%) translate(-4px)}to{opacity:1;transform:translateY(-50%) translate(0)}}@media (max-width: 768px){.icon-bar{flex-direction:row;width:100%;height:70px;min-height:70px;max-height:70px;padding:4px 8px;position:fixed;bottom:0;left:0;right:0;top:auto;transform:none;border-radius:12px 12px 0 0;border-right:none;border-top:2px solid #3a3a3a}.icon-bar.collapsed{width:100%;height:50px;min-height:50px}.drag-handle{display:none}.collapse-toggle{width:40px;height:calc(100% - 8px);margin:4px}.icons-container{flex-direction:row;overflow-x:auto;overflow-y:hidden;padding:4px 0}.icon-button{min-width:60px;min-height:calc(100% - 8px);margin:0 2px}.icon-button.active:before{left:8px;right:8px;top:-4px;width:auto;height:3px;border-radius:0 0 2px 2px}.icon-button:hover:after{left:50%;top:auto;bottom:calc(100% + 8px);transform:translate(-50%)}.category-info{display:none}}@media (prefers-color-scheme: dark){.icon-bar{background:linear-gradient(180deg,#1a1a1a,#0f0f0f);border-right-color:#2a2a2a}.icon-button:hover{background:linear-gradient(135deg,#ffffff14,#ffffff08)}}.reference-image-container{position:fixed;right:20px;bottom:20px;width:200px;height:200px;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0003;background:#fff;z-index:100}.reference-image-container img{width:100%;height:100%;object-fit:cover}.close-reference{position:absolute;top:8px;right:8px;background:#00000080;border:none;border-radius:50%;width:28px;height:28px;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer;transition:background-color .2s}.close-reference:hover{background:#000000b3}.ai-strength-slider{display:flex;align-items:center;padding:0 8px;min-width:100px}.ai-strength-slider input{width:100%;cursor:pointer}.ai-processing-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:#00000080;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;z-index:1000}.spinner{width:40px;height:40px;border:4px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:spin 1s linear infinite;margin-bottom:16px}.tool-button.ai-active{background-color:#8a2be233;color:#8a2be2}.tool-separator{width:1px;height:24px;background-color:#444;margin:0 4px}.color-picker{display:flex;align-items:center;position:relative;width:40px;height:40px}.color-picker input{position:absolute;width:100%;height:100%;opacity:0;cursor:pointer}.color-picker svg{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);color:#888;pointer-events:none}.size-slider{display:flex;align-items:center;gap:8px;padding:0 8px}.size-slider input{width:100px;cursor:pointer}.ai-generate-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:#666;text-align:center;padding:20px}.ai-generate-placeholder h2{margin-bottom:16px;color:#333}input[type=range]{-webkit-appearance:none;background:transparent}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;height:16px;width:16px;border-radius:50%;background:#ff69b4;cursor:pointer;margin-top:-6px}input[type=range]::-webkit-slider-runnable-track{width:100%;height:4px;background:#444;border-radius:2px}.template-library{background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:20px;padding:2rem;height:100%;overflow-y:auto;border:1px solid rgba(255,255,255,.1)}.template-library.enhanced{background:linear-gradient(135deg,#0f0f23,#1a1a2e,#16213e)}.library-header{margin-bottom:2rem;text-align:center;padding-bottom:1.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.library-header h2{color:#fff;font-size:1.8rem;font-weight:700;margin:0 0 .5rem;background:linear-gradient(135deg,#ff69b4,#ff1493,#ba55d3);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.library-header p{color:#ffffffb3;font-size:1rem;margin:0}.preview-controls{margin-top:1rem;display:flex;justify-content:center}.preview-toggle{display:flex;align-items:center;gap:.5rem;color:#fffc;font-size:.9rem;cursor:pointer}.preview-toggle input[type=checkbox]{display:none}.toggle-slider{width:40px;height:20px;background:#fff3;border-radius:20px;position:relative;transition:all .3s ease}.toggle-slider:before{content:"";position:absolute;width:16px;height:16px;background:#fff;border-radius:50%;top:2px;left:2px;transition:all .3s ease}.preview-toggle input:checked+.toggle-slider{background:linear-gradient(135deg,#ff69b4,#ff1493)}.preview-toggle input:checked+.toggle-slider:before{transform:translate(20px)}.library-controls{margin-bottom:2rem}.search-bar{position:relative;margin-bottom:1.5rem}.search-input{width:100%;padding:1rem 1rem 1rem 3rem;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:12px;color:#fff;font-size:1rem;transition:all .3s ease}.search-input:focus{outline:none;background:#ffffff14;border-color:#ff69b4;box-shadow:0 0 0 3px #ff69b41a}.search-input::placeholder{color:#ffffff80}.search-icon{position:absolute;left:1rem;top:50%;transform:translateY(-50%);font-size:1.2rem;color:#ffffff80}.category-tabs{display:flex;gap:.5rem;flex-wrap:wrap}.category-tab{background:#ffffff0d;border:1px solid rgba(255,255,255,.1);color:#fff;padding:.75rem 1rem;border-radius:12px;cursor:pointer;transition:all .3s ease;font-size:.9rem;display:flex;align-items:center;gap:.5rem}.category-count{background:#0003;padding:.2rem .5rem;border-radius:10px;font-size:.8rem}.templates-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem;margin-bottom:2rem}.template-card{background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:1.5rem;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);position:relative;overflow:hidden}.template-card:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#ff69b4,#ff1493,#ba55d3,#9370db);opacity:0;transition:opacity .3s ease}.template-card:hover{background:#ffffff14;transform:translateY(-4px);box-shadow:0 8px 24px #0000004d}.template-card:hover:before{opacity:1}.template-card.selected{background:linear-gradient(135deg,#ff69b426,#ff149326);border-color:#ff69b4;box-shadow:0 8px 24px #ff69b44d}.template-card.selected:before{opacity:1}.template-thumbnail{width:100%;height:120px;background:#ffffff1a;border-radius:12px;margin-bottom:1rem;display:flex;align-items:center;justify-content:center;font-size:3rem;position:relative;overflow:hidden}.template-thumbnail img{width:100%;height:100%;object-fit:cover;border-radius:12px}.template-info{text-align:left}.template-header{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}.style-icon{font-size:1.2rem}.template-name{color:#fff;font-size:1.1rem;font-weight:600;margin:0}.template-style{color:#ff69b4;font-size:.9rem;font-weight:500;margin:0 0 .5rem}.template-description{color:#ffffffb3;font-size:.9rem;margin:0 0 1rem;line-height:1.4}.template-characteristics{display:flex;flex-wrap:wrap;gap:.5rem}.characteristic-tag{background:#ffffff1a;color:#ffffffe6;padding:.25rem .5rem;border-radius:12px;font-size:.8rem}.library-actions{display:flex;justify-content:center;gap:1rem;padding-top:1.5rem;border-top:1px solid rgba(255,255,255,.1)}.action-btn{padding:1rem 2rem;border:none;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem}.primary-btn{background:linear-gradient(135deg,#ff69b4,#ff1493);color:#fff}.primary-btn:hover{background:linear-gradient(135deg,#ff1493,#dc143c);transform:translateY(-2px);box-shadow:0 8px 24px #ff69b44d}.secondary-btn{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2)}.secondary-btn:hover{background:#fff3;transform:translateY(-2px)}.loading{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px}.loading-spinner{text-align:center}.spinner-icon{font-size:3rem;animation:spin 2s linear infinite;margin-bottom:1rem}.loading p{color:#ffffffb3;font-size:1.1rem}.error{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px;text-align:center}.error-message{color:#ff6b6b;font-size:1.2rem;margin-bottom:1rem}.retry-btn{background:linear-gradient(135deg,#32cd32,#228b22);border:none;color:#fff;padding:.75rem 1.5rem;border-radius:8px;font-size:1rem;cursor:pointer;transition:all .3s ease}.retry-btn:hover{background:linear-gradient(135deg,#228b22,#006400);transform:translateY(-2px)}@media (max-width: 768px){.template-library{padding:1.5rem}.templates-grid{grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:1rem}.template-card{padding:1rem}.template-thumbnail{height:100px;font-size:2.5rem}.category-tabs{gap:.25rem}.category-tab{padding:.5rem .75rem;font-size:.8rem}.library-actions{flex-direction:column;gap:.5rem}.action-btn{width:100%;justify-content:center}}.template-library::-webkit-scrollbar{width:8px}.template-library::-webkit-scrollbar-track{background:#ffffff0d;border-radius:4px}.template-library::-webkit-scrollbar-thumb{background:#fff3;border-radius:4px}.template-library::-webkit-scrollbar-thumb:hover{background:#ffffff4d}.pose-library-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.pose-library-content{background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:20px;padding:2rem;max-width:900px;max-height:80vh;overflow-y:auto;box-shadow:0 20px 40px #0000004d;border:1px solid rgba(255,255,255,.1)}.pose-library-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid rgba(255,255,255,.1)}.pose-library-header h3{color:#fff;font-size:1.5rem;font-weight:600;margin:0}.close-btn{background:#ffffff1a;border:none;color:#fff;font-size:1.5rem;width:40px;height:40px;border-radius:50%;cursor:pointer;transition:all .3s ease}.close-btn:hover{background:#fff3;transform:scale(1.1)}.category-tabs{display:flex;gap:.5rem;margin-bottom:2rem;flex-wrap:wrap}.category-tab{background:#ffffff0d;border:1px solid rgba(255,255,255,.1);color:#fff;padding:.75rem 1rem;border-radius:12px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;font-size:.9rem}.category-tab:hover{background:#ffffff1a;transform:translateY(-2px)}.category-tab.active{background:linear-gradient(135deg,#ff69b4,#ff1493);border-color:#ff69b4;box-shadow:0 4px 12px #ff69b44d}.category-icon{font-size:1.1rem}.category-name{font-weight:500}.poses-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem;margin-bottom:2rem}.pose-card{background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:1.5rem;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.pose-card:hover{background:#ffffff1a;transform:translateY(-4px);box-shadow:0 8px 24px #0000004d}.pose-card.selected{background:linear-gradient(135deg,#ff69b433,#ff149333);border-color:#ff69b4;box-shadow:0 8px 24px #ff69b44d}.pose-preview{text-align:center;margin-bottom:1rem}.pose-emoji{font-size:3rem;display:block}.pose-info{text-align:center}.pose-name{color:#fff;font-size:1.1rem;font-weight:600;margin:0 0 .5rem}.pose-description{color:#ffffffb3;font-size:.9rem;margin:0 0 .75rem;line-height:1.4}.pose-category{background:#ffffff1a;color:#ffffffe6;padding:.25rem .75rem;border-radius:20px;font-size:.8rem;display:inline-flex;align-items:center;gap:.25rem}.pose-actions{display:flex;justify-content:center;padding-top:1rem;border-top:1px solid rgba(255,255,255,.1)}.confirm-pose-btn{background:linear-gradient(135deg,#32cd32,#228b22);border:none;color:#fff;padding:1rem 2rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem}.confirm-pose-btn:hover{background:linear-gradient(135deg,#228b22,#006400);transform:translateY(-2px);box-shadow:0 8px 24px #32cd324d}@media (max-width: 768px){.pose-library-content{margin:1rem;padding:1.5rem;max-height:90vh}.poses-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:.75rem}.category-tabs{gap:.25rem}.category-tab{padding:.5rem .75rem;font-size:.8rem}.pose-card{padding:1rem}.pose-emoji{font-size:2.5rem}}.pose-library-content::-webkit-scrollbar{width:8px}.pose-library-content::-webkit-scrollbar-track{background:#ffffff0d;border-radius:4px}.pose-library-content::-webkit-scrollbar-thumb{background:#fff3;border-radius:4px}.pose-library-content::-webkit-scrollbar-thumb:hover{background:#ffffff4d}.yumi-reference-modal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#000000b3;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn .3s ease-out}.yumi-reference-modal{background:linear-gradient(145deg,#fff,#f8fafc);border-radius:20px;box-shadow:0 25px 50px -12px #00000040,0 0 0 1px #fffc;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);max-width:90vw;max-height:90vh;width:1200px;display:flex;flex-direction:column;overflow:hidden;animation:slideUp .4s ease-out}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:24px 32px;border-bottom:1px solid rgba(226,232,240,.8);background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.header-content h2{margin:0;font-size:28px;font-weight:700;background:linear-gradient(135deg,#fff,#e2e8f0);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.header-subtitle{margin:4px 0 0;font-size:14px;opacity:.9;font-weight:400}.close-button{background:#fff3;border:1px solid rgba(255,255,255,.3);border-radius:12px;color:#fff;padding:8px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.close-button:hover{background:#ffffff4d;transform:scale(1.05)}.category-filter{display:flex;gap:12px;padding:20px 32px;border-bottom:1px solid rgba(226,232,240,.6);background:#f8fafc80;flex-wrap:wrap}.category-btn{background:#fffc;border:1px solid rgba(226,232,240,.8);border-radius:25px;padding:8px 16px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:6px;color:#475569}.category-btn:hover{background:#fff;border-color:#667eea;transform:translateY(-1px);box-shadow:0 4px 12px #667eea26}.category-btn.active{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-color:transparent;box-shadow:0 4px 12px #667eea4d}.category-btn .count{font-size:12px;opacity:.8;background:#0000001a;padding:2px 6px;border-radius:12px}.category-btn.active .count{background:#fff3}.reference-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px;padding:32px;overflow-y:auto;max-height:400px}.reference-item{background:#ffffffe6;border-radius:16px;overflow:hidden;box-shadow:0 4px 16px #00000014;transition:all .3s ease;border:1px solid rgba(226,232,240,.6)}.reference-item:hover{transform:translateY(-4px);box-shadow:0 12px 32px #00000026;border-color:#667eea}.reference-image-container{position:relative;aspect-ratio:4/3;overflow:hidden}.reference-image{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.reference-item:hover .reference-image{transform:scale(1.05)}.reference-overlay{position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(135deg,#667eeacc,#764ba2cc);display:flex;align-items:center;justify-content:center;gap:12px;opacity:0;transition:opacity .3s ease}.reference-item:hover .reference-overlay{opacity:1}.overlay-btn{background:#ffffffe6;border:none;border-radius:12px;padding:12px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;color:#475569}.overlay-btn:hover{background:#fff;transform:scale(1.1);box-shadow:0 4px 12px #00000026}.reference-info{padding:16px}.reference-info h4{margin:0 0 8px;font-size:16px;font-weight:600;color:#1e293b}.reference-info p{margin:0 0 12px;font-size:14px;color:#64748b;line-height:1.5}.reference-tags{display:flex;flex-wrap:wrap;gap:6px}.tag{background:linear-gradient(135deg,#f1f5f9,#e2e8f0);color:#475569;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500;border:1px solid rgba(226,232,240,.8)}.share-art-section{border-top:1px solid rgba(226,232,240,.6);padding:32px;background:linear-gradient(135deg,#f8fafc,#f1f5f9)}.section-divider{text-align:center;margin-bottom:24px;position:relative}.section-divider:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent 0%,#e2e8f0 50%,transparent 100%)}.section-divider span{background:linear-gradient(135deg,#f8fafc,#f1f5f9);padding:0 16px;font-weight:600;color:#475569;font-size:16px}.share-invitation{text-align:center;max-width:500px;margin:0 auto}.heart-icon{color:#ef4444;margin-bottom:16px;animation:heartbeat 2s ease-in-out infinite}.share-invitation h3{margin:0 0 12px;font-size:24px;font-weight:700;color:#1e293b}.share-invitation p{margin:0 0 24px;font-size:16px;color:#64748b;line-height:1.6}.share-btn{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;border:none;border-radius:16px;padding:16px 32px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:8px;box-shadow:0 4px 16px #ef44444d}.share-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px #ef444466}.reward-info{background:linear-gradient(135deg,#10b9811a,#0596691a);border:1px solid rgba(16,185,129,.2);border-radius:16px;padding:20px;margin:20px 0}.reward-item{display:flex;align-items:center;gap:12px;margin-bottom:12px}.reward-item:last-child{margin-bottom:0}.reward-icon{font-size:20px;width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:#10b9811a;border-radius:50%;border:1px solid rgba(16,185,129,.2)}.reward-text{font-size:14px;color:#1e293b;line-height:1.4}.reward-text strong{color:#059669;font-weight:700}.upload-section{max-width:600px;margin:0 auto}.upload-section h3{margin:0 0 12px;font-size:20px;font-weight:700;color:#1e293b;text-align:center}.upload-description{margin:0 0 24px;font-size:14px;color:#64748b;line-height:1.6;text-align:center}.file-preview{background:#ffffffe6;border:2px dashed #e2e8f0;border-radius:16px;padding:24px;margin-bottom:24px;display:flex;align-items:center;gap:16px}.preview-image{width:80px;height:80px;object-fit:cover;border-radius:12px;border:2px solid #e2e8f0}.preview-info p{margin:4px 0;font-size:14px;color:#475569}.file-input{display:none}.upload-actions{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}.select-file-btn,.upload-submit-btn{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:12px;padding:12px 24px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:8px}.select-file-btn:hover,.upload-submit-btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px #667eea4d}.cancel-btn{background:#94a3b81a;color:#64748b;border:1px solid #e2e8f0;border-radius:12px;padding:12px 24px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.cancel-btn:hover{background:#94a3b833;border-color:#cbd5e1}.legal-disclaimer{padding:16px 32px;background:#f8fafccc;border-top:1px solid rgba(226,232,240,.6);font-size:12px;color:#64748b;line-height:1.5}.preview-modal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#000c;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);display:flex;align-items:center;justify-content:center;z-index:1100;animation:fadeIn .3s ease-out}.preview-modal{background:#fff;border-radius:20px;max-width:90vw;max-height:90vh;width:800px;overflow:hidden;box-shadow:0 25px 50px -12px #0006;animation:slideUp .4s ease-out}.preview-header{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e2e8f0;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.preview-header h3{margin:0;font-size:20px;font-weight:600}.preview-content{padding:24px;display:flex;gap:24px;align-items:flex-start}.preview-full-image{width:300px;height:300px;object-fit:cover;border-radius:16px;border:2px solid #e2e8f0}.preview-details{flex:1}.preview-details p{margin:0 0 16px;font-size:16px;color:#475569;line-height:1.6}.preview-tags{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:24px}.use-reference-btn{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;border-radius:12px;padding:12px 24px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px;box-shadow:0 4px 16px #10b9814d}.use-reference-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px #10b98166}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes heartbeat{0%,50%,to{transform:scale(1)}25%{transform:scale(1.1)}75%{transform:scale(1.05)}}@media (max-width: 768px){.yumi-reference-modal{margin:20px;width:calc(100vw - 40px);max-height:calc(100vh - 40px)}.modal-header{padding:16px 20px}.header-content h2{font-size:20px}.category-filter{padding:16px 20px}.reference-grid{grid-template-columns:1fr;gap:16px;padding:20px;max-height:300px}.share-art-section{padding:20px}.preview-content{flex-direction:column;padding:16px}.preview-full-image{width:100%;height:200px}.upload-actions{flex-direction:column}}.character-library{position:fixed;top:60px;right:20px;width:350px;max-height:calc(100vh - 80px);background:#1e1e28f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;border:1px solid rgba(255,255,255,.1);z-index:1000;display:flex;flex-direction:column;overflow:hidden}.library-header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid rgba(255,255,255,.1)}.library-header h3{margin:0;color:#fff;font-size:1.1rem}.save-btn{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;font-size:.85rem;display:flex;align-items:center;gap:4px;transition:all .2s ease}.close-btn{background:#ffffff1a;color:#fff;border:none;padding:8px;border-radius:6px;cursor:pointer;transition:all .2s ease}.close-btn:hover{background:#fff3}.library-controls{display:flex;justify-content:space-between;align-items:center;padding:12px 20px;border-bottom:1px solid rgba(255,255,255,.1)}.filter-select{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2);padding:6px 10px;border-radius:6px;font-size:.85rem}.view-controls{display:flex;gap:4px}.view-controls button{background:#ffffff1a;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:.8rem;transition:all .2s ease}.view-controls button.active{background:#667eea80}.library-content{flex:1;overflow-y:auto;padding:12px}.library-content.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px}.library-content.list .library-item{display:flex;align-items:center;gap:12px;margin-bottom:8px}.library-item{background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:8px;cursor:pointer;transition:all .2s ease;position:relative}.library-item:hover{background:#ffffff1a;transform:translateY(-2px);box-shadow:0 4px 12px #0000004d}.library-item.active{border-color:#667eea;background:#667eea33}.item-thumbnail{position:relative;width:100%;height:100px;overflow:hidden;border-radius:6px;margin-bottom:8px}.list .item-thumbnail{width:60px;height:60px;margin-bottom:0;flex-shrink:0}.item-thumbnail img{width:100%;height:100%;object-fit:cover}.version-indicator{position:absolute;top:4px;right:4px;background:#000000b3;color:#fff;padding:2px 6px;border-radius:12px;font-size:.7rem}.item-info{flex:1}.item-info h4{margin:0 0 4px;color:#fff;font-size:.9rem;font-weight:500}.item-tags{display:flex;flex-wrap:wrap;gap:4px;margin-bottom:4px}.tag{background:#667eea4d;color:#fff;padding:2px 6px;border-radius:10px;font-size:.7rem}.item-date{color:#fff9;font-size:.75rem}.item-actions{display:flex;gap:4px;opacity:0;transition:opacity .2s ease}.library-item:hover .item-actions{opacity:1}.item-actions button{background:#ffffff1a;color:#fff;border:none;padding:6px;border-radius:4px;cursor:pointer;font-size:.8rem;transition:all .2s ease}.item-actions button:hover{background:#fff3}.delete-btn:hover{background:#f4433680!important}.character-detail-modal{position:fixed;top:0;left:0;right:0;bottom:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:2000}.modal-content{background:#1e1e28;border-radius:12px;padding:20px;max-width:600px;max-height:80vh;overflow-y:auto;border:1px solid rgba(255,255,255,.1)}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-header h3{margin:0;color:#fff}.versions-section h4{color:#fff;margin-bottom:12px}.versions-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px}.version-item{background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:8px;cursor:pointer;transition:all .2s ease}.version-item:hover{background:#ffffff1a}.version-item.active{border-color:#667eea;background:#667eea33}.version-item img{width:100%;height:80px;object-fit:cover;border-radius:4px;margin-bottom:6px}.version-info{display:flex;flex-direction:column;gap:2px}.version-name{color:#fff;font-size:.8rem;font-weight:500}.version-date{color:#fff9;font-size:.7rem}.save-dialog h3{margin:0 0 20px;color:#fff}.form-group{margin-bottom:16px}.form-group label{display:block;color:#fff;margin-bottom:6px;font-size:.9rem}.form-group input,.form-group textarea{width:100%;background:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:6px;padding:10px;color:#fff;font-family:inherit;resize:vertical}.dialog-actions{display:flex;gap:12px;justify-content:flex-end;margin-top:20px}.dialog-actions button{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .2s ease}.dialog-actions button:last-child{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.dialog-actions button:disabled{opacity:.5;cursor:not-allowed}.dialog-actions button:not(:disabled):hover{transform:translateY(-1px)}.library-content::-webkit-scrollbar,.modal-content::-webkit-scrollbar{width:6px}.library-content::-webkit-scrollbar-track,.modal-content::-webkit-scrollbar-track{background:#ffffff1a;border-radius:3px}.library-content::-webkit-scrollbar-thumb,.modal-content::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.library-content::-webkit-scrollbar-thumb:hover,.modal-content::-webkit-scrollbar-thumb:hover{background:#ffffff80}.ai-color-assistant{background:#1e1e28f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;border:1px solid rgba(255,255,255,.1);padding:16px;max-height:600px;overflow-y:auto}.assistant-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid rgba(255,255,255,.1)}.assistant-header h3{margin:0;color:#fff;font-size:1.1rem}.upload-btn,.analyze-btn{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:.8rem;display:flex;align-items:center;gap:4px;transition:all .2s ease}.upload-btn:hover,.analyze-btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px #667eea4d}.upload-btn:disabled,.analyze-btn:disabled{opacity:.6;cursor:not-allowed;transform:none}.analysis-status{display:flex;align-items:center;gap:12px;padding:12px;background:#667eea1a;border-radius:8px;margin-bottom:16px;color:#fff}.loading-spinner{width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-top-color:#667eea;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.image-preview{position:relative;width:100%;height:120px;border-radius:8px;overflow:hidden;margin-bottom:16px;border:1px solid rgba(255,255,255,.1)}.image-preview img{width:100%;height:100%;object-fit:cover}.image-overlay{position:absolute;top:8px;right:8px;background:#000000b3;color:#fff;padding:4px;border-radius:4px}.analysis-results{background:#ffffff0d;border-radius:8px;padding:12px;margin-bottom:16px}.analysis-results h4{margin:0 0 12px;color:#fff;font-size:.9rem}.color-harmony{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.harmony-label{color:#ffffffb3;font-size:.8rem}.harmony-type{color:#667eea;font-weight:500;text-transform:capitalize}.dominant-colors{display:flex;flex-direction:column;gap:8px}.label{color:#ffffffb3;font-size:.8rem}.color-row{display:flex;gap:6px}.color-swatch{width:32px;height:32px;border-radius:6px;cursor:pointer;border:2px solid rgba(255,255,255,.2);transition:all .2s ease}.color-swatch:hover{transform:scale(1.1);border-color:#667eea}.category-filter{margin-bottom:16px}.category-filter h4{margin:0 0 8px;color:#fff;font-size:.9rem}.filter-buttons{display:flex;gap:4px;flex-wrap:wrap}.filter-buttons button{background:#ffffff1a;color:#fff;border:none;padding:4px 8px;border-radius:4px;cursor:pointer;font-size:.75rem;transition:all .2s ease}.filter-buttons button.active{background:#667eea80}.filter-buttons button:hover{background:#fff3}.ai-suggestions{margin-bottom:16px}.suggestion-item{display:flex;align-items:center;gap:10px;padding:8px;background:#ffffff0d;border-radius:6px;margin-bottom:6px;cursor:pointer;transition:all .2s ease}.suggestion-item:hover{background:#ffffff1a;transform:translate(4px)}.suggestion-color{width:24px;height:24px;border-radius:4px;border:1px solid rgba(255,255,255,.2);flex-shrink:0}.suggestion-info{flex:1;display:flex;flex-direction:column;gap:2px}.suggestion-reason{color:#fff;font-size:.8rem;line-height:1.2}.suggestion-meta{display:flex;justify-content:space-between;align-items:center}.category{background:#667eea4d;color:#fff;padding:1px 6px;border-radius:8px;font-size:.7rem;text-transform:uppercase}.compatibility{color:#fff9;font-size:.7rem}.predefined-palettes{margin-bottom:16px}.predefined-palettes h4{margin:0 0 12px;color:#fff;font-size:.9rem}.palettes-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:8px}.palette-item{background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:6px;padding:8px;cursor:pointer;transition:all .2s ease}.palette-item:hover{background:#ffffff1a;transform:translateY(-2px)}.palette-colors{display:flex;height:24px;border-radius:4px;overflow:hidden;margin-bottom:6px}.palette-color{flex:1}.palette-name{color:#fff;font-size:.75rem;text-align:center;font-weight:500}.quick-actions{display:flex;gap:8px;padding-top:12px;border-top:1px solid rgba(255,255,255,.1)}.quick-actions button{background:#ffffff1a;color:#fff;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:.75rem;transition:all .2s ease;flex:1}.quick-actions button:hover{background:#fff3}.ai-color-assistant::-webkit-scrollbar{width:6px}.ai-color-assistant::-webkit-scrollbar-track{background:#ffffff1a;border-radius:3px}.ai-color-assistant::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.ai-color-assistant::-webkit-scrollbar-thumb:hover{background:#ffffff80}.smart-brush-panel{background:#1e1e28f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;border:1px solid rgba(255,255,255,.1);padding:16px;max-height:80vh;overflow-y:auto}.panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid rgba(255,255,255,.1)}.header-left{display:flex;align-items:center;gap:12px}.panel-header h3{margin:0;color:#fff;font-size:1.1rem}.toggle-btn{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:.8rem;display:flex;align-items:center;gap:4px;transition:all .2s ease}.toggle-btn:not(.active){background:#ffffff1a;color:#ffffffb3}.toggle-btn:hover{transform:translateY(-1px)}.settings-btn{background:#ffffff1a;color:#fff;border:none;padding:8px;border-radius:6px;cursor:pointer;transition:all .2s ease}.settings-btn:hover{background:#fff3}.mode-selection{margin-bottom:20px}.mode-selection h4{margin:0 0 12px;color:#fff;font-size:.9rem}.mode-grid{display:flex;flex-direction:column;gap:8px}.mode-card{display:flex;align-items:flex-start;gap:12px;padding:12px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:8px;cursor:pointer;transition:all .2s ease}.mode-card:hover{background:#ffffff1a}.mode-card.active{border-color:#667eea;background:#667eea33}.mode-icon{color:#667eea;font-size:1.2rem;margin-top:2px}.mode-info{flex:1}.mode-name{color:#fff;font-weight:500;font-size:.9rem;margin-bottom:4px}.mode-description{color:#ffffffb3;font-size:.8rem;line-height:1.3;margin-bottom:6px}.mode-features{display:flex;flex-wrap:wrap;gap:4px}.feature-tag{background:#667eea4d;color:#fff;padding:2px 6px;border-radius:8px;font-size:.7rem}.preset-section{margin-bottom:20px}.preset-section h4{margin:0 0 8px;color:#fff;font-size:.9rem}.preset-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:6px}.preset-btn{background:#ffffff1a;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;font-size:.8rem;transition:all .2s ease}.preset-btn:hover{background:#667eea4d;transform:translateY(-1px)}.main-controls{margin-bottom:20px}.control-group{margin-bottom:16px}.control-group label{display:block;color:#fff;font-size:.85rem;margin-bottom:8px}.slider-container{position:relative}.slider{width:100%;height:6px;border-radius:3px;background:#fff3;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.slider::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:#667eea;cursor:pointer;box-shadow:0 2px 4px #0000004d}.slider::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:#667eea;cursor:pointer;border:none;box-shadow:0 2px 4px #0000004d}.slider-labels{display:flex;justify-content:space-between;margin-top:4px;font-size:.7rem;color:#fff9}.checkbox-label{display:flex!important;align-items:center;gap:8px;cursor:pointer;margin-bottom:0!important}.checkbox-label input[type=checkbox]{display:none}.checkmark{width:16px;height:16px;background:#ffffff1a;border:1px solid rgba(255,255,255,.3);border-radius:3px;position:relative;transition:all .2s ease}.checkbox-label input:checked+.checkmark{background:#667eea;border-color:#667eea}.checkbox-label input:checked+.checkmark:after{content:"âœ“";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:10px;font-weight:700}.advanced-settings{background:#ffffff0d;border-radius:8px;padding:12px;margin-bottom:20px}.advanced-settings h4{margin:0 0 12px;color:#fff;font-size:.9rem}.advanced-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.setting-item{display:flex;flex-direction:column;gap:4px}.setting-item label{color:#fffc;font-size:.75rem}.setting-item select,.setting-item input[type=range]{background:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:4px;padding:4px 8px;color:#fff;font-size:.8rem}.color-preview{margin-bottom:16px}.preview-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.preview-header span{color:#fff;font-size:.85rem}.preview-toggle{background:#ffffff1a;color:#fff;border:none;padding:4px 8px;border-radius:4px;cursor:pointer;font-size:.75rem;transition:all .2s ease}.preview-toggle.active{background:#667eea80}.color-display{height:40px;border-radius:6px;border:1px solid rgba(255,255,255,.2);display:flex;align-items:center;justify-content:center;position:relative}.color-value{color:#fff;font-size:.8rem;font-weight:500;text-shadow:0 1px 2px rgba(0,0,0,.7)}.action-buttons{display:flex;gap:8px;margin-bottom:16px}.action-btn{flex:1;padding:10px;border:none;border-radius:6px;cursor:pointer;font-size:.85rem;display:flex;align-items:center;justify-content:center;gap:6px;transition:all .2s ease}.action-btn.primary{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.action-btn.secondary{background:#ffffff1a;color:#fff}.action-btn:hover{transform:translateY(-1px)}.action-btn.primary:hover{box-shadow:0 4px 12px #667eea4d}.tips-section{background:#ffffff0d;border-radius:8px;padding:12px}.tips-section h5{margin:0 0 8px;color:#fff;font-size:.85rem}.tips-section ul{margin:0;padding-left:16px;color:#ffffffb3;font-size:.75rem;line-height:1.4}.tips-section li{margin-bottom:4px}.tips-section strong{color:#667eea}.smart-brush-panel::-webkit-scrollbar{width:6px}.smart-brush-panel::-webkit-scrollbar-track{background:#ffffff1a;border-radius:3px}.smart-brush-panel::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.smart-brush-panel::-webkit-scrollbar-thumb:hover{background:#ffffff80}.version-history{background:#1e1e28f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;border:1px solid rgba(255,255,255,.1);padding:16px;max-height:70vh;overflow-y:auto;min-width:320px}.history-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid rgba(255,255,255,.1)}.history-header h3{margin:0;color:#fff;font-size:1.1rem}.header-actions{display:flex;gap:8px}.view-toggle{background:#ffffff1a;color:#fff;border:none;padding:6px 8px;border-radius:4px;cursor:pointer;font-size:.9rem;transition:all .2s ease}.view-toggle:hover{background:#fff3}.save-btn{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-size:.8rem;display:flex;align-items:center;gap:4px;transition:all .2s ease}.save-btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px #667eea4d}.navigation-controls{display:flex;align-items:center;justify-content:space-between;background:#ffffff0d;border-radius:8px;padding:8px 12px;margin-bottom:16px}.nav-btn{background:#ffffff1a;color:#fff;border:none;padding:6px 8px;border-radius:4px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center}.nav-btn:hover:not(:disabled){background:#667eea80}.nav-btn:disabled{opacity:.4;cursor:not-allowed}.current-version-info{display:flex;flex-direction:column;align-items:center;gap:2px}.version-indicator{color:#667eea;font-size:.8rem;font-weight:500}.version-name{color:#fff;font-size:.85rem;max-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.compare-section{background:#667eea1a;border-radius:6px;padding:8px 12px;margin-bottom:12px}.compare-header{display:flex;align-items:center;justify-content:space-between;font-size:.8rem;color:#fff}.compare-btn{background:#667eea80;color:#fff;border:none;padding:4px 8px;border-radius:4px;cursor:pointer;font-size:.75rem}.clear-selection{background:transparent;color:#ffffffb3;border:none;cursor:pointer;font-size:.75rem}.versions-container{margin-bottom:16px}.timeline{position:relative}.timeline:before{content:"";position:absolute;left:20px;top:0;bottom:0;width:2px;background:linear-gradient(to bottom,#667eea,#667eea4d)}.timeline-item{position:relative;margin-bottom:16px;cursor:pointer;transition:all .2s ease}.timeline-item:hover{transform:translate(4px)}.timeline-item.current{background:#667eea1a;border-radius:8px;padding:8px;margin-left:-8px;margin-right:-8px}.timeline-item.selected{background:#f48fb11a;border:1px solid rgba(244,143,177,.3);border-radius:8px;padding:8px;margin-left:-8px;margin-right:-8px}.timeline-marker{position:absolute;left:12px;top:16px;width:16px;height:16px;background:#fff3;border:2px solid #667eea;border-radius:50%;z-index:1}.current-indicator{width:8px;height:8px;background:#667eea;border-radius:50%;margin:2px}.timeline-content{display:flex;gap:12px;margin-left:40px;align-items:flex-start}.version-thumbnail{width:60px;height:60px;border-radius:6px;overflow:hidden;border:1px solid rgba(255,255,255,.1);flex-shrink:0}.version-thumbnail img{width:100%;height:100%;object-fit:cover}.version-details{flex:1;min-width:0}.version-details h4{margin:0 0 4px;color:#fff;font-size:.9rem;font-weight:500}.version-description{margin:0 0 8px;color:#ffffffb3;font-size:.75rem;line-height:1.3}.version-metadata{display:flex;flex-direction:column;gap:4px;margin-bottom:8px}.timestamp{display:flex;align-items:center;gap:4px;color:#fff9;font-size:.7rem}.metadata-tags{display:flex;flex-wrap:wrap;gap:4px}.tag{background:#667eea4d;color:#fff;padding:1px 6px;border-radius:8px;font-size:.65rem}.version-actions{display:flex;gap:4px;opacity:0;transition:opacity .2s ease}.timeline-item:hover .version-actions{opacity:1}.action-btn{background:#ffffff1a;color:#fff;border:none;padding:4px 8px;border-radius:4px;cursor:pointer;font-size:.7rem;transition:all .2s ease}.action-btn:hover{background:#fff3}.action-btn.revert:hover{background:#667eea80}.action-btn.delete:hover{background:#f4433680}.grid-view{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px}.grid-item{background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:8px;cursor:pointer;transition:all .2s ease;position:relative}.grid-item:hover{background:#ffffff1a;transform:translateY(-2px)}.grid-item.current{border-color:#667eea;background:#667eea33}.grid-item.selected{border-color:#f48fb1;background:#f48fb133}.grid-thumbnail{position:relative;width:100%;height:80px;border-radius:4px;overflow:hidden;margin-bottom:6px}.grid-thumbnail img{width:100%;height:100%;object-fit:cover}.current-badge{position:absolute;top:4px;right:4px;background:#667eea;color:#fff;padding:2px 6px;border-radius:8px;font-size:.6rem;font-weight:500}.grid-info{text-align:center}.grid-info h5{margin:0 0 2px;color:#fff;font-size:.75rem;font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.grid-timestamp{color:#fff9;font-size:.65rem}.grid-actions{position:absolute;top:4px;left:4px;display:flex;gap:2px;opacity:0;transition:opacity .2s ease}.grid-item:hover .grid-actions{opacity:1}.grid-actions button{background:#000000b3;color:#fff;border:none;width:20px;height:20px;border-radius:50%;cursor:pointer;font-size:.8rem;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.grid-actions button:hover{background:#667eeacc}.delete-grid:hover{background:#f44336cc!important}.history-stats{display:flex;justify-content:space-around;background:#ffffff0d;border-radius:6px;padding:8px;border-top:1px solid rgba(255,255,255,.1)}.stat-item{text-align:center}.stat-value{display:block;color:#667eea;font-size:1.1rem;font-weight:600}.stat-label{color:#fff9;font-size:.7rem}.save-dialog-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:2000}.save-dialog{background:#1e1e28;border-radius:12px;padding:24px;width:400px;border:1px solid rgba(255,255,255,.1)}.save-dialog h3{margin:0 0 16px;color:#fff}.form-group{margin-bottom:12px}.form-group label{display:block;color:#fff;margin-bottom:4px;font-size:.85rem}.form-group input,.form-group textarea{width:100%;background:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:6px;padding:8px;color:#fff;font-family:inherit;font-size:.85rem}.form-group input:focus,.form-group textarea:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 2px #667eea33}.dialog-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:16px}.dialog-actions button{padding:8px 16px;border:none;border-radius:6px;cursor:pointer;font-size:.85rem;transition:all .2s ease}.dialog-actions button:first-child{background:#ffffff1a;color:#fff}.dialog-actions button.primary{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.dialog-actions button:hover{transform:translateY(-1px)}.version-history::-webkit-scrollbar{width:6px}.version-history::-webkit-scrollbar-track{background:#ffffff1a;border-radius:3px}.version-history::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.version-history::-webkit-scrollbar-thumb:hover{background:#ffffff80}.ai-generate-panel{position:relative;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.error-message{margin:10px 0;padding:12px 16px;border-radius:4px;font-size:14px;animation:fadeIn .3s ease-in-out}.error-message.error{background-color:#fdecea;color:#d32f2f;border:1px solid #ffa4a4}.error-message.warning{background-color:#fff3e0;color:#ed6c02;border:1px solid #ffe0b2}.error-message.info{background-color:#e3f2fd;color:#0288d1;border:1px solid #90caf9}.loading-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:#ffffffe6;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:10;border-radius:8px}.loading-spinner{width:40px;height:40px;border:3px solid #f3f3f3;border-top:3px solid #3498db;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:16px}.controls{margin-top:20px;display:flex;justify-content:flex-end}button{padding:10px 20px;border:none;border-radius:4px;background-color:#3498db;color:#fff;font-weight:500;cursor:pointer;transition:background-color .2s}button:hover:not(:disabled){background-color:#2980b9}button:disabled{background-color:#bdc3c7;cursor:not-allowed}button.generating{position:relative;padding-right:40px}@keyframes fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.ai-outline-generator{max-width:400px;margin:16px;background:linear-gradient(135deg,#ffffff1a,#ffffff0d);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:16px;box-shadow:0 8px 32px #0000004d}.ai-outline-generator .MuiCardContent-root{padding:24px}.image-preview{display:flex;justify-content:center;align-items:center;border:2px dashed rgba(255,105,180,.3);border-radius:12px;padding:16px;background:#ff69b40d;transition:all .3s ease}.image-preview:hover{border-color:#ff69b480;background:#ff69b41a}.image-preview img{max-width:100%;max-height:200px;border-radius:8px;box-shadow:0 4px 12px #0003}.ai-outline-generator .MuiSlider-root{color:#ff69b4}.ai-outline-generator .MuiSlider-thumb{background:linear-gradient(135deg,#ff69b4,#ff1493);box-shadow:0 2px 8px #ff69b44d}.ai-outline-generator .MuiSlider-track{background:linear-gradient(90deg,#ff69b4,#ff1493)}.ai-outline-generator .MuiSlider-rail{background:#ff69b433}.ai-outline-generator .MuiButton-contained{background:linear-gradient(135deg,#ff69b4,#ff1493);box-shadow:0 4px 12px #ff69b44d;transition:all .3s ease}.ai-outline-generator .MuiButton-contained:hover{background:linear-gradient(135deg,#ff1493,#dc143c);box-shadow:0 6px 16px #ff69b466;transform:translateY(-2px)}.ai-outline-generator .MuiButton-outlined{border-color:#ff69b480;color:#ff69b4}.ai-outline-generator .MuiButton-outlined:hover{border-color:#ff69b4;background:#ff69b41a}.ai-outline-generator .MuiTextField-root .MuiOutlinedInput-root{border-radius:12px}.ai-outline-generator .MuiTextField-root .MuiOutlinedInput-root:hover .MuiOutlinedInput-notchedOutline{border-color:#ff69b480}.ai-outline-generator .MuiTextField-root .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline{border-color:#ff69b4}@media (prefers-color-scheme: dark){.ai-outline-generator{background:linear-gradient(135deg,#2a2a2ae6,#1f1f1fe6);border-color:#ffffff1a}.ai-outline-generator .MuiTypography-root{color:#fff}.ai-outline-generator .MuiTextField-root .MuiInputLabel-root{color:#ffffffb3}.ai-outline-generator .MuiTextField-root .MuiOutlinedInput-input{color:#fff}}.anime-chara-helper{min-height:100vh;background:linear-gradient(135deg,#ff9a9e,#fecfef,#fecfef);padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.acha-header{text-align:center;margin-bottom:30px;padding:20px;background:#ffffffe6;border-radius:15px;box-shadow:0 4px 15px #0000001a;position:relative}.back-btn{position:absolute;left:20px;top:20px;background:#6c5ce7;color:#fff;border:none;padding:10px 20px;border-radius:25px;cursor:pointer;font-weight:700;transition:all .3s ease}.back-btn:hover{background:#5f3dc4;transform:translateY(-2px)}.acha-title{font-size:2.5rem;color:#2d3436;margin:0;font-weight:700}.acha-subtitle{font-size:1.1rem;color:#636e72;margin-top:10px}.acha-content{max-width:1200px;margin:0 auto}.anime-chara-helper.enhanced{min-height:100vh;background:linear-gradient(135deg,#ff9a9e,#fecfef,#fecfef);font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;display:flex;flex-direction:column;overflow:hidden}.anime-chara-helper.enhanced.fullscreen{position:fixed;top:0;left:0;right:0;bottom:0;z-index:1000;background:#1a1a1a}:root{--bg-color: #ffffff;--text-color: #2d3748;--border-color: rgba(0, 0, 0, .1);--sidebar-bg: #f8fafc;--toolbar-bg: #ffffff;--btn-bg: #ffffff;--hover-bg: rgba(0, 0, 0, .05);--active-bg: rgba(102, 126, 234, .1);--active-text: #667eea;--item-bg: rgba(0, 0, 0, .02);--surface-1: #ffffff;--surface-2: #f8fafc;--surface-3: #f1f5f9;--text-1: #2d3748;--text-2: #4a5568;--text-3: #718096;--accent-1: #667eea;--accent-2: #5a67d8;--accent-3: #4c51bf}@media (prefers-color-scheme: dark){:root{--bg-color: #1a1a1a;--text-color: #e2e8f0;--border-color: rgba(255, 255, 255, .1);--sidebar-bg: #262626;--toolbar-bg: #262626;--btn-bg: #333333;--hover-bg: rgba(255, 255, 255, .1);--active-bg: rgba(102, 126, 234, .2);--active-text: #9f7aea;--item-bg: rgba(255, 255, 255, .05);--surface-1: #1a1a1a;--surface-2: #262626;--surface-3: #333333;--text-1: #e2e8f0;--text-2: #cbd5e0;--text-3: #a0aec0;--accent-1: #9f7aea;--accent-2: #805ad5;--accent-3: #6b46c1}}*{box-sizing:border-box;margin:0;padding:0}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.5;color:var(--text-color);background:var(--bg-color)}button{font-family:inherit;font-size:inherit;line-height:inherit;color:inherit;cursor:pointer}input,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit;color:inherit}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:var(--surface-2)}::-webkit-scrollbar-thumb{background:var(--text-3);border-radius:4px}::-webkit-scrollbar-thumb:hover{background:var(--text-2)}.steps-container{display:flex;flex-direction:column;gap:20px;padding:20px}.step{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden;transition:all .3s ease}.step:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.step-header{padding:16px;background:#f8f9fa;border-bottom:1px solid #eee;display:flex;align-items:center;gap:12px}.step-number{width:32px;height:32px;border-radius:50%;background:#1976d2;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:500}.step-title{font-size:18px;font-weight:500;color:#333;margin:0}.step-content{padding:16px}.step-description{font-size:16px;color:#666;line-height:1.5;margin:0 0 16px}.step-actions{display:flex;gap:12px;margin-top:16px}.step-button{padding:8px 16px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.step-button.primary{background:#1976d2;color:#fff;border:none}.step-button.primary:hover{background:#1565c0}.step-button.secondary{background:#f8f9fa;color:#333;border:1px solid #ddd}.step-button.secondary:hover{background:#f1f3f5;border-color:#ccc}.step-progress{display:flex;align-items:center;gap:8px;margin-top:16px}.progress-bar{flex:1;height:4px;background:#eee;border-radius:2px;overflow:hidden}.progress-fill{height:100%;background:#1976d2;transition:width .3s ease}.progress-text{font-size:14px;color:#666;white-space:nowrap}.step-tooltips{margin-top:16px;padding:12px;background:#f8f9fa;border-radius:6px}.tooltip{display:flex;align-items:flex-start;gap:8px;padding:8px 0}.tooltip:not(:last-child){border-bottom:1px solid #eee}.tooltip-time{font-size:14px;color:#666;white-space:nowrap}.tooltip-text{font-size:14px;color:#333;line-height:1.4}.step-video{width:100%;border-radius:6px;overflow:hidden;margin-top:16px}.step-video video{width:100%;height:auto;display:block}.drawing-tools.enhanced{position:absolute;top:80px;left:20px;width:60px;background:#fffffff2;border-radius:12px;box-shadow:0 4px 15px #0000001a;padding:15px;display:flex;flex-direction:column;gap:15px;max-height:calc(100vh - 160px);overflow-y:auto;z-index:100}.tool-group{display:flex;flex-direction:column;gap:8px}.tool-group label{font-size:.8rem;color:#666;margin-bottom:4px}.tool-buttons{display:flex;flex-wrap:wrap;gap:5px}.tool-btn{width:40px;height:40px;border:none;border-radius:8px;background:#f0f0f0;color:#333;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.tool-btn:hover{background:#e0e0e0}.tool-btn.active{background:#6c5ce7;color:#fff}.size-slider,.opacity-slider{width:100%;margin:5px 0}@media (max-width: 768px){.drawing-tools.enhanced{position:relative;top:auto;left:auto;width:100%;margin-bottom:1rem;flex-direction:row;flex-wrap:wrap;gap:.75rem;padding:1rem;max-height:none}.tool-group{flex-direction:row;align-items:center;gap:.5rem}.tool-group label{margin-bottom:0;min-width:60px;font-size:.8rem}.tool-buttons{gap:.25rem}.tool-btn{width:35px;height:35px;font-size:1rem}.size-slider,.opacity-slider{width:80px}}.tools-panel{display:flex;flex-direction:column;gap:16px;padding:16px}.tool-group-title{font-size:14px;font-weight:500;color:var(--text-2);margin-bottom:4px}.tool-button{display:flex;align-items:center;gap:8px;padding:8px;border:none;border-radius:6px;background:var(--surface-2);color:var(--text-1);transition:all .2s ease}.tool-button:hover{background:var(--surface-3)}.tool-button.active{background:var(--active-bg);color:var(--active-text)}.tool-icon{width:20px;height:20px;display:flex;align-items:center;justify-content:center}.tool-label{font-size:14px}.tool-settings{padding:12px;background:var(--surface-2);border-radius:6px}.setting-row{display:flex;align-items:center;gap:12px;margin-bottom:12px}.setting-row:last-child{margin-bottom:0}.setting-label{font-size:14px;color:var(--text-2);min-width:80px}.setting-control{flex:1}.color-picker{width:32px;height:32px;padding:0;border:2px solid var(--border-color);border-radius:4px;cursor:pointer}.size-slider{width:100%;height:4px;background:var(--surface-3);border-radius:2px;-webkit-appearance:none}.size-slider::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:var(--accent-1);cursor:pointer;-webkit-transition:all .2s ease;transition:all .2s ease}.size-slider::-webkit-slider-thumb:hover{background:var(--accent-2);transform:scale(1.1)}.opacity-slider{width:100%;height:4px;background:var(--surface-3);border-radius:2px;-webkit-appearance:none}.opacity-slider::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:var(--accent-1);cursor:pointer;-webkit-transition:all .2s ease;transition:all .2s ease}.opacity-slider::-webkit-slider-thumb:hover{background:var(--accent-2);transform:scale(1.1)}.blend-mode-select{width:100%;padding:8px;border:1px solid var(--border-color);border-radius:4px;background:var(--surface-1);color:var(--text-1);cursor:pointer}.blend-mode-select:hover{border-color:var(--accent-1)}.blend-mode-select:focus{outline:none;border-color:var(--accent-1);box-shadow:0 0 0 2px var(--accent-1-alpha)}.layer-panel{position:absolute;top:80px;right:20px;width:250px;background:#fffffff2;border-radius:12px;box-shadow:0 4px 15px #0000001a;padding:15px;max-height:calc(100vh - 160px);overflow-y:auto;z-index:100}.layer-list{display:flex;flex-direction:column;gap:8px}.layer-item{display:flex;align-items:center;padding:8px;background:#f8f9fa;border-radius:8px;cursor:pointer;transition:all .2s ease}.layer-item:hover{background:#e9ecef}.layer-item.active{background:#e3e6ff}.layer-visibility{margin-right:8px;opacity:.7;cursor:pointer}.layer-visibility:hover{opacity:1}.layer-name{flex-grow:1;font-size:.9rem;color:#495057}.layer-controls{display:flex;gap:4px}.layer-control-btn{padding:4px;border:none;background:none;color:#6c757d;cursor:pointer;border-radius:4px;transition:all .2s ease}.layer-control-btn:hover{background:#dee2e6;color:#343a40}@media (max-width: 768px){.layer-panel{position:relative;top:auto;right:auto;width:100%;margin-top:1rem;max-height:300px}}.layers-panel{display:flex;flex-direction:column;gap:16px;padding:16px}.layers-header{display:flex;align-items:center;justify-content:space-between;padding-bottom:8px;border-bottom:1px solid var(--border-color)}.layers-title{font-size:14px;font-weight:500;color:var(--text-2)}.layers-actions{display:flex;gap:8px}.layer-action-button{width:24px;height:24px;padding:0;border:none;border-radius:4px;background:var(--surface-2);color:var(--text-2);display:flex;align-items:center;justify-content:center;transition:all .2s ease}.layer-action-button:hover{background:var(--surface-3);color:var(--text-1)}.layer-list{display:flex;flex-direction:column;gap:4px}.layer-item{display:flex;align-items:center;gap:8px;padding:8px;border-radius:4px;background:var(--surface-2);cursor:pointer;transition:all .2s ease}.layer-item:hover{background:var(--surface-3)}.layer-item.active{background:var(--active-bg)}.layer-visibility{width:20px;height:20px;padding:0;border:none;background:none;color:var(--text-2);display:flex;align-items:center;justify-content:center;transition:all .2s ease}.layer-visibility:hover{color:var(--text-1)}.layer-visibility.hidden{color:var(--text-3)}.layer-preview{width:32px;height:32px;border-radius:4px;background:var(--surface-1);border:1px solid var(--border-color);overflow:hidden}.layer-preview img{width:100%;height:100%;object-fit:cover}.layer-info{flex:1;min-width:0}.layer-name{font-size:14px;color:var(--text-1);margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.layer-opacity{width:60px;font-size:12px;color:var(--text-2)}.layer-blend{width:80px;font-size:12px;color:var(--text-2)}.layer-lock{width:20px;height:20px;padding:0;border:none;background:none;color:var(--text-2);display:flex;align-items:center;justify-content:center;transition:all .2s ease}.layer-lock:hover{color:var(--text-1)}.layer-lock.locked{color:var(--accent-1)}.layer-menu{width:20px;height:20px;padding:0;border:none;background:none;color:var(--text-2);display:flex;align-items:center;justify-content:center;transition:all .2s ease}.layer-menu:hover{color:var(--text-1)}.layer-menu-dropdown{position:absolute;right:0;top:100%;min-width:160px;padding:8px 0;background:var(--surface-1);border:1px solid var(--border-color);border-radius:4px;box-shadow:0 2px 8px #0000001a;z-index:100}.layer-menu-item{display:flex;align-items:center;gap:8px;padding:8px 16px;font-size:14px;color:var(--text-1);background:none;border:none;width:100%;text-align:left;transition:all .2s ease}.layer-menu-item:hover{background:var(--surface-2)}.layer-menu-item.danger{color:#e53e3e}.layer-menu-item.danger:hover{background:#fff5f5}.placeholder{background:#f8f9fa;border-radius:12px;padding:20px;text-align:center;color:#666;font-size:16px;line-height:1.5;margin:20px 0}.placeholder-icon{font-size:48px;color:#999;margin-bottom:12px}.placeholder-text{margin:0}.placeholder-actions{margin-top:16px;display:flex;justify-content:center;gap:12px}.placeholder-button{padding:8px 16px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.placeholder-button.primary{background:#1976d2;color:#fff;border:none}.placeholder-button.primary:hover{background:#1565c0}.placeholder-button.secondary{background:#f8f9fa;color:#333;border:1px solid #ddd}.placeholder-button.secondary:hover{background:#f1f3f5;border-color:#ccc}.placeholder-loading{display:flex;align-items:center;justify-content:center;gap:8px;margin-top:16px}.placeholder-loading-dot{width:8px;height:8px;border-radius:50%;background:#999;animation:loading 1s infinite}.placeholder-loading-dot:nth-child(2){animation-delay:.2s}.placeholder-loading-dot:nth-child(3){animation-delay:.4s}@keyframes loading{0%,to{transform:scale(1);opacity:.3}50%{transform:scale(1.2);opacity:1}}.anime-chara-helper{display:flex;height:100vh;width:100vw;background:linear-gradient(135deg,#0f0f23,#1a1a2e,#16213e);color:#fff;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;overflow:hidden;position:relative}.main-content{flex:1;display:flex;height:100%;transition:margin-left .3s ease}.main-content.sidebar-collapsed{margin-left:50px}.main-content.sidebar-expanded{margin-left:80px}.canvas-container{flex:1;display:flex;flex-direction:column;min-width:0;position:relative;background:radial-gradient(circle at center,rgba(255,255,255,.02) 0%,transparent 70%)}.right-panel{width:400px;min-width:400px;background:linear-gradient(180deg,#2a2a2af2,#1f1f1ff2);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-left:1px solid rgba(255,255,255,.1);overflow-y:auto;scrollbar-width:thin;scrollbar-color:rgba(255,105,180,.3) transparent}.right-panel::-webkit-scrollbar{width:6px}.right-panel::-webkit-scrollbar-track{background:transparent}.right-panel::-webkit-scrollbar-thumb{background:#ff69b44d;border-radius:3px}.right-panel::-webkit-scrollbar-thumb:hover{background:#ff69b480}.context-panel{background:linear-gradient(135deg,#ffffff1a,#ffffff0d);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.2);border-radius:16px;margin:16px;box-shadow:0 8px 32px #0000004d;overflow:hidden}.generated-image-overlay{position:absolute;bottom:20px;right:20px;max-width:300px;z-index:1000;animation:slideInFromRight .4s ease-out}@keyframes slideInFromRight{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.generated-image-container{background:#000000e6;border-radius:16px;padding:16px;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 32px #00000080}.generated-image-container img{width:100%;border-radius:12px;box-shadow:0 4px 16px #0000004d}.MuiDialog-paper{background:linear-gradient(135deg,#2a2a2af2,#1f1f1ff2)!important;-webkit-backdrop-filter:blur(20px)!important;backdrop-filter:blur(20px)!important;border:1px solid rgba(255,255,255,.1)!important;border-radius:16px!important;box-shadow:0 8px 32px #00000080!important}.MuiDialogContent-root{color:#fff!important}.payment-dialog{text-align:center}.payment-dialog .MuiTypography-h5{background:linear-gradient(135deg,#ff69b4,#ff1493);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:16px}.payment-dialog .MuiAlert-root{background:#2196f31a!important;border:1px solid rgba(33,150,243,.3)!important;color:#fff!important}.payment-dialog .feature-list{text-align:left;margin:16px 0;font-size:14px;line-height:1.6}.loading-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:2000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.loading-spinner{width:40px;height:40px;border:3px solid rgba(255,105,180,.3);border-top:3px solid #ff69b4;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 1024px){.right-panel{width:350px;min-width:350px}}@media (max-width: 768px){.anime-chara-helper{flex-direction:column}.main-content{margin-left:0!important;margin-bottom:80px}.right-panel{position:fixed;bottom:70px;left:0;right:0;width:100%;min-width:100%;height:50vh;border-left:none;border-top:1px solid rgba(255,255,255,.1);border-radius:16px 16px 0 0;z-index:999}.generated-image-overlay{bottom:140px;right:10px;max-width:200px}.context-panel{margin:8px;border-radius:12px}}@media (max-width: 480px){.generated-image-overlay{max-width:150px;bottom:120px}.right-panel{height:40vh}}@media (prefers-color-scheme: dark){.anime-chara-helper{background:linear-gradient(135deg,#0a0a0f,#1a1a1e,#0f1419)}.context-panel{background:linear-gradient(135deg,#2a2a2ae6,#1f1f1fe6);border-color:#ffffff1a}.right-panel{background:linear-gradient(180deg,#1f1f1ffa,#151515fa)}}@media (prefers-reduced-motion: reduce){.anime-chara-helper *{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}@media (prefers-contrast: high){.anime-chara-helper{background:#000;color:#fff}.context-panel,.right-panel{background:#1a1a1a;border-color:#fff}}.left-sidebar,.right-sidebar{width:240px;height:100%;background:var(--sidebar-bg, #f8fafc);border:1px solid var(--border-color, rgba(0, 0, 0, .1));transition:width .3s ease;position:relative;display:flex;flex-direction:column}.left-sidebar.collapsed,.right-sidebar.collapsed{width:48px}.collapse-btn{position:absolute;top:50%;width:16px;height:48px;background:var(--btn-bg, #ffffff);border:1px solid var(--border-color, rgba(0, 0, 0, .1));border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:10}.left-sidebar .collapse-btn{right:-8px;transform:translateY(-50%)}.right-sidebar .collapse-btn{left:-8px;transform:translateY(-50%)}.sidebar-content{flex:1;display:flex;flex-direction:column;overflow:hidden}.main-content{flex:1;display:flex;flex-direction:column;overflow:hidden;position:relative}.toolbar{height:48px;padding:0 16px;background:var(--toolbar-bg, #ffffff);border-bottom:1px solid var(--border-color, rgba(0, 0, 0, .1));display:flex;align-items:center;gap:8px}.tab-panel{display:flex;padding:8px;gap:8px;border-bottom:1px solid var(--border-color, rgba(0, 0, 0, .1))}.tab-button{padding:8px 16px;border:none;background:transparent;border-radius:6px;cursor:pointer;font-size:14px;color:var(--text-color, #2d3748);transition:all .2s ease}.tab-button:hover{background:var(--hover-bg, rgba(0, 0, 0, .05))}.tab-button.active{background:var(--active-bg, rgba(102, 126, 234, .1));color:var(--active-text, #667eea);font-weight:500}.panel-content{flex:1;overflow-y:auto;padding:16px}.layer-panel{display:flex;flex-direction:column;gap:8px}.layer-item{display:flex;align-items:center;gap:8px;padding:8px;background:var(--item-bg, rgba(0, 0, 0, .02));border-radius:4px}.mode-switcher{position:fixed;top:20px;right:20px;z-index:2000;display:flex;gap:10px;background:#2a2a3ee6;padding:10px;border-radius:12px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}.mode-btn{padding:8px 16px;border:none;border-radius:8px;background:#ffffff1a;color:#fff;cursor:pointer;transition:all .3s ease;font-size:14px;font-weight:500}.mode-btn:hover{background:#fff3;transform:translateY(-2px)}.mode-btn.active{background:linear-gradient(135deg,#ff6b9d,#c44569);box-shadow:0 4px 15px #ff6b9d4d}.mode-button{display:flex;align-items:center;gap:8px;padding:8px 16px;border:none;border-radius:6px;background:var(--surface-3);color:var(--text-1);cursor:pointer;transition:all .2s ease}.mode-button:hover{background:var(--surface-4)}.mode-button.active{background:var(--primary);color:#fff}.mode-button .icon{font-size:1.2em}.shared-customization-panel{position:fixed;top:80px;right:20px;z-index:1500;background:#2a2a3ef2;border-radius:12px;padding:20px;min-width:300px;max-width:400px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 32px #0000004d}.shared-customization-panel h3{margin:0 0 20px;color:#fff;font-size:18px;font-weight:600}.shared-customization-panel h4{margin:0 0 12px;color:#e0e0e0;font-size:14px;font-weight:500}.bg-type-selector{display:flex;gap:8px;margin-bottom:16px}.bg-type-selector button{flex:1;padding:8px 12px;border:none;border-radius:6px;background:#ffffff1a;color:#fff;cursor:pointer;transition:all .3s ease;font-size:12px}.bg-type-selector button:hover{background:#fff3}.bg-type-selector button.active{background:linear-gradient(135deg,#4facfe,#00f2fe)}.color-picker input[type=color]{width:100%;height:40px;border:none;border-radius:6px;cursor:pointer}.gradient-presets{display:flex;flex-direction:column;gap:8px}.gradient-presets button{padding:8px 12px;border:none;border-radius:6px;background:#ffffff1a;color:#fff;cursor:pointer;transition:all .3s ease;font-size:12px}.gradient-presets button:hover{background:#fff3}.opacity-slider{margin-top:16px}.opacity-slider label{display:block;color:#e0e0e0;font-size:12px;margin-bottom:8px}.opacity-slider input[type=range]{width:100%;height:6px;border-radius:3px;background:#fff3;outline:none}.creation-mode,.image-generation-mode{width:100%;height:100vh;position:relative;overflow:hidden}.creation-mode{background:linear-gradient(135deg,#0f0f23,#1a1a2e,#16213e)}.image-generation-mode{background:linear-gradient(135deg,#1a1a2e,#16213e,#0f0f23)}.ai-generate-panel{padding:20px;display:flex;flex-direction:column;gap:24px}.reference-upload{display:flex;flex-direction:column;gap:12px}.reference-upload button{padding:8px 16px;background:var(--surface-3);border:1px dashed var(--border);border-radius:8px;color:var(--text-1);cursor:pointer;transition:all .2s ease}.reference-upload button:hover{background:var(--surface-4);border-color:var(--primary)}.reference-preview{max-width:200px;max-height:200px;object-fit:contain;border-radius:8px;border:1px solid var(--border)}.advanced-settings{background:var(--surface-2);border-radius:12px;padding:16px}.advanced-settings h3{margin:0 0 16px;color:var(--text-1);font-size:1.1em}.advanced-settings h4{margin:16px 0 8px;color:var(--text-2);font-size:.9em}.setting-group{margin-bottom:16px;display:flex;flex-direction:column;gap:8px}.setting-group label{display:flex;align-items:center;gap:8px;color:var(--text-1)}.setting-group select{padding:4px 8px;border:1px solid var(--border);border-radius:4px;background:var(--surface-1);color:var(--text-1)}.setting-group input[type=checkbox]{width:16px;height:16px;accent-color:var(--primary)}.setting-group input[type=range]{flex:1;accent-color:var(--primary)}.generated-images-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-top:24px}.generated-image-item{position:relative;border-radius:12px;overflow:hidden;background:var(--surface-2)}.generated-image-item img{width:100%;aspect-ratio:1;object-fit:cover}.generated-image-item button{position:absolute;bottom:8px;left:50%;transform:translate(-50%);padding:8px 16px;background:var(--primary);color:#fff;border:none;border-radius:6px;font-weight:500;cursor:pointer;opacity:0;transition:opacity .2s ease}.generated-image-item:hover button{opacity:1}.generated-image-item button:hover{background:var(--primary-dark)}.anime-container{display:grid;grid-template-columns:60px 1fr 300px;height:100vh;overflow:hidden;background-color:#1a1a1a}.anime-container{-ms-overflow-style:none;scrollbar-width:none}.anime-container::-webkit-scrollbar{display:none}.anime-container>*{overflow:hidden;height:100vh}.canvas-area{position:relative;width:100%;height:100vh;background-color:#f5f5f5;display:flex;flex-direction:column}.drawing-tools{position:absolute;top:20px;left:50%;transform:translate(-50%);display:flex;align-items:center;gap:8px;background-color:#2a2a2a;padding:8px;border-radius:8px;box-shadow:0 2px 8px #0003;z-index:10}.tool-button{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border:none;border-radius:4px;background:none;color:#888;cursor:pointer;transition:all .2s ease}.tool-button:hover{background-color:#ffffff1a;color:#fff}.tool-button.active{background-color:#ff69b433;color:#ff69b4}.drawing-canvas{flex:1;background-color:#fff;cursor:crosshair}.ai-generate-panel{width:300px;height:100vh;background-color:#2a2a2a;border-left:1px solid #3a3a3a;display:flex;flex-direction:column;color:#fff;overflow-y:auto}.ai-generate-panel-header{padding:16px;border-bottom:1px solid #3a3a3a}.ai-generate-panel-content{flex:1;padding:16px}@media (max-width: 768px){.anime-container{grid-template-columns:1fr}.icon-bar{position:fixed;bottom:0;left:0;right:0;height:60px;width:100%;flex-direction:row;justify-content:space-around;z-index:1000}.context-panel,.ai-generate-panel{position:fixed;top:0;right:0;bottom:60px;width:100%;max-width:300px;transform:translate(100%);transition:transform .3s ease}.context-panel.visible,.ai-generate-panel.visible{transform:translate(0)}.canvas-area{height:calc(100vh - 60px)}}.quick-tools{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:8px}.quick-tools button{background:#ffffff1a;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;font-size:.8rem;display:flex;align-items:center;justify-content:center;gap:6px;transition:all .2s ease}.quick-tools button:hover{background:#667eea4d;transform:translateY(-1px)}.quick-tools button.active{background:#667eea80;box-shadow:0 2px 8px #667eea4d}.ai-color-assistant-container,.smart-brush-container,.version-history-container{position:fixed;z-index:1000;animation:slideIn .3s ease-out}@keyframes slideIn{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.floating-panel{position:fixed;background:#1e1e28f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 32px #0000004d;z-index:1000}.floating-panel:before{content:"";position:absolute;top:-1px;left:-1px;right:-1px;bottom:-1px;background:linear-gradient(45deg,#667eea,#764ba2,#f093fb,#f5576c);border-radius:12px;z-index:-1;opacity:.3;filter:blur(1px)}@keyframes newFeaturePulse{0%,to{box-shadow:0 0 #667eeab3}70%{box-shadow:0 0 0 10px #667eea00}}.v12-feature{animation:newFeaturePulse 2s infinite}.canvas-area.smart-brush-active{cursor:crosshair}.smart-brush-preview{position:absolute;pointer-events:none;border:2px dashed #667eea;border-radius:50%;background:#667eea1a;transform:translate(-50%,-50%);transition:all .1s ease}.character-thumbnail.dragging{opacity:.7;transform:rotate(5deg) scale(1.1);z-index:1001}.canvas-area.drop-target{background:#667eea1a;border:2px dashed #667eea}.color-suggestion-highlight{position:absolute;background:#667eea4d;border:2px solid #667eea;border-radius:4px;animation:colorHighlight 1s ease-in-out}@keyframes colorHighlight{0%,to{opacity:0;transform:scale(.8)}50%{opacity:1;transform:scale(1)}}.version-comparison-mode{display:flex;gap:16px}.version-comparison-side{flex:1;border:2px solid rgba(244,143,177,.5);border-radius:8px;padding:8px;background:#f48fb11a}.version-comparison-side.before{border-color:#667eea80;background:#667eea1a}@media (max-width: 1200px){.ai-color-assistant-container{right:10px;width:280px}.smart-brush-container{left:10px;width:280px}.version-history-container{left:300px;width:300px}}@media (max-width: 768px){.ai-color-assistant-container,.smart-brush-container,.version-history-container{position:fixed;top:70px;left:50%;transform:translate(-50%);width:calc(100vw - 20px);max-width:400px}.quick-tools{grid-template-columns:repeat(4,1fr);gap:4px}.quick-tools button{padding:6px 8px;font-size:.7rem}}
