{"version":3,"file":"useAuth-CLSV77f7.js","sources":["../../src/hooks/useAuth.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { api } from '../services/api';\n\ninterface User {\n  id: string;\n  email: string;\n  name?: string;\n  billing?: {\n    hasAccessToImageGen: boolean;\n  };\n}\n\nconst TOKEN_KEY = 'auth_token';\n\nexport const getAuthToken = (): string | null => {\n  return localStorage.getItem(TOKEN_KEY);\n};\n\nexport const setAuthToken = (token: string): void => {\n  localStorage.setItem(TOKEN_KEY, token);\n};\n\nexport const removeAuthToken = (): void => {\n  localStorage.removeItem(TOKEN_KEY);\n};\n\nexport const useAuth = () => {\n  const [token, setToken] = useState<string | null>(getAuthToken());\n  const [isAuthenticated, setIsAuthenticated] = useState<boolean>(!!token);\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    setIsAuthenticated(!!token);\n  }, [token]);\n\n  useEffect(() => {\n    // Check if user is logged in\n    api.get('/api/auth/me')\n      .then(response => {\n        setUser(response.data);\n        setError(null);\n      })\n      .catch(err => {\n        setUser(null);\n        setError(err.message);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, []);\n\n  const login = (newToken: string) => {\n    setAuthToken(newToken);\n    setToken(newToken);\n  };\n\n  const logout = () => {\n    removeAuthToken();\n    setToken(null);\n  };\n\n  return {\n    token,\n    isAuthenticated,\n    login,\n    logout,\n    user,\n    loading,\n    error\n  };\n};\n\nexport default useAuth; "],"names":["TOKEN_KEY","getAuthToken","localStorage","getItem","setAuthToken","token","setItem","removeAuthToken","removeItem","useAuth","setToken","useState","isAuthenticated","setIsAuthenticated","user","setUser","loading","setLoading","error","setError","useEffect","api","get","then","response","data","catch","err","message","finally","login","newToken","logout"],"mappings":"+EAYA,MAAMA,EAAY,aAELC,EAAeA,IACnBC,aAAaC,QAAQH,CAAS,EAG1BI,EAAgBC,GAAwB,CACtCC,aAAAA,QAAQN,EAAWK,CAAK,CACvC,EAEaE,EAAkBA,IAAY,CACzCL,aAAaM,WAAWR,CAAS,CACnC,EAEaS,EAAUA,IAAM,CAC3B,KAAM,CAACJ,EAAOK,CAAQ,EAAIC,EAAAA,SAAwBV,GAAc,EAC1D,CAACW,EAAiBC,CAAkB,EAAIF,EAAAA,SAAkB,CAAC,CAACN,CAAK,EACjE,CAACS,EAAMC,CAAO,EAAIJ,EAAAA,SAAsB,IAAI,EAC5C,CAACK,EAASC,CAAU,EAAIN,EAAAA,SAAS,EAAI,EACrC,CAACO,EAAOC,CAAQ,EAAIR,EAAAA,SAAwB,IAAI,EAEtDS,OAAAA,EAAAA,UAAU,IAAM,CACKP,EAAA,CAAC,CAACR,CAAK,CAAA,EACzB,CAACA,CAAK,CAAC,EAEVe,EAAAA,UAAU,IAAM,CAEdC,EAAIC,IAAI,cAAc,EACnBC,KAAiBC,GAAA,CAChBT,EAAQS,EAASC,IAAI,EACrBN,EAAS,IAAI,CAAA,CACd,EACAO,MAAaC,GAAA,CACZZ,EAAQ,IAAI,EACZI,EAASQ,EAAIC,OAAO,CAAA,CACrB,EACAC,QAAQ,IAAM,CACbZ,EAAW,EAAK,CAAA,CACjB,CACL,EAAG,EAAE,EAYE,CACLZ,MAAAA,EACAO,gBAAAA,EACAkB,MAbaC,GAAqB,CAClC3B,EAAa2B,CAAQ,EACrBrB,EAASqB,CAAQ,CACnB,EAWEC,OATaA,IAAM,CACHzB,EAAA,EAChBG,EAAS,IAAI,CACf,EAOEI,KAAAA,EACAE,QAAAA,EACAE,MAAAA,CACF,CACF"}