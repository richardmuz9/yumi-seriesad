import{b as n}from"./api-DX6zK3xw.js";import{g as o}from"./useAuth-CLSV77f7.js";const a=n.create({baseURL:"https://api.yumi77965.online",withCredentials:!0});a.interceptors.request.use(e=>{const r=o();return r&&(e.headers.Authorization=`Bearer ${r}`),e});a.interceptors.response.use(e=>e,e=>{var r;return((r=e.response)==null?void 0:r.status)===401&&console.error("Authentication error:",e),Promise.reject(e)});const c={getBillingInfo:async()=>{try{return(await a.get("/api/billing/info")).data}catch(e){throw console.error("Failed to fetch billing info:",e),e}},async getPackagesAndPlans(){try{return(await a.get("/api/billing/packages")).data}catch(e){throw console.error("Failed to fetch packages and plans:",e),e}},async createStripeCheckout(e,r){try{return(await a.post("/api/billing/checkout/stripe",{packageId:e,planId:r})).data.url}catch(t){throw console.error("Failed to create Stripe checkout:",t),new Error("Payment service temporarily unavailable")}},async createAlipayCheckout(e,r){try{return(await a.post("/api/billing/checkout/alipay",{packageId:e,planId:r})).data.url}catch(t){throw console.error("Failed to create Alipay checkout:",t),new Error("Payment service temporarily unavailable")}},async initiatePayment(e,r="stripe"){try{return(await a.post("/api/billing/payment",{packageId:e,provider:r})).data}catch(t){throw console.error("Failed to initiate payment:",t),new Error("Payment service temporarily unavailable")}},needsTokenPurchase(e){return e.tokens<1e3},needsPremiumPlan(e){return!e.blessingActive},getTokensRemaining(e,r){return r&&e.freeTokensRemaining?e.freeTokensRemaining[r]:e.tokens}};export{c as b};
//# sourceMappingURL=billingApi-BuW6k-_u.js.map
