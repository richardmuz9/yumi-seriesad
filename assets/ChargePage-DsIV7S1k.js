import{a as e,j as a,F as T}from"./index-WcmAaxBA.js";import{b as l,u as B,I as C}from"./vendor-B9lPEkq4.js";import{b as k}from"./billingApi-BuW6k-_u.js";import{A as E}from"./ArrowBack-D_LrkQ9Z.js";import"./api-DX6zK3xw.js";import"./useAuth-CLSV77f7.js";const S=({currentTokens:p,dailyTokensRemaining:m,hasBlessing:d})=>{const c=n=>n>=1e6?`${(n/1e6).toFixed(1)}M`:n>=1e3?`${(n/1e3).toFixed(1)}K`:n.toString();return e("div",{className:"token-usage-display",children:a("div",{className:"token-info",children:[a("div",{className:"token-section",children:[e("h3",{children:"Available Timeshards"}),a("div",{className:"token-count",children:[c(p),e("span",{className:"token-label",children:"TS"})]})]}),d&&a("div",{className:"token-section blessing-active",children:[e("h3",{children:"Daily Timeshards"}),a("div",{className:"token-count",children:[c(m),e("span",{className:"token-label",children:"TS"}),e("span",{className:"blessing-indicator",children:"✨"})]})]})]})})},A=[{id:"basic",label:"Basic",price:5,tokens:1e5,description:"Perfect for getting started"},{id:"starter",label:"Starter",price:10,tokens:3e5,description:"Most popular for regular users"},{id:"pro",label:"Pro",price:15,tokens:7e5,description:"Great value for power users",recommended:!0},{id:"premium",label:"Premium",price:20,tokens:15e5,description:"Best value for serious users"},{id:"ultra",label:"Ultra",price:50,tokens:5e6,description:"For professional use"},{id:"max",label:"Max",price:100,tokens:11e6,description:"Maximum power and value",popular:!0}],r={id:"blessing",label:"Yumi Blessing",price:10,dailyTokens:35e3,durationDays:30,description:"Daily login rewards and special benefits"},G=({onClose:p})=>{const[m,d]=l.useState(!1),[c,n]=l.useState(null),[t,v]=l.useState(null),[g,u]=l.useState(null),[o,N]=l.useState("tokens"),y=B();l.useEffect(()=>{(async()=>{try{d(!0),n(null);const i=await k.getBillingInfo();v(i)}catch(i){console.error("[Billing] Error loading data:",i),n("Failed to load billing information. Please try again.")}finally{d(!1)}})()},[]);const b=async s=>{try{u(s);const{url:i}=await k.initiatePayment(s);window.location.href=i}catch(i){console.error("[Billing] Payment error:",i),n("Failed to process payment. Please try again."),u(null)}},h=s=>s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}K`:s.toString(),f=s=>{const i=g===s.id;return a("div",{className:`package-card ${s.recommended?"recommended":""} ${s.popular?"popular":""}`,children:[s.recommended&&e("div",{className:"badge recommended-badge",children:"RECOMMENDED"}),s.popular&&e("div",{className:"badge popular-badge",children:"POPULAR"}),a("div",{className:"package-header",children:[e("h3",{className:"package-title",children:s.label}),s.description&&e("p",{className:"package-description",children:s.description})]}),e("div",{className:"package-tokens",children:a("div",{className:"token-amount",children:[h(s.tokens)," timeshards"]})}),a("div",{className:"package-pricing",children:[a("div",{className:"price-display",children:[e("span",{className:"currency",children:"$"}),e("span",{className:"amount",children:s.price})]}),a("div",{className:"price-per-token",children:["$",(s.price/s.tokens*1e6).toFixed(2)," per 1M timeshards"]})]}),e("button",{onClick:()=>b(s.id),disabled:i,className:"purchase-button",children:i?a("span",{className:"processing",children:[e("span",{className:"spinner"}),"Processing..."]}):e("span",{children:"Purchase Package →"})})]},s.id)},P=()=>{const s=g===r.id,i=r.dailyTokens*r.durationDays;return a("div",{className:"package-card blessing-card recommended",children:[e("div",{className:"badge recommended-badge",children:"RECOMMENDED"}),a("div",{className:"package-header",children:[e("h3",{className:"package-title",children:r.label}),e("p",{className:"package-description",children:r.description})]}),a("div",{className:"package-tokens",children:[a("div",{className:"daily-tokens",children:[h(r.dailyTokens)," timeshards/day"]}),a("div",{className:"total-tokens",children:[h(i)," total timeshards"]}),a("div",{className:"duration",children:["for ",r.durationDays," days"]})]}),e("div",{className:"package-pricing",children:a("div",{className:"price-display",children:[e("span",{className:"currency",children:"$"}),e("span",{className:"amount",children:r.price}),e("span",{className:"period",children:"/month"})]})}),e("button",{onClick:()=>b(r.id),disabled:s,className:"purchase-button blessing",children:s?a("span",{className:"processing",children:[e("span",{className:"spinner"}),"Processing..."]}):e("span",{children:"Activate Blessing →"})})]})};return e("div",{className:"charge-page",children:a("div",{className:"charge-content",children:[a("div",{className:"header",children:[e(C,{onClick:()=>y(-1),className:"back-button",children:e(E,{})}),e("h2",{children:"Timeshard Packages & Billing"})]}),c&&e("div",{className:"error-message",children:e("p",{children:c})}),m?a("div",{className:"loading",children:[e("div",{className:"loading-spinner"}),e("p",{children:"Loading billing information..."})]}):a(T,{children:[t&&e(S,{currentTokens:t.tokens,dailyTokensRemaining:t.dailyTokensRemaining,hasBlessing:t.blessingActive}),a("div",{className:"tab-selector",children:[a("button",{className:`tab-option ${o==="tokens"?"active":""}`,onClick:()=>N("tokens"),children:[e("span",{className:"tab-icon",children:"⚡"}),e("span",{className:"tab-label",children:"One-Time Packages"})]}),a("button",{className:`tab-option ${o==="blessing"?"active":""}`,onClick:()=>N("blessing"),children:[e("span",{className:"tab-icon",children:"🎁"}),e("span",{className:"tab-label",children:"Yumi Blessing"})]})]}),a("div",{className:"packages-section",children:[o==="tokens"&&a("div",{className:"token-packages",children:[a("div",{className:"section-header",children:[e("h3",{children:"One-Time Timeshard Packages"}),e("p",{children:"Purchase timeshards once, use them anytime"})]}),e("div",{className:"package-grid",children:A.map(f)})]}),o==="blessing"&&a("div",{className:"blessing-packages",children:[a("div",{className:"section-header",children:[e("h3",{children:"Yumi Blessing - Daily Login Rewards"}),e("p",{children:"Just like Genshin Impact! Get daily timeshards with special benefits"})]}),a("div",{className:"blessing-container",children:[P(),a("div",{className:"blessing-features",children:[e("h4",{children:"🎁 Yumi Blessing Features:"}),a("ul",{children:[e("li",{children:"✨ Get 35,000 timeshards every day for 30 days"}),e("li",{children:"🎯 Total of 1.05M timeshards per month"}),e("li",{children:"⚡ After 10 days, claim remaining 700K timeshards immediately"}),e("li",{children:"🎮 No need to login daily - timeshards accumulate automatically"}),e("li",{children:"💫 Special blessing effects and priority support"})]})]})]})]})]})]})]})})};export{G as default};
//# sourceMappingURL=ChargePage-DsIV7S1k.js.map
